{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///../node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///../node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///external \"draft-js\"","webpack:///../node_modules/@babel/runtime/helpers/objectSpread.js","webpack:///../node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///../node_modules/@babel/runtime/helpers/createClass.js","webpack:///../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///../node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///../node_modules/@babel/runtime/helpers/inherits.js","webpack:///../node_modules/@babel/runtime/helpers/extends.js","webpack:///external \"immutable\"","webpack:///../node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///external \"draftjs-utils\"","webpack:///../node_modules/@babel/runtime/helpers/typeof.js","webpack:///../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///external \"draft-convert\"","webpack:///external \"react-dom\"","webpack:///external \"braft-finder\"","webpack:///../node_modules/draft-js-multidecorators/index.js","webpack:///../node_modules/draft-js/lib/CharacterMetadata.js","webpack:///../node_modules/draft-js/lib/findRangesImmutable.js","webpack:///../node_modules/draft-js/lib/getFragmentFromSelection.js","webpack:///../node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///../node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///../node_modules/draft-js/lib/getContentStateFragment.js","webpack:///../node_modules/draft-js/lib/randomizeBlockMapKeys.js","webpack:///../node_modules/draft-js/lib/ContentBlockNode.js","webpack:///../node_modules/draft-js/lib/generateRandomKey.js","webpack:///../node_modules/draft-js/lib/removeEntitiesAtEdges.js","webpack:///../node_modules/fbjs/lib/invariant.js","webpack:///../node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./languages/en.js","webpack:///./languages/zh.js","webpack:///./languages/index.js","webpack:///./utils/color.js","webpack:///./covert/configs.jsx","webpack:///./covert/index.js","webpack:///./utils/content.js","webpack:///./configs/keybindings.js","webpack:///./configs/props.js","webpack:///./utils/base.js","webpack:///./utils/index.js","webpack:///./configs/handlers.js","webpack:///./helpers/extension.js","webpack:///./renderers/block/blockRenderMap.js","webpack:///./components/common/Switch/index.jsx","webpack:///./configs/controls.js","webpack:///./renderers/atomics/Image/index.jsx","webpack:///./components/common/Modal/index.jsx","webpack:///./components/business/PlayerModal/index.jsx","webpack:///./renderers/atomics/Video/index.jsx","webpack:///./renderers/atomics/Audio/index.jsx","webpack:///./renderers/atomics/Embed/index.jsx","webpack:///./renderers/atomics/Attachment/index.jsx","webpack:///./renderers/atomics/HorizontalLine/index.jsx","webpack:///./renderers/block/blockRendererFn.js","webpack:///./renderers/block/blockStyleFn.js","webpack:///./renderers/inline/inlineStyleMap.js","webpack:///./renderers/inline/inlineStyleFn.js","webpack:///./renderers/decorators/Link/index.jsx","webpack:///./renderers/decorators/index.js","webpack:///./renderers/index.js","webpack:///./helpers/responsive.js","webpack:///./components/common/DropDown/index.jsx","webpack:///./components/business/ControlGroup/index.jsx","webpack:///./components/business/LinkEditor/index.jsx","webpack:///./configs/maps.js","webpack:///./components/business/Headings/index.jsx","webpack:///./components/common/ColorPicker/index.jsx","webpack:///./components/business/TextColor/index.jsx","webpack:///./components/business/FontSize/index.jsx","webpack:///./components/business/LineHeight/index.jsx","webpack:///./components/business/FontFamily/index.jsx","webpack:///./components/business/TextAlign/index.jsx","webpack:///./components/business/EmojiPicker/index.jsx","webpack:///./components/business/LetterSpacing/index.jsx","webpack:///./components/business/TextIndent/index.jsx","webpack:///./components/business/ControlBar/index.jsx","webpack:///./editor/index.jsx","webpack:///./index.jsx","webpack:///../node_modules/draft-js/dist/Draft.css","webpack:///./assets/scss/_base.scss","webpack:///./renderers/atomics/Image/style.scss","webpack:///./components/common/Switch/style.scss","webpack:///./renderers/atomics/Video/style.scss","webpack:///./components/common/Modal/style.scss","webpack:///./components/business/PlayerModal/style.scss","webpack:///./renderers/atomics/Audio/style.scss","webpack:///./renderers/atomics/Embed/style.scss","webpack:///./renderers/atomics/Attachment/style.scss","webpack:///./renderers/atomics/HorizontalLine/style.scss","webpack:///./components/business/ControlBar/style.scss","webpack:///./components/business/LinkEditor/style.scss","webpack:///./components/common/DropDown/style.scss","webpack:///./components/business/Headings/style.scss","webpack:///./components/business/TextColor/style.scss","webpack:///./components/common/ColorPicker/style.scss","webpack:///./components/business/FontSize/style.scss","webpack:///./components/business/LineHeight/style.scss","webpack:///./components/business/FontFamily/style.scss","webpack:///./components/business/EmojiPicker/style.scss","webpack:///./components/business/LetterSpacing/style.scss"],"names":["base","remove","cancel","confirm","inert","width","height","controls","clear","undo","redo","fontSize","color","textColor","tempColors","backgroundColor","bold","lineHeight","letterSpacing","textIndent","increaseIndent","decreaseIndent","italic","underline","strikeThrough","fontFamily","textAlign","alignLeft","alignCenter","alignRight","alignJustify","floatLeft","floatRight","superScript","subScript","removeStyles","headings","header","normal","orderedList","unorderedList","blockQuote","code","link","unlink","hr","media","mediaLibirary","emoji","fullscreen","exitFullscreen","linkEditor","textInputPlaceHolder","linkInputPlaceHolder","inputWithEnterPlaceHolder","openInNewWindow","removeLink","audioPlayer","title","videoPlayer","embedTitle","image","video","audio","embed","border","en","zh","_namedColors","_getHexColor","replace","test","namedColors","indexOf","rgbArray","split","convertedColor","length","map","x","hex","parseInt","toString","join","getHexColor","detectColorsFromHTMLString","html","match","filter","detectColorsFromDraftState","draftState","result","blocks","forEach","block","inlineStyleRanges","inlineStyle","style","push","getStyleValue","defaultUnitExportFn","unit","defaultUnitImportFn","ignoredNodeAttributes","ignoredEntityNodeAttributes","spreadNodeAttributes","attributesObject","Object","keys","reduce","attributeString","attributeName","defaultFontFamilies","name","family","blockTypes","blockNames","key","convertAtomicBlock","contentState","blockNodeAttributes","contentBlock","getBlockForKey","className","class","nodeAttrAsProps","entityKey","getEntityAt","entity","getEntity","mediaType","getType","toLowerCase","data","float","alignment","getData","url","link_target","meta","imageWrapStyle","styledClassName","encodeURIComponent","JSON","stringify","display","__html","fileType","fileName","fileSize","entityToHTML","options","originalText","entityExportFn","entityType","type","customOutput","nodeAttributes","href","target","styleToHTML","unitExportFn","styleExportFn","textDecoration","fontFamilies","find","item","blockToHTML","blockExportFn","blockStyle","blockType","isNaN","previousBlock","getBlockBefore","nextBlock","getBlockAfter","previousBlockType","nextBlockType","start","end","nest","htmlToStyle","source","nodeName","node","currentStyle","unitImportFn","newStyle","call","add","toUpperCase","parseFloat","styleImportFn","htmlToEntity","createEntity","entityImportFn","customInput","alt","id","autoplay","loop","poster","autoPlay","attributes","attr","value","querySelectorAll","getAttribute","parentNode","entityData","classList","contains","parse","decodeURIComponent","e","console","error","embedContent","innerHTML","outerHTML","htmlToBlock","blockImportFn","nodeStyle","blockData","Math","ceil","getToHTMLConfig","getFromHTMLConfig","defaultConvertOptions","convertRawToHTML","rawContent","convertFromRaw","convertToHTML","warn","convertHTMLToRaw","HTMLString","convertFromHTML","convertToRaw","convertEditorStateToHTML","editorState","getCurrentContent","convertHTMLToEditorState","editorDecorators","EditorState","createWithContent","createEmpty","convertEditorStateToRaw","convertRawToEditorState","strictBlockTypes","registerStrictBlockType","isEditorState","createEmptyEditorState","createEditorState","isSelectionCollapsed","getSelection","isCollapsed","selectionContainsBlockType","getSelectedBlocks","selectionContainsStrictBlock","selectBlock","blockKey","getKey","forceSelection","SelectionState","anchorKey","anchorOffset","focusKey","focusOffset","getLength","selectNextBlock","removeBlock","lastSelection","nextContentState","nextEditorState","Modifier","removeRange","setBlockType","getSelectionAfter","getSelectionBlock","getAnchorKey","updateEachCharacterOfSelection","callback","selectionState","contentBlocks","getBlockMap","selectedBlocks","startKey","getStartKey","startOffset","getStartOffset","endKey","getEndKey","endOffset","getEndOffset","nextContentBlocks","charactersList","getCharacterList","nextCharactersList","character","index","merge","blockMap","selectionBefore","selectionAfter","isSameBlock","startingBlock","setSelectionBlockData","override","newBlockData","assign","getSelectionBlockData","toJS","hasOwnProperty","undefined","setBlockData","get","getSelectionBlockType","getSelectionText","currentContentBlock","getText","slice","toggleSelectionBlockType","RichUtils","toggleBlockType","getSelectionEntityType","getSelectionEntity","getSelectionEntityData","toggleSelectionEntity","applyEntity","mutability","getLastCreatedEntityKey","set","currentContent","toggleSelectionLink","toggleLink","insertText","getSelectionInlineStyle","getCurrentInlineStyle","selectionHasInlineStyle","has","toggleSelectionInlineStyle","prefix","characterMetadata","characterStyle","CharacterMetadata","removeStyle","toggleInlineStyle","removeSelectionInlineStyles","Immutable","OrderedSet","toggleSelectionAlignment","toggleSelectionIndent","maxIndent","increaseSelectionIndent","currentIndent","decreaseSelectionIndent","toggleSelectionColor","toggleSelectionBackgroundColor","toggleSelectionFontSize","toggleSelectionLineHeight","toggleSelectionFontFamily","toggleSelectionLetterSpacing","text","currentSelectedBlockType","replaceText","insertHTML","htmlString","convertOptions","replaceWithFragment","insertAtomicBlock","immutable","contentStateWithEntity","newEditorState","AtomicBlockUtils","insertHorizontalLine","insertMedias","medias","setMediaData","mergeEntityData","removeMedia","mediaBlock","setMediaPosition","position","newPosition","firstBlock","getFirstBlock","lastBlock","getLastBlock","allSelected","hasFocus","handleKeyCommand","command","customKeyBindingFn","event","keyCode","KeyBindingUtil","hasCommandModifier","isCtrlKeyCommand","getDefaultKeyBinding","language","excludeControls","extendControls","extendAtomics","componentBelowControlBar","pasteImage","imagePasteLimit","uploadFn","validateFn","onBeforeDeselect","onDeselect","onBeforeSelect","onSelect","onBeforeRemove","onRemove","onCancel","onFileSelect","onBeforeInsert","onInsert","onChange","accepts","externals","imageControls","imageResizable","colors","colorPicker","colorPickerTheme","colorPickerAutoHide","codeTabIndents","textAligns","textBackgroundColor","allowInsertLinkText","defaultLinkTarget","letterSpacings","lineHeights","fontSizes","converts","emojis","stripPastedStyles","triggerChangeOnMount","controlBarClassName","controlBarStyle","contentClassName","contentStyle","draftProps","hooks","onFocus","onBlur","onTab","onDelete","onSave","fixPlaceholder","braftUniqueIndex","UniqueIndex","keyCommandHandlers","editor","editorProps","allowIndent","cursorStart","cursorEnd","cursorIsAtFirst","ContentUtils","setValue","repeat","returnHandlers","handleReturn","currentBlock","currentBlockType","which","getModifierState","insertSoftNewline","handleNewLine","beforeInputHandlers","chars","handleBeforeInput","compositionStartHandler","_","state","dropHandlers","dataTransfer","readOnly","disabled","window","__BRAFT_DRAGING__IMAGE__","mediaData","lockOrUnlockEditor","handleFiles","files","constructor","defaultProps","file","braftFinder","validateResult","Promise","then","uploadImage","isLiving","droppedFilesHandlers","handleDroppedFiles","pastedFilesHandlers","handlePastedFiles","copyHandlers","getFragmentFromSelection","toArray","tempContentState","ContentState","createFromBlockArray","tempEditorState","clipboardData","originalEvent","setConvertOptions","setData","toHTML","toText","preventDefault","pastedTextHandlers","handlePastedText","ColorUtils","setState","array","extensionControls","extensionDecorators","propInterceptors","extensionBlockRenderMaps","extensionBlockRendererFns","extensionInlineStyleMaps","extensionInlineStyleFns","extensionEntities","inlineStyleImporters","inlineStyleExporters","blockImporters","blockExporters","filterByEditorId","items","editorId","includeEditors","excludeEditors","getPropInterceptors","getExtensionControls","getExtensionDecorators","getExtensionBlockRenderMaps","getExtensionBlockRendererFns","getExtensionInlineStyleMap","inlineStyleMap","inlineStyleName","styleMap","getExtensionInlineStyleFns","compositeStyleImportFn","styleImporter","importer","compositeStyleExportFn","exporter","compositeEntityImportFn","entityItem","matched","compositeEntityExportFn","compositeBlockImportFn","blockImporter","compositeBlockExportFn","blockExporter","useExtension","extension","Array","control","styleFn","decorator","component","renderMap","rendererFn","strategy","getDecorations","interceptor","createExtensibleEditor","BraftEditor","use","props","blockRenderMap","customBlockRenderMap","Map","element","wrapper","DefaultDraftBlockRenderMap","active","onClick","lang","isFullscreen","imageControlItems","Image","toolbarVisible","toolbarOffset","linkEditorVisible","sizeEditorVisible","tempLink","tempWidth","tempHeight","reSizeType","initialLeft","screenX","initialTop","screenY","initialHeight","initialWidth","changeSize","abs","confirmImageSize","document","removeEventListener","moveImage","upImage","imageRect","imageElement","getBoundingClientRect","addEventListener","stopPropagation","unlockEditor","method","param","getValue","confirmImageLink","currentTarget","hookReturns","setImmediate","forceRender","newImageSize","lockEditor","calcToolbarOffset","imageStyles","clearFix","renderedControlItems","executeCommand","render","showToolbar","hideToolbar","handleDragStart","handleDragEnd","instance","mediaEmbederInstance","marginLeft","toolbarElement","handleLinkInputKeyDown","setImageLink","setImageLinkTarget","handleSizeInputKeyDown","setImageWidth","setImageHeight","repareChangeSize","getContainerNode","containerNode","container","viewRect","querySelector","toolbarRect","right","left","React","Component","Modal","rootElement","ReactDOM","unmountComponentAtNode","removeChild","tagName","closeOnCancel","close","closeOnConfirm","onConfirm","closeOnBlur","onBlue","unrenderComponent","onClose","componentId","BaseUtils","visible","renderComponent","next","activeId","clearImmediate","children","confirmable","showFooter","showCancel","showConfirm","showClose","cancelText","confirmText","bottomText","childComponent","handleMouseDown","handleMaskClick","handleTransitionEnd","handleCancel","handleConfirm","createElement","body","appendChild","showModal","hostNode","modalInstance","destroy","update","playViaModal","typeIconsMap","backgroundImage","Video","removeVideo","Audio","removeAudio","Embed","removeEmbed","Attachment","removeAttachment","HorizontalLine","removeHorizontalLine","BlockRenderFnContext","superProps","customBlockRendererFn","blockRendererFn","mediaProps","atomics","i","blockRenderer","RegExp","renderAtomicBlock","editable","blockRenderFnContext","getRenderFn","customBlockStyleFn","blockAlignment","blockIndent","blockFloat","customStyleMap","extensionInlineStyleMap","top","bottom","styles","output","customStyleFn","viewLink","click","KEY_SEPARATOR","CombineDecorators","prototype","decorations","fill","decorators","offset","List","builtinDecorators","Link","createStrategy","findEntityRanges","entityDecorators","strategyDecorators","classDecorators","CompositeDecorator","getBlockRenderMap","_getBlockRenderMap","getBlockRendererFn","_getBlockRendererFn","getBlockStyleFn","_getBlockStyleFn","getCustomStyleMap","_getCustomStyleMap","getCustomStyleFn","_getCustomStyleFn","getDecorators","_getDecorators","resizeEventHandlers","responsiveHelperInited","debounce","resolve","eventHandler","unresolve","clearTimeout","setTimeout","DropDown","handlerRect","dropDownHandlerElement","contentRect","dropDownContentElement","autoHide","hide","registerClickEvent","responsiveResolveId","ResponsiveHelper","fixDropDownPosition","prevState","caption","htmlCaption","showArrow","arrowActive","theme","toggle","Fragment","LinkEditor","dropDownInstance","textSelected","requestFocus","nextProps","selectedText","handeKeyDown","handleTnputText","handleInputLink","setTarget","handleUnlink","getHeadings","currentHeadingIndex","findIndex","current","isActive","presetColors","dataset","TextColor","colorType","closePicker","captionStyle","currentColor","selectionStyles","ColorPicker","BuiltinColorPicker","enableBackgroundColor","switchColorType","toggleColor","toggleFontSize","size","currentFontSize","defaultCaption","toggleLineHeight","currentLineHeight","toggleFontFamily","fontFamilyName","currentIndex","TextAlign","currentAlignment","textAlignmentTitles","setAlignment","insertEmoji","toggleLetterSpacing","currentLetterSpacing","commandHookMap","exclusiveInlineStyles","mergeControls","commonProps","builtControls","subItem","concat","ControlBar","ReactComponent","MediaLibrary","mediaLibiraryModal","closeBraftFinder","bindBraftFinderHook","hookName","allControls","modal","extendedModals","exclusiveInlineStyle","renderedControls","editorControls","getEditorControls","itemKey","controlItem","applyControl","openBraftFinder","ref","onCreate","getUndoStack","getRedoStack","getControlItemClassName","buildHooks","defaultReturns","filterColors","colors2","isControlEnabled","controlName","getConvertOptions","draftInstance","isFocused","focus","onFullscreen","getEditorProps","valueInitialized","defaultValue","defaultEditorState","toRAW","restProps","porpsMap","BraftFinder","uploader","validator","forceUpdate","currentProps","setItems","controlBarInstance","editorLocked","placeholder","languages","externalMedias","controlBarProps","blockStyleFn","keyBindingFn","getKeyBindingFn","mixedProps","isEmpty","handleDrop","setEditorContainerNode","handleCompositionStart","handleCopyContent","noStringify","getPlainText","hasText","createFrom","content","entityMap","toLocaleString"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;AClFA,gD;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wC;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,iC;;;;;;ACfA,gD;;;;;;ACAA,qBAAqB,mBAAO,CAAC,CAAkB;;AAE/C;AACA,iBAAiB,sBAAsB;AACvC;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA,+B;;;;;;ACrBA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;ACNA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;AChBA,cAAc,mBAAO,CAAC,EAAmB;;AAEzC,4BAA4B,mBAAO,CAAC,CAAyB;;AAE7D;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4C;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;ACPA,qBAAqB,mBAAO,CAAC,EAAkB;;AAE/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,2B;;;;;;ACjBA;AACA;AACA,mBAAmB,sBAAsB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,0B;;;;;;AClBA,iD;;;;;;ACAA,wBAAwB,mBAAO,CAAC,EAAqB;;AAErD,sBAAsB,mBAAO,CAAC,EAAmB;;AAEjD,wBAAwB,mBAAO,CAAC,EAAqB;;AAErD;AACA;AACA;;AAEA,oC;;;;;;ACVA,iD;;;;;;ACAA,wBAAwB,2EAA2E,oCAAoC,mBAAmB,GAAG,EAAE,OAAO,oCAAoC,8HAA8H,GAAG,EAAE,sBAAsB;;AAEnW;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yB;;;;;;AChBA,mCAAmC,mBAAO,CAAC,EAAgC;;AAE3E;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,0C;;;;;;ACrBA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,gBAAgB,mBAAO,CAAC,EAAW;;AAEnC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e,eAAe,mBAAO,CAAC,EAAW;AAClC;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;;AAEA;;AAEA,mC;;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,qC;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,8BAA8B,mBAAO,CAAC,EAA2B;;AAEjE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,0C;;;;;;AC3BA,qBAAqB,mBAAO,CAAC,EAAkB;;AAE/C,2BAA2B,mBAAO,CAAC,EAAwB;;AAE3D,sBAAsB,mBAAO,CAAC,EAAmB;;AAEjD;AACA;AACA;;AAEA,gC;;;;;;ACVA;AACA;AACA;AACA;AACA;;AAEA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+C;;;;;;ACfA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iC;;;;;;ACTA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;;AAEA;AACA;AACA;;AAEA,oC;;;;;;ACVA;AACA;AACA;;AAEA,kC;;;;;;ACJA;AACA;AACA;;AAEA,oC;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,4BAA4B,mBAAO,CAAC,EAAyB;AAC7D,4BAA4B,mBAAO,CAAC,EAAyB;;AAE7D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,GAAG;AACH;;AAEA,yC;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,uBAAuB,mBAAO,CAAC,EAAoB;AACnD,gBAAgB,mBAAO,CAAC,EAAW;;AAEnC,wBAAwB,mBAAO,CAAC,EAAqB;;AAErD;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,uC;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e,wBAAwB,mBAAO,CAAC,EAAqB;AACrD,gBAAgB,mBAAO,CAAC,EAAW;;AAEnC,0BAA0B,mBAAO,CAAC,EAAuB;;AAEzD;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;;AAED,kC;;;;;;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mC;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,wBAAwB,mBAAO,CAAC,EAAqB;;AAErD,0BAA0B,mBAAO,CAAC,EAAuB;AACzD,gBAAgB,mBAAO,CAAC,EAAoB;;AAE5C;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,sBAAsB;AACtB;AACA,GAAG;AACH,wCAAwC,M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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"draft-js\"), require(\"immutable\"), require(\"draftjs-utils\"), require(\"draft-convert\"), require(\"react-dom\"), require(\"braft-finder\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"draft-js\", \"immutable\", \"draftjs-utils\", \"draft-convert\", \"react-dom\", \"braft-finder\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"react\"), require(\"draft-js\"), require(\"immutable\"), require(\"draftjs-utils\"), require(\"draft-convert\"), require(\"react-dom\"), require(\"braft-finder\")) : factory(root[\"react\"], root[\"draft-js\"], root[\"immutable\"], root[\"draftjs-utils\"], root[\"draft-convert\"], root[\"react-dom\"], root[\"braft-finder\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__13__, __WEBPACK_EXTERNAL_MODULE__16__, __WEBPACK_EXTERNAL_MODULE__17__, __WEBPACK_EXTERNAL_MODULE__18__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 38);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","module.exports = __WEBPACK_EXTERNAL_MODULE__16__;","module.exports = __WEBPACK_EXTERNAL_MODULE__17__;","module.exports = __WEBPACK_EXTERNAL_MODULE__18__;","var Immutable = require('immutable');\n\nvar KEY_SEPARATOR = '-';\n\nfunction MultiDecorator(decorators) {\n    this.decorators = Immutable.List(decorators);\n}\n\n/**\n    Return list of decoration IDs per character\n\n    @param {ContentBlock}\n    @return {List<String>}\n*/\nMultiDecorator.prototype.getDecorations = function(block) {\n    var decorations = Array(block.getText().length).fill(null);\n\n    this.decorators.forEach(function(decorator, i) {\n        var _decorations = decorator.getDecorations(block);\n\n        _decorations.forEach(function(key, offset) {\n            if (!key) {\n                return;\n            }\n\n            key = i + KEY_SEPARATOR + key;\n\n            decorations[offset] = key;\n        });\n    });\n\n    return Immutable.List(decorations);\n};\n\n/**\n    Return component to render a decoration\n\n    @param {String}\n    @return {Function}\n*/\nMultiDecorator.prototype.getComponentForKey = function(key) {\n    var decorator = this.getDecoratorForKey(key);\n    return decorator.getComponentForKey(\n        this.getInnerKey(key)\n    );\n};\n\n/**\n    Return props to render a decoration\n\n    @param {String}\n    @return {Object}\n*/\nMultiDecorator.prototype.getPropsForKey = function(key) {\n    var decorator = this.getDecoratorForKey(key);\n    return decorator.getPropsForKey(\n        this.getInnerKey(key)\n    );\n};\n\n/**\n    Return a decorator for a specific key\n\n    @param {String}\n    @return {Decorator}\n*/\nMultiDecorator.prototype.getDecoratorForKey = function(key) {\n    var parts = key.split(KEY_SEPARATOR);\n    var index = Number(parts[0]);\n\n    return this.decorators.get(index);\n};\n\n/**\n    Return inner key for a decorator\n\n    @param {String}\n    @return {String}\n*/\nMultiDecorator.prototype.getInnerKey = function(key) {\n    var parts = key.split(KEY_SEPARATOR);\n    return parts.slice(1).join(KEY_SEPARATOR);\n};\n\nmodule.exports = MultiDecorator;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule CharacterMetadata\n * @format\n * \n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = require('immutable'),\n    Map = _require.Map,\n    OrderedSet = _require.OrderedSet,\n    Record = _require.Record;\n\n// Immutable.map is typed such that the value for every key in the map\n// must be the same type\n\n\nvar EMPTY_SET = OrderedSet();\n\nvar defaultRecord = {\n  style: EMPTY_SET,\n  entity: null\n};\n\nvar CharacterMetadataRecord = Record(defaultRecord);\n\nvar CharacterMetadata = function (_CharacterMetadataRec) {\n  _inherits(CharacterMetadata, _CharacterMetadataRec);\n\n  function CharacterMetadata() {\n    _classCallCheck(this, CharacterMetadata);\n\n    return _possibleConstructorReturn(this, _CharacterMetadataRec.apply(this, arguments));\n  }\n\n  CharacterMetadata.prototype.getStyle = function getStyle() {\n    return this.get('style');\n  };\n\n  CharacterMetadata.prototype.getEntity = function getEntity() {\n    return this.get('entity');\n  };\n\n  CharacterMetadata.prototype.hasStyle = function hasStyle(style) {\n    return this.getStyle().includes(style);\n  };\n\n  CharacterMetadata.applyStyle = function applyStyle(record, style) {\n    var withStyle = record.set('style', record.getStyle().add(style));\n    return CharacterMetadata.create(withStyle);\n  };\n\n  CharacterMetadata.removeStyle = function removeStyle(record, style) {\n    var withoutStyle = record.set('style', record.getStyle().remove(style));\n    return CharacterMetadata.create(withoutStyle);\n  };\n\n  CharacterMetadata.applyEntity = function applyEntity(record, entityKey) {\n    var withEntity = record.getEntity() === entityKey ? record : record.set('entity', entityKey);\n    return CharacterMetadata.create(withEntity);\n  };\n\n  /**\n   * Use this function instead of the `CharacterMetadata` constructor.\n   * Since most content generally uses only a very small number of\n   * style/entity permutations, we can reuse these objects as often as\n   * possible.\n   */\n\n\n  CharacterMetadata.create = function create(config) {\n    if (!config) {\n      return EMPTY;\n    }\n\n    var defaultConfig = {\n      style: EMPTY_SET,\n      entity: null\n    };\n\n    // Fill in unspecified properties, if necessary.\n    var configMap = Map(defaultConfig).merge(config);\n\n    var existing = pool.get(configMap);\n    if (existing) {\n      return existing;\n    }\n\n    var newCharacter = new CharacterMetadata(configMap);\n    pool = pool.set(configMap, newCharacter);\n    return newCharacter;\n  };\n\n  return CharacterMetadata;\n}(CharacterMetadataRecord);\n\nvar EMPTY = new CharacterMetadata();\nvar pool = Map([[Map(defaultRecord), EMPTY]]);\n\nCharacterMetadata.EMPTY = EMPTY;\n\nmodule.exports = CharacterMetadata;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule findRangesImmutable\n * @format\n * \n */\n\n'use strict';\n\n/**\n * Search through an array to find contiguous stretches of elements that\n * match a specified filter function.\n *\n * When ranges are found, execute a specified `found` function to supply\n * the values to the caller.\n */\nfunction findRangesImmutable(haystack, areEqualFn, filterFn, foundFn) {\n  if (!haystack.size) {\n    return;\n  }\n\n  var cursor = 0;\n\n  haystack.reduce(function (value, nextValue, nextIndex) {\n    if (!areEqualFn(value, nextValue)) {\n      if (filterFn(value)) {\n        foundFn(cursor, nextIndex);\n      }\n      cursor = nextIndex;\n    }\n    return nextValue;\n  });\n\n  filterFn(haystack.last()) && foundFn(cursor, haystack.count());\n}\n\nmodule.exports = findRangesImmutable;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule getFragmentFromSelection\n * @format\n * \n */\n\n'use strict';\n\nvar getContentStateFragment = require('./getContentStateFragment');\n\nfunction getFragmentFromSelection(editorState) {\n  var selectionState = editorState.getSelection();\n\n  if (selectionState.isCollapsed()) {\n    return null;\n  }\n\n  return getContentStateFragment(editorState.getCurrentContent(), selectionState);\n}\n\nmodule.exports = getFragmentFromSelection;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule getContentStateFragment\n * @format\n * \n */\n\n'use strict';\n\nvar randomizeBlockMapKeys = require('./randomizeBlockMapKeys');\nvar removeEntitiesAtEdges = require('./removeEntitiesAtEdges');\n\nvar getContentStateFragment = function getContentStateFragment(contentState, selectionState) {\n  var startKey = selectionState.getStartKey();\n  var startOffset = selectionState.getStartOffset();\n  var endKey = selectionState.getEndKey();\n  var endOffset = selectionState.getEndOffset();\n\n  // Edge entities should be stripped to ensure that we don't preserve\n  // invalid partial entities when the fragment is reused. We do, however,\n  // preserve entities that are entirely within the selection range.\n  var contentWithoutEdgeEntities = removeEntitiesAtEdges(contentState, selectionState);\n\n  var blockMap = contentWithoutEdgeEntities.getBlockMap();\n  var blockKeys = blockMap.keySeq();\n  var startIndex = blockKeys.indexOf(startKey);\n  var endIndex = blockKeys.indexOf(endKey) + 1;\n\n  return randomizeBlockMapKeys(blockMap.slice(startIndex, endIndex).map(function (block, blockKey) {\n    var text = block.getText();\n    var chars = block.getCharacterList();\n\n    if (startKey === endKey) {\n      return block.merge({\n        text: text.slice(startOffset, endOffset),\n        characterList: chars.slice(startOffset, endOffset)\n      });\n    }\n\n    if (blockKey === startKey) {\n      return block.merge({\n        text: text.slice(startOffset),\n        characterList: chars.slice(startOffset)\n      });\n    }\n\n    if (blockKey === endKey) {\n      return block.merge({\n        text: text.slice(0, endOffset),\n        characterList: chars.slice(0, endOffset)\n      });\n    }\n\n    return block;\n  }));\n};\n\nmodule.exports = getContentStateFragment;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule randomizeBlockMapKeys\n * @format\n * \n */\n\n'use strict';\n\nvar ContentBlockNode = require('./ContentBlockNode');\nvar Immutable = require('immutable');\n\nvar generateRandomKey = require('./generateRandomKey');\n\nvar OrderedMap = Immutable.OrderedMap;\n\n\nvar randomizeContentBlockNodeKeys = function randomizeContentBlockNodeKeys(blockMap) {\n  var newKeysRef = {};\n\n  // we keep track of root blocks in order to update subsequent sibling links\n  var lastRootBlock = void 0;\n\n  return OrderedMap(blockMap.withMutations(function (blockMapState) {\n    blockMapState.forEach(function (block, index) {\n      var oldKey = block.getKey();\n      var nextKey = block.getNextSiblingKey();\n      var prevKey = block.getPrevSiblingKey();\n      var childrenKeys = block.getChildKeys();\n      var parentKey = block.getParentKey();\n\n      // new key that we will use to build linking\n      var key = generateRandomKey();\n\n      // we will add it here to re-use it later\n      newKeysRef[oldKey] = key;\n\n      if (nextKey) {\n        var nextBlock = blockMapState.get(nextKey);\n        if (nextBlock) {\n          blockMapState.setIn([nextKey, 'prevSibling'], key);\n        } else {\n          // this can happen when generating random keys for fragments\n          blockMapState.setIn([oldKey, 'nextSibling'], null);\n        }\n      }\n\n      if (prevKey) {\n        var prevBlock = blockMapState.get(prevKey);\n        if (prevBlock) {\n          blockMapState.setIn([prevKey, 'nextSibling'], key);\n        } else {\n          // this can happen when generating random keys for fragments\n          blockMapState.setIn([oldKey, 'prevSibling'], null);\n        }\n      }\n\n      if (parentKey && blockMapState.get(parentKey)) {\n        var parentBlock = blockMapState.get(parentKey);\n        var parentChildrenList = parentBlock.getChildKeys();\n        blockMapState.setIn([parentKey, 'children'], parentChildrenList.set(parentChildrenList.indexOf(block.getKey()), key));\n      } else {\n        // blocks will then be treated as root block nodes\n        blockMapState.setIn([oldKey, 'parent'], null);\n\n        if (lastRootBlock) {\n          blockMapState.setIn([lastRootBlock.getKey(), 'nextSibling'], key);\n          blockMapState.setIn([oldKey, 'prevSibling'], newKeysRef[lastRootBlock.getKey()]);\n        }\n\n        lastRootBlock = blockMapState.get(oldKey);\n      }\n\n      childrenKeys.forEach(function (childKey) {\n        var childBlock = blockMapState.get(childKey);\n        if (childBlock) {\n          blockMapState.setIn([childKey, 'parent'], key);\n        } else {\n          blockMapState.setIn([oldKey, 'children'], block.getChildKeys().filter(function (child) {\n            return child !== childKey;\n          }));\n        }\n      });\n    });\n  }).toArray().map(function (block) {\n    return [newKeysRef[block.getKey()], block.set('key', newKeysRef[block.getKey()])];\n  }));\n};\n\nvar randomizeContentBlockKeys = function randomizeContentBlockKeys(blockMap) {\n  return OrderedMap(blockMap.toArray().map(function (block) {\n    var key = generateRandomKey();\n    return [key, block.set('key', key)];\n  }));\n};\n\nvar randomizeBlockMapKeys = function randomizeBlockMapKeys(blockMap) {\n  var isTreeBasedBlockMap = blockMap.first() instanceof ContentBlockNode;\n\n  if (!isTreeBasedBlockMap) {\n    return randomizeContentBlockKeys(blockMap);\n  }\n\n  return randomizeContentBlockNodeKeys(blockMap);\n};\n\nmodule.exports = randomizeBlockMapKeys;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ContentBlockNode\n * @format\n * \n *\n * This file is a fork of ContentBlock adding support for nesting references by\n * providing links to children, parent, prevSibling, and nextSibling.\n *\n * This is unstable and not part of the public API and should not be used by\n * production systems. This file may be update/removed without notice.\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CharacterMetadata = require('./CharacterMetadata');\nvar Immutable = require('immutable');\n\nvar findRangesImmutable = require('./findRangesImmutable');\n\nvar List = Immutable.List,\n    Map = Immutable.Map,\n    OrderedSet = Immutable.OrderedSet,\n    Record = Immutable.Record,\n    Repeat = Immutable.Repeat;\n\n\nvar EMPTY_SET = OrderedSet();\n\nvar defaultRecord = {\n  parent: null,\n  characterList: List(),\n  data: Map(),\n  depth: 0,\n  key: '',\n  text: '',\n  type: 'unstyled',\n  children: List(),\n  prevSibling: null,\n  nextSibling: null\n};\n\nvar haveEqualStyle = function haveEqualStyle(charA, charB) {\n  return charA.getStyle() === charB.getStyle();\n};\n\nvar haveEqualEntity = function haveEqualEntity(charA, charB) {\n  return charA.getEntity() === charB.getEntity();\n};\n\nvar decorateCharacterList = function decorateCharacterList(config) {\n  if (!config) {\n    return config;\n  }\n\n  var characterList = config.characterList,\n      text = config.text;\n\n\n  if (text && !characterList) {\n    config.characterList = List(Repeat(CharacterMetadata.EMPTY, text.length));\n  }\n\n  return config;\n};\n\nvar ContentBlockNode = function (_Record) {\n  _inherits(ContentBlockNode, _Record);\n\n  function ContentBlockNode() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultRecord;\n\n    _classCallCheck(this, ContentBlockNode);\n\n    return _possibleConstructorReturn(this, _Record.call(this, decorateCharacterList(props)));\n  }\n\n  ContentBlockNode.prototype.getKey = function getKey() {\n    return this.get('key');\n  };\n\n  ContentBlockNode.prototype.getType = function getType() {\n    return this.get('type');\n  };\n\n  ContentBlockNode.prototype.getText = function getText() {\n    return this.get('text');\n  };\n\n  ContentBlockNode.prototype.getCharacterList = function getCharacterList() {\n    return this.get('characterList');\n  };\n\n  ContentBlockNode.prototype.getLength = function getLength() {\n    return this.getText().length;\n  };\n\n  ContentBlockNode.prototype.getDepth = function getDepth() {\n    return this.get('depth');\n  };\n\n  ContentBlockNode.prototype.getData = function getData() {\n    return this.get('data');\n  };\n\n  ContentBlockNode.prototype.getInlineStyleAt = function getInlineStyleAt(offset) {\n    var character = this.getCharacterList().get(offset);\n    return character ? character.getStyle() : EMPTY_SET;\n  };\n\n  ContentBlockNode.prototype.getEntityAt = function getEntityAt(offset) {\n    var character = this.getCharacterList().get(offset);\n    return character ? character.getEntity() : null;\n  };\n\n  ContentBlockNode.prototype.getChildKeys = function getChildKeys() {\n    return this.get('children');\n  };\n\n  ContentBlockNode.prototype.getParentKey = function getParentKey() {\n    return this.get('parent');\n  };\n\n  ContentBlockNode.prototype.getPrevSiblingKey = function getPrevSiblingKey() {\n    return this.get('prevSibling');\n  };\n\n  ContentBlockNode.prototype.getNextSiblingKey = function getNextSiblingKey() {\n    return this.get('nextSibling');\n  };\n\n  ContentBlockNode.prototype.findStyleRanges = function findStyleRanges(filterFn, callback) {\n    findRangesImmutable(this.getCharacterList(), haveEqualStyle, filterFn, callback);\n  };\n\n  ContentBlockNode.prototype.findEntityRanges = function findEntityRanges(filterFn, callback) {\n    findRangesImmutable(this.getCharacterList(), haveEqualEntity, filterFn, callback);\n  };\n\n  return ContentBlockNode;\n}(Record(defaultRecord));\n\nmodule.exports = ContentBlockNode;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule generateRandomKey\n * @format\n * \n */\n\n'use strict';\n\nvar seenKeys = {};\nvar MULTIPLIER = Math.pow(2, 24);\n\nfunction generateRandomKey() {\n  var key = void 0;\n  while (key === undefined || seenKeys.hasOwnProperty(key) || !isNaN(+key)) {\n    key = Math.floor(Math.random() * MULTIPLIER).toString(32);\n  }\n  seenKeys[key] = true;\n  return key;\n}\n\nmodule.exports = generateRandomKey;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule removeEntitiesAtEdges\n * @format\n * \n */\n\n'use strict';\n\nvar CharacterMetadata = require('./CharacterMetadata');\n\nvar findRangesImmutable = require('./findRangesImmutable');\nvar invariant = require('fbjs/lib/invariant');\n\nfunction removeEntitiesAtEdges(contentState, selectionState) {\n  var blockMap = contentState.getBlockMap();\n  var entityMap = contentState.getEntityMap();\n\n  var updatedBlocks = {};\n\n  var startKey = selectionState.getStartKey();\n  var startOffset = selectionState.getStartOffset();\n  var startBlock = blockMap.get(startKey);\n  var updatedStart = removeForBlock(entityMap, startBlock, startOffset);\n\n  if (updatedStart !== startBlock) {\n    updatedBlocks[startKey] = updatedStart;\n  }\n\n  var endKey = selectionState.getEndKey();\n  var endOffset = selectionState.getEndOffset();\n  var endBlock = blockMap.get(endKey);\n  if (startKey === endKey) {\n    endBlock = updatedStart;\n  }\n\n  var updatedEnd = removeForBlock(entityMap, endBlock, endOffset);\n\n  if (updatedEnd !== endBlock) {\n    updatedBlocks[endKey] = updatedEnd;\n  }\n\n  if (!Object.keys(updatedBlocks).length) {\n    return contentState.set('selectionAfter', selectionState);\n  }\n\n  return contentState.merge({\n    blockMap: blockMap.merge(updatedBlocks),\n    selectionAfter: selectionState\n  });\n}\n\nfunction getRemovalRange(characters, key, offset) {\n  var removalRange;\n  findRangesImmutable(characters, function (a, b) {\n    return a.getEntity() === b.getEntity();\n  }, function (element) {\n    return element.getEntity() === key;\n  }, function (start, end) {\n    if (start <= offset && end >= offset) {\n      removalRange = { start: start, end: end };\n    }\n  });\n  !(typeof removalRange === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Removal range must exist within character list.') : invariant(false) : void 0;\n  return removalRange;\n}\n\nfunction removeForBlock(entityMap, block, offset) {\n  var chars = block.getCharacterList();\n  var charBefore = offset > 0 ? chars.get(offset - 1) : undefined;\n  var charAfter = offset < chars.count() ? chars.get(offset) : undefined;\n  var entityBeforeCursor = charBefore ? charBefore.getEntity() : undefined;\n  var entityAfterCursor = charAfter ? charAfter.getEntity() : undefined;\n\n  if (entityAfterCursor && entityAfterCursor === entityBeforeCursor) {\n    var entity = entityMap.__get(entityAfterCursor);\n    if (entity.getMutability() !== 'MUTABLE') {\n      var _getRemovalRange = getRemovalRange(chars, entityAfterCursor, offset),\n          start = _getRemovalRange.start,\n          end = _getRemovalRange.end;\n\n      var current;\n      while (start < end) {\n        current = chars.get(start);\n        chars = chars.set(start, CharacterMetadata.applyEntity(current, null));\n        start++;\n      }\n      return block.set('characterList', chars);\n    }\n  }\n\n  return block;\n}\n\nmodule.exports = removeEntitiesAtEdges;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","export default {\n  base: {\n    remove: 'Remove',\n    cancel: 'Cancel',\n    confirm: 'Confirm',\n    inert: 'Insert',\n    width: 'Width',\n    height: 'Height'\n  },\n  controls: {\n    clear: 'Clear',\n    undo: 'Undo',\n    redo: 'Redo',\n    fontSize: 'Font Size',\n    color: 'Color',\n    textColor: 'Text',\n    tempColors: 'Temp Colors',\n    backgroundColor: 'Background',\n    bold: 'Bold',\n    lineHeight:'Line Height',\n    letterSpacing:'Letter Spacing',\n    textIndent:'Text Indent',\n    increaseIndent: 'Increase Indent',\n    decreaseIndent: 'Decrease Indent',\n    italic: 'Italic',\n    underline: 'Underline',\n    strikeThrough: 'Strike Through',\n    fontFamily: 'Font Family',\n    textAlign: 'Text Alignment',\n    alignLeft: 'Left Alignment',\n    alignCenter: 'Center Alignment',\n    alignRight: 'Right Alignment',\n    alignJustify: 'Justify Alignment',\n    floatLeft: 'Left Float',\n    floatRight: 'Right Float',\n    superScript: 'Super Script',\n    subScript: 'Sub Script',\n    removeStyles: 'Remove Styles',\n    headings: 'Headings',\n    header: 'Header',\n    normal: 'Normal',\n    orderedList: 'Ordered List',\n    unorderedList: 'Unordered List',\n    blockQuote: 'Quote',\n    code: 'Code',\n    link: 'Link',\n    unlink: 'Unlink',\n    hr: 'Horizontal Line',\n    media: 'Media',\n    mediaLibirary: 'Media Library',\n    emoji: 'Emoji',\n    fullscreen: 'Fullscreen',\n    exitFullscreen: 'Exit Fullscreen',\n  },\n  linkEditor: {\n    textInputPlaceHolder: 'Input link text',\n    linkInputPlaceHolder: 'Input link URL',\n    inputWithEnterPlaceHolder: 'Input link URL and press Enter',\n    openInNewWindow: 'Open in new window',\n    removeLink: 'Remove Link'\n  },\n  audioPlayer: {\n    title: 'Play Audio'\n  },\n  videoPlayer: {\n    title: 'Play Video',\n    embedTitle: 'Embed Media'\n  },\n  media: {\n    image: 'Image',\n    video: 'Video',\n    audio: 'Audio',\n    embed: 'Embed'\n  }\n}","export default {\n  base: {\n    remove: '删除',\n    cancel: '取消',\n    confirm: '确定',\n    inert: '插入',\n    width: '宽度',\n    height: '高度'\n  },\n  controls: {\n    clear: '清除内容',\n    undo: '撤销',\n    redo: '重做',\n    fontSize: '字号',\n    lineHeight: '行高',\n    letterSpacing: '字间距',\n    textIndent: '段落缩进',\n    increaseIndent: '增加缩进',\n    decreaseIndent: '减少缩进',\n    border: '边框',\n    color: '颜色',\n    textColor: '文字颜色',\n    backgroundColor: '背景颜色',\n    tempColors: '临时颜色',\n    bold: '加粗',\n    italic: '斜体',\n    underline: '下划线',\n    strikeThrough: '删除线',\n    fontFamily: '字体',\n    textAlign: '文本对齐',\n    alignLeft: '居左',\n    alignCenter: '居中',\n    alignRight: '居右',\n    alignJustify: '两端',\n    floatLeft: '左浮动',\n    floatRight: '右浮动',\n    superScript: '上标',\n    subScript: '下标',\n    removeStyles: '清除样式',\n    headings: '标题',\n    header: '标题',\n    normal: '常规',\n    orderedList: '有序列表',\n    unorderedList: '无序列表',\n    blockQuote: '引用',\n    code: '代码',\n    link: '链接',\n    unlink: '清除链接',\n    hr: '水平线',\n    media: '媒体',\n    mediaLibirary: '媒体库',\n    emoji: '小表情',\n    fullscreen: '全屏',\n    exitFullscreen: '退出全屏',\n  },\n  linkEditor: {\n    textInputPlaceHolder: '输入链接文字',\n    linkInputPlaceHolder: '输入链接地址',\n    inputWithEnterPlaceHolder: '输入链接地址并回车',\n    openInNewWindow: '在新窗口打开',\n    removeLink: '移除链接'\n  },\n  audioPlayer: {\n    title: '播放音频文件'\n  },\n  videoPlayer: {\n    title: '播放视频文件',\n    embedTitle: '嵌入式媒体'\n  },\n  media: {\n    image: '图像',\n    video: '视频',\n    audio: '音频',\n    embed: '嵌入式媒体'\n  }\n}","import en from './en'\nimport zh from './zh'\n\nexport default {\n  'en': en,\n  'zh': zh\n}\n","const _namedColors = {\n  'aliceblue': '#f0f8ff',\n  'antiquewhite': '#faebd7',\n  'aqua': '#00ffff',\n  'aquamarine': '#7fffd4',\n  'azure': '#f0ffff',\n  'beige': '#f5f5dc',\n  'bisque': '#ffe4c4',\n  'black': '#000000',\n  'blanchedalmond': '#ffebcd',\n  'blue': '#0000ff',\n  'blueviolet': '#8a2be2',\n  'brown': '#a52a2a',\n  'burlywood': '#deb887',\n  'cadetblue': '#5f9ea0',\n  'chartreuse': '#7fff00',\n  'chocolate': '#d2691e',\n  'coral': '#ff7f50',\n  'cornflowerblue': '#6495ed',\n  'cornsilk': '#fff8dc',\n  'crimson': '#dc143c',\n  'cyan': '#00ffff',\n  'darkblue': '#00008b',\n  'darkcyan': '#008b8b',\n  'darkgoldenrod': '#b8860b',\n  'darkgray': '#a9a9a9',\n  'darkgreen': '#006400',\n  'darkkhaki': '#bdb76b',\n  'darkmagenta': '#8b008b',\n  'darkolivegreen': '#556b2f',\n  'darkorange': '#ff8c00',\n  'darkorchid': '#9932cc',\n  'darkred': '#8b0000',\n  'darksalmon': '#e9967a',\n  'darkseagreen': '#8fbc8f',\n  'darkslateblue': '#483d8b',\n  'darkslategray': '#2f4f4f',\n  'darkturquoise': '#00ced1',\n  'darkviolet': '#9400d3',\n  'deeppink': '#ff1493',\n  'deepskyblue': '#00bfff',\n  'dimgray': '#696969',\n  'dodgerblue': '#1e90ff',\n  'firebrick': '#b22222',\n  'floralwhite': '#fffaf0',\n  'forestgreen': '#228b22',\n  'fuchsia': '#ff00ff',\n  'gainsboro': '#dcdcdc',\n  'ghostwhite': '#f8f8ff',\n  'gold': '#ffd700',\n  'goldenrod': '#daa520',\n  'gray': '#808080',\n  'green': '#008000',\n  'greenyellow': '#adff2f',\n  'honeydew': '#f0fff0',\n  'hotpink': '#ff69b4',\n  'indianred ': '#cd5c5c',\n  'indigo': '#4b0082',\n  'ivory': '#fffff0',\n  'khaki': '#f0e68c',\n  'lavender': '#e6e6fa',\n  'lavenderblush': '#fff0f5',\n  'lawngreen': '#7cfc00',\n  'lemonchiffon': '#fffacd',\n  'lightblue': '#add8e6',\n  'lightcoral': '#f08080',\n  'lightcyan': '#e0ffff',\n  'lightgoldenrodyellow': '#fafad2',\n  'lightgrey': '#d3d3d3',\n  'lightgreen': '#90ee90',\n  'lightpink': '#ffb6c1',\n  'lightsalmon': '#ffa07a',\n  'lightseagreen': '#20b2aa',\n  'lightskyblue': '#87cefa',\n  'lightslategray': '#778899',\n  'lightsteelblue': '#b0c4de',\n  'lightyellow': '#ffffe0',\n  'lime': '#00ff00',\n  'limegreen': '#32cd32',\n  'linen': '#faf0e6',\n  'magenta': '#ff00ff',\n  'maroon': '#800000',\n  'mediumaquamarine': '#66cdaa',\n  'mediumblue': '#0000cd',\n  'mediumorchid': '#ba55d3',\n  'mediumpurple': '#9370d8',\n  'mediumseagreen': '#3cb371',\n  'mediumslateblue': '#7b68ee',\n  'mediumspringgreen': '#00fa9a',\n  'mediumturquoise': '#48d1cc',\n  'mediumvioletred': '#c71585',\n  'midnightblue': '#191970',\n  'mintcream': '#f5fffa',\n  'mistyrose': '#ffe4e1',\n  'moccasin': '#ffe4b5',\n  'navajowhite': '#ffdead',\n  'navy': '#000080',\n  'oldlace': '#fdf5e6',\n  'olive': '#808000',\n  'olivedrab': '#6b8e23',\n  'orange': '#ffa500',\n  'orangered': '#ff4500',\n  'orchid': '#da70d6',\n  'palegoldenrod': '#eee8aa',\n  'palegreen': '#98fb98',\n  'paleturquoise': '#afeeee',\n  'palevioletred': '#d87093',\n  'papayawhip': '#ffefd5',\n  'peachpuff': '#ffdab9',\n  'peru': '#cd853f',\n  'pink': '#ffc0cb',\n  'plum': '#dda0dd',\n  'powderblue': '#b0e0e6',\n  'purple': '#800080',\n  'rebeccapurple': '#663399',\n  'red': '#ff0000',\n  'rosybrown': '#bc8f8f',\n  'royalblue': '#4169e1',\n  'saddlebrown': '#8b4513',\n  'salmon': '#fa8072',\n  'sandybrown': '#f4a460',\n  'seagreen': '#2e8b57',\n  'seashell': '#fff5ee',\n  'sienna': '#a0522d',\n  'silver': '#c0c0c0',\n  'skyblue': '#87ceeb',\n  'slateblue': '#6a5acd',\n  'slategray': '#708090',\n  'snow': '#fffafa',\n  'springgreen': '#00ff7f',\n  'steelblue': '#4682b4',\n  'tan': '#d2b48c',\n  'teal': '#008080',\n  'thistle': '#d8bfd8',\n  'tomato': '#ff6347',\n  'turquoise': '#40e0d0',\n  'violet': '#ee82ee',\n  'wheat': '#f5deb3',\n  'white': '#ffffff',\n  'whitesmoke': '#f5f5f5',\n  'yellow': '#ffff00',\n  'yellowgreen': '#9acd32'\n}\n\nconst _getHexColor = (color) => {\n\n  color = color.replace('color:', '').replace(';', '').replace(' ', '')\n\n  if (/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(color)) {\n    return color\n  } else if (namedColors[color]) {\n    return namedColors[color]\n  } else if (color.indexOf('rgb') === 0) {\n\n    let rgbArray = color.split(',')\n    let convertedColor = rgbArray.length < 3 ? null : '#' + [rgbArray[0], rgbArray[1], rgbArray[2]].map(x => {\n      const hex = parseInt(x.replace(/\\D/g, ''), 10).toString(16)\n      return hex.length === 1 ? '0' + hex : hex\n    }).join('')\n\n    return /^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(convertedColor) ? convertedColor : null\n\n  } else {\n    return null\n  }\n\n}\n\nexport const namedColors = _namedColors\nexport const getHexColor = _getHexColor\n\nexport const detectColorsFromHTMLString = (html) => {\n  return typeof html !== 'string' ? [] : (html.match(/color:[^;]{3,24};/g) || []).map(getHexColor).filter(color => color)\n}\n\nexport const detectColorsFromDraftState = (draftState) => {\n\n  let result = []\n\n  if (!draftState || !draftState.blocks || !draftState.blocks.length) {\n    return result\n  }\n\n  draftState.blocks.forEach((block) => {\n    if (block && block.inlineStyleRanges && block.inlineStyleRanges.length) {\n      block.inlineStyleRanges.forEach((inlineStyle) => {\n        if (inlineStyle.style && inlineStyle.style.indexOf('COLOR-') >= 0) {\n          result.push('#' + inlineStyle.style.split('COLOR-')[1])\n        }\n      })\n    }\n  })\n\n  return result.filter(color => color)\n\n}\n","import React from 'react'\nimport { namedColors } from '../utils/color'\n\nconst getStyleValue = style => style.split('-')[1]\nconst defaultUnitExportFn = unit => unit + 'px'\nconst defaultUnitImportFn = unit => unit.replace('px', '')\n\nconst ignoredNodeAttributes = ['style']\nconst ignoredEntityNodeAttributes = ['style', 'href', 'target', 'alt', 'title', 'id', 'controls', 'autoplay', 'loop', 'poster']\n\nconst spreadNodeAttributes = (attributesObject) => {\n  return Object.keys(attributesObject).reduce((attributeString, attributeName) => {\n    return `${attributeString} ${attributeName}=\"${attributesObject[attributeName]}\"`\n  }, '').replace(/^\\s$/, '')\n}\n\nexport const defaultFontFamilies = [{\n  name: 'Araial',\n  family: 'Arial, Helvetica, sans-serif'\n}, {\n  name: 'Georgia',\n  family: 'Georgia, serif'\n}, {\n  name: 'Impact',\n  family: 'Impact, serif'\n}, {\n  name: 'Monospace',\n  family: '\"Courier New\", Courier, monospace'\n}, {\n  name: 'Tahoma',\n  family: 'tahoma, arial, \\'Hiragino Sans GB\\', 宋体, sans-serif'\n}]\n\nexport const getHexColor = (color) => {\n\n  color = color.replace('color:', '').replace(';', '').replace(' ', '')\n\n  if (/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(color)) {\n    return color\n  } else if (namedColors[color]) {\n    return namedColors[color]\n  } else if (color.indexOf('rgb') === 0) {\n\n    let rgbArray = color.split(',')\n    let convertedColor = rgbArray.length < 3 ? null : '#' + [rgbArray[0], rgbArray[1], rgbArray[2]].map(x => {\n      const hex = parseInt(x.replace(/\\D/g, ''), 10).toString(16)\n      return hex.length === 1 ? '0' + hex : hex\n    }).join('')\n\n    return /^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(convertedColor) ? convertedColor : null\n\n  } else {\n    return null\n  }\n\n}\n\nexport const blocks = {\n  'header-one': 'h1',\n  'header-two': 'h2',\n  'header-three': 'h3',\n  'header-four': 'h4',\n  'header-five': 'h5',\n  'header-six': 'h6',\n  'unstyled': 'p',\n  'blockquote': 'blockquote'\n}\n\nconst blockTypes = Object.keys(blocks)\nconst blockNames = blockTypes.map(key => blocks[key])\n\nconst convertAtomicBlock = (block, contentState, blockNodeAttributes) => {\n\n  if (!block || !block.key) {\n    return <p />\n  }\n\n  const contentBlock = contentState.getBlockForKey(block.key)\n\n  let { class: className, ...nodeAttrAsProps } = blockNodeAttributes\n  nodeAttrAsProps.className = className\n\n  if (!contentBlock) {\n    return <p />\n  }\n\n  const entityKey = contentBlock.getEntityAt(0)\n\n  if (!entityKey) {\n    return <p />\n  }\n\n  const entity = contentState.getEntity(entityKey)\n  const mediaType = entity.getType().toLowerCase()\n\n  let { float, alignment } = block.data\n  let { url, link, link_target, width, height, meta = {} } = entity.getData()\n\n  if (mediaType === 'image') {\n\n    let imageWrapStyle = {}\n    let styledClassName = ''\n\n    if (float) {\n      imageWrapStyle.float = float\n      styledClassName += ' float-' + float\n    } else if (alignment) {\n      imageWrapStyle.textAlign = alignment\n      styledClassName += ' align-' + alignment\n    }\n\n    if (link) {\n      return (\n        <div className={'media-wrap image-wrap' + styledClassName}\n          style={imageWrapStyle}\n          data-card-type='image'\n          data-card-url={url}\n          data-card-meta={encodeURIComponent(JSON.stringify(meta))}>\n          <a style={{display:'inline-block'}} href={link} target={link_target}>\n            <img {...nodeAttrAsProps} {...meta} src={url} width={width} height={height} style={{width, height}} />\n          </a>\n        </div>\n      )\n    } else {\n      return (\n        <div className={'media-wrap image-wrap' + styledClassName}\n          style={imageWrapStyle}\n          data-card-type='image'\n          data-card-url={url}\n          data-card-meta={encodeURIComponent(JSON.stringify(meta))}>\n          <img {...nodeAttrAsProps} {...meta} src={url} width={width} height={height} style={{width, height}}/>\n        </div>\n      )\n    }\n\n  } else if (mediaType === 'audio') {\n    return <div className=\"media-wrap audio-wrap\"><audio controls {...nodeAttrAsProps} {...meta} src={url} /></div>\n  } else if (mediaType === 'video') {\n    return (\n      <div className=\"media-wrap video-wrap\"\n        data-card-type='video'\n        data-card-url={url}\n        data-card-meta={encodeURIComponent(JSON.stringify(meta))}>\n        <video controls {...nodeAttrAsProps} {...meta} src={url} width={width} height={height} />\n      </div>\n    )\n  } else if (mediaType === 'embed') {\n    return <div className=\"media-wrap embed-wrap\"><div dangerouslySetInnerHTML={{__html: url}}/></div>\n  } else if (mediaType === 'hr') {\n    return <hr />\n  } else if (mediaType === 'attachment') {\n    return (\n      <div className='media-wrap attachment-wrap'\n        data-card-type='attachment'\n        data-card-url={url}\n        data-card-meta={encodeURIComponent(JSON.stringify(meta))}>\n        <div className={`attachment-icon attachment-icon-${meta.fileType.toLowerCase()}`}>\n          {meta.fileType}\n        </div>\n        <div className='attachment-content'>\n          <div className='attachment-content-title'>{meta.fileName}</div>\n          <div className='attachment-content-desc'>{meta.fileSize}</div>\n        </div>\n      </div>\n    )\n  }\n  else {\n    return <p />\n  }\n}\n\nconst entityToHTML = (options) => (entity, originalText) => {\n\n  const { entityExportFn } = options\n  const entityType = entity.type.toLowerCase()\n\n  if (entityExportFn) {\n    const customOutput = entityExportFn(entity, originalText)\n    if (customOutput) {\n      return customOutput\n    }\n  }\n\n  if (entityType === 'link') {\n    let { class: className, ...nodeAttrAsProps } = entity.data.nodeAttributes || {}\n    nodeAttrAsProps.className = className\n    return <a href={entity.data.href} target={entity.data.target} {...nodeAttrAsProps}/>\n  }\n\n}\n\nconst styleToHTML = (options) => (style) => {\n\n  const unitExportFn = options.unitExportFn || defaultUnitExportFn\n\n  if (options.styleExportFn) {\n    const customOutput = options.styleExportFn(style, options)\n    if (customOutput) {\n      return customOutput\n    }\n  }\n\n  style = style.toLowerCase()\n\n  if (style === 'strikethrough') {\n    return <span style={{textDecoration: 'line-through'}}/>\n  } else if (style === 'superscript') {\n    return <sup/>\n  } else if (style === 'subscript') {\n    return <sub/>\n  } else if (style.indexOf('color-') === 0) {\n    return <span style={{color: '#' + getStyleValue(style)}}/>\n  } else if (style.indexOf('bgcolor-') === 0) {\n    return <span style={{backgroundColor: '#' + getStyleValue(style)}}/>\n  } else if (style.indexOf('fontsize-') === 0) {\n    return <span style={{fontSize: unitExportFn(getStyleValue(style), 'font-size', 'html')}}/>\n  } else if (style.indexOf('lineheight-') === 0) {\n    return <span style={{lineHeight: unitExportFn(getStyleValue(style), 'line-height', 'html')}}/>\n  } else if (style.indexOf('letterspacing-') === 0) {\n    return <span style={{letterSpacing: unitExportFn(getStyleValue(style), 'letter-spacing', 'html')}}/>\n  } else if (style.indexOf('fontfamily-') === 0) {\n    let fontFamily = options.fontFamilies.find((item) => item.name.toLowerCase() === getStyleValue(style))\n    if (!fontFamily) return\n    return <span style={{fontFamily: fontFamily.family}}/>\n  }\n\n}\n\nconst blockToHTML = (options) => (block) => {\n\n  const { blockExportFn, contentState } = options\n\n  if (blockExportFn) {\n    const customOutput = blockExportFn(contentState, block)\n    if (customOutput) {\n      return customOutput\n    }\n  }\n\n  let blockStyle = ''\n\n  const blockType = block.type.toLowerCase()\n  const { textAlign, textIndent, nodeAttributes = {} } = block.data\n  const attributeString = spreadNodeAttributes(nodeAttributes)\n\n  if (textAlign || textIndent) {\n\n    blockStyle = ' style=\"'\n\n    if (textAlign) {\n      blockStyle += `text-align:${textAlign};`\n    }\n\n    if (textIndent && !isNaN(textIndent) && textIndent > 0) {\n      blockStyle += `text-indent:${textIndent * 2}em;`\n    }\n\n    blockStyle += '\"'\n\n  }\n\n  if (blockType === 'atomic') {\n    return convertAtomicBlock(block, contentState, nodeAttributes)\n  } else if (blockType === 'code-block') {\n\n    const previousBlock = contentState.getBlockBefore(block.key)\n    const nextBlock = contentState.getBlockAfter(block.key)\n    const previousBlockType = previousBlock && previousBlock.getType()\n    const nextBlockType = nextBlock && nextBlock.getType()\n\n    let start = ''\n    let end = ''\n\n    if (previousBlockType !== 'code-block') {\n      start = `<pre${attributeString}><code>`\n    } else {\n      start = ''\n    }\n\n    if (nextBlockType !== 'code-block') {\n      end = '</code></pre>'\n    } else {\n      end = '<br/>'\n    }\n\n    return { start, end }\n\n  } else if (blocks[blockType]) {\n    return {\n      start: `<${blocks[blockType]}${blockStyle}${attributeString}>`,\n      end: `</${blocks[blockType]}>`\n    }\n  } else if (blockType === 'unordered-list-item') {\n    return {\n      start: `<li${blockStyle}${attributeString}>`,\n      end: '</li>',\n      nest: <ul/>\n    }\n  } else if (blockType === 'ordered-list-item') {\n    return {\n      start: `<li${blockStyle}${attributeString}>`,\n      end: '</li>',\n      nest: <ol/>\n    }\n  }\n\n}\n\nconst htmlToStyle = (options, source) => (nodeName, node, currentStyle) => {\n\n  if (!node || !node.style) {\n    return currentStyle\n  }\n\n  const unitImportFn = options.unitImportFn || defaultUnitImportFn\n  let newStyle = currentStyle;\n\n  [].forEach.call(node.style, (style) => {\n\n    if (nodeName === 'span' && style === 'color') {\n      let color = getHexColor(node.style.color)\n      newStyle = color ? newStyle.add('COLOR-' + color.replace('#', '').toUpperCase()) : newStyle\n    } else if (nodeName === 'span' && style === 'background-color') {\n      let color = getHexColor(node.style.backgroundColor)\n      newStyle = color ? newStyle.add('BGCOLOR-' + color.replace('#', '').toUpperCase()) : newStyle\n    } else if (nodeName === 'span' && style === 'font-size') {\n      newStyle = newStyle.add('FONTSIZE-' + unitImportFn(node.style.fontSize, 'font-size', source))\n    } else if (nodeName === 'span' && style === 'line-height' && !isNaN(parseFloat(node.style.lineHeight, 10))) {\n      newStyle = newStyle.add('LINEHEIGHT-' + unitImportFn(node.style.lineHeight, 'line-height', source))\n    } else if (nodeName === 'span' && style === 'letter-spacing' && !isNaN(parseFloat(node.style.letterSpacing, 10))) {\n      newStyle = newStyle.add('LETTERSPACING-' + unitImportFn(node.style.letterSpacing, 'letter-spacing', source))\n    } else if (nodeName === 'span' && style === 'text-decoration') {\n      if (node.style.textDecoration === 'line-through') {\n        newStyle = newStyle.add('STRIKETHROUGH')\n      } else if (node.style.textDecoration === 'underline') {\n        newStyle = newStyle.add('UNDERLINE')\n      }\n    } else if (nodeName === 'span' && style === 'font-family') {\n      let fontFamily = options.fontFamilies.find((item) => item.family.toLowerCase() === node.style.fontFamily.toLowerCase())\n      if (!fontFamily) return\n      newStyle = newStyle.add('FONTFAMILY-' + fontFamily.name.toUpperCase())\n    }\n\n  })\n\n  if (nodeName === 'sup') {\n    newStyle = newStyle.add('SUPERSCRIPT')\n  } else if (nodeName === 'sub') {\n    newStyle = newStyle.add('SUBSCRIPT')\n  }\n\n  options.styleImportFn && (newStyle = options.styleImportFn(nodeName, node, newStyle, source) || newStyle)\n  return newStyle\n\n}\n\nconst htmlToEntity = (options, source) => (nodeName, node, createEntity) => {\n\n  if (options && options.entityImportFn) {\n    const customInput = options.entityImportFn(nodeName, node, createEntity, source)\n    if (customInput) {\n      return customInput\n    }\n  }\n\n  nodeName = nodeName.toLowerCase()\n\n  const { alt, title, id, controls, autoplay, loop, poster } = node\n  let meta = {}\n  let nodeAttributes = {}\n\n  id && (meta.id = id)\n  alt && (meta.alt = alt)\n  title && (meta.title = title)\n  controls && (meta.controls = controls)\n  autoplay && (meta.autoPlay = autoplay)\n  loop && (meta.loop = loop)\n  poster && (meta.poster = poster)\n\n  node.attributes && Object.keys(node.attributes).forEach((key) => {\n    let attr = node.attributes[key]\n    ignoredEntityNodeAttributes.indexOf(attr.name) === -1 && (nodeAttributes[attr.name] = attr.value)\n  })\n\n  if (nodeName === 'a' && !node.querySelectorAll('img').length) {\n    let href = node.getAttribute('href')\n    let target = node.getAttribute('target')\n    return createEntity('LINK', 'MUTABLE',{ href, target, nodeAttributes })\n  } else if (nodeName === 'audio') {\n    return createEntity('AUDIO', 'IMMUTABLE',{ url: node.getAttribute('src'), meta, nodeAttributes })\n  } else if (nodeName === 'video') {\n    return createEntity('VIDEO', 'IMMUTABLE',{ url: node.getAttribute('src'), meta, nodeAttributes })\n  } else if (nodeName === 'img') {\n\n    let parentNode = node.parentNode\n    let entityData = { meta }\n    let { width, height } = node.style\n\n    entityData.url = node.getAttribute('src')\n    width && (entityData.width = width)\n    height && (entityData.height = height)\n\n    if (parentNode.nodeName.toLowerCase() === 'a') {\n      entityData.link = parentNode.getAttribute('href')\n      entityData.link_target = parentNode.getAttribute('target')\n    }\n\n    return createEntity('IMAGE', 'IMMUTABLE', entityData)\n\n  } else if (nodeName === 'hr') {\n    return createEntity('HR', 'IMMUTABLE', {})\n  } else if (node && node.classList && node.classList.contains('attachment-wrap')) {\n    let entityData = {\n      url: node.getAttribute('data-card-url') || ''\n    }\n\n    try {\n      entityData.meta = JSON.parse(decodeURIComponent(node.getAttribute('data-card-meta') || ''))\n    } catch (e) {\n      console.error(e)\n      entityData.meta = {}\n    }\n    return createEntity('ATTACHMENT', 'IMMUTABLE', entityData)\n  }\n  else if (node.parentNode && node.parentNode.classList.contains('embed-wrap')) {\n\n    const embedContent = node.innerHTML || node.outerHTML\n\n    if (embedContent) {\n      return createEntity('EMBED', 'IMMUTABLE', {\n        url: embedContent\n      })\n    }\n  }\n}\n\nconst htmlToBlock = (options, source) => (nodeName, node) => {\n\n  if (options && options.blockImportFn) {\n    const customInput = options.blockImportFn(nodeName, node, source)\n    if (customInput) {\n      return customInput\n    }\n  }\n\n  let nodeAttributes = {}\n  let nodeStyle = node.style || {}\n\n  node.attributes && Object.keys(node.attributes).forEach((key) => {\n    let attr = node.attributes[key]\n    ignoredNodeAttributes.indexOf(attr.name) === -1 && (nodeAttributes[attr.name] = attr.value)\n  })\n\n  if (node.classList && node.classList.contains('media-wrap')) {\n\n    if (node.classList.contains('attachment-wrap')) {\n      node.innerHTML = ''\n    }\n\n    return {\n      type: 'atomic',\n      data: {\n        nodeAttributes: nodeAttributes,\n        float: nodeStyle.float,\n        alignment: nodeStyle.textAlign\n      }\n    }\n\n  } else if (nodeName === 'img') {\n\n    return {\n      type: 'atomic',\n      data: {\n        nodeAttributes: nodeAttributes,\n        float: nodeStyle.float,\n        alignment: nodeStyle.textAlign\n      }\n    }\n\n  } else if (nodeName === 'hr') {\n\n    return {\n      type: 'atomic',\n      data: { nodeAttributes }\n    }\n\n  } else if (nodeName === 'pre') {\n\n    node.innerHTML = node.innerHTML.replace(/<code(.*?)>/g, '').replace(/<\\/code>/g, '')\n\n    return {\n      type: 'code-block',\n      data: { nodeAttributes }\n    }\n\n  } else if (blockNames.indexOf(nodeName) !== -1) {\n\n    const blockData = { nodeAttributes }\n\n    if (nodeStyle.textAlign) {\n      blockData.textAlign = nodeStyle.textAlign\n    }\n\n    if (nodeStyle.textIndent) {\n      blockData.textIndent = /^\\d+em$/.test(nodeStyle.textIndent) ? Math.ceil(parseInt(nodeStyle.textIndent, 10) / 2) : 1\n    }\n\n    return {\n      type: blockTypes[blockNames.indexOf(nodeName)],\n      data: blockData\n    }\n\n  }\n\n}\n\nexport const getToHTMLConfig = (options) => {\n\n  return {\n    styleToHTML: styleToHTML(options),\n    entityToHTML: entityToHTML(options),\n    blockToHTML: blockToHTML(options)\n  }\n\n}\n\nexport const getFromHTMLConfig = (options, source = 'unknow') => {\n\n  return {\n    htmlToStyle: htmlToStyle(options, source),\n    htmlToEntity: htmlToEntity(options, source),\n    htmlToBlock: htmlToBlock(options, source)\n  }\n\n}\n","import { convertToHTML, convertFromHTML } from 'draft-convert'\nimport { getToHTMLConfig, getFromHTMLConfig, defaultFontFamilies } from './configs'\nimport { convertFromRaw, convertToRaw, EditorState } from 'draft-js'\n\nconst defaultConvertOptions = {\n  fontFamilies: defaultFontFamilies\n}\n\nexport const convertRawToHTML = (rawContent, options) => {\n\n  options = { ...defaultConvertOptions, ...options }\n\n  try {\n    const contentState = convertFromRaw(rawContent)\n    options.contentState = contentState\n    return convertToHTML(getToHTMLConfig(options))(contentState)\n  } catch (error) {\n    console.warn(error)\n    return ''\n  }\n\n}\n\nexport const convertHTMLToRaw = (HTMLString, options, source) => {\n\n  options = { ...defaultConvertOptions, ...options }\n\n  try {\n    const contentState = convertFromHTML(getFromHTMLConfig(options, source))(HTMLString)\n    return convertToRaw(contentState)\n  } catch (error) {\n    console.warn(error)\n    return {}\n  }\n\n}\n\nexport const convertEditorStateToHTML = (editorState, options) => {\n\n  options = { ...defaultConvertOptions, ...options }\n\n  try {\n    const contentState = editorState.getCurrentContent()\n    options.contentState = contentState\n    return convertToHTML(getToHTMLConfig(options))(contentState)\n  } catch (error) {\n    console.warn(error)\n    return ''\n  }\n\n}\n\nexport const convertHTMLToEditorState = (HTMLString, editorDecorators, options, source) => {\n\n  options = { ...defaultConvertOptions, ...options }\n\n  try {\n    return EditorState.createWithContent(convertFromHTML(getFromHTMLConfig(options, source))(HTMLString), editorDecorators)\n  } catch (error) {\n    console.warn(error)\n    return EditorState.createEmpty(editorDecorators)\n  }\n\n}\n\nexport const convertEditorStateToRaw = (editorState) => {\n  return convertToRaw(editorState.getCurrentContent())\n}\n\nexport const convertRawToEditorState = (rawContent, editorDecorators) => {\n\n  try {\n    return EditorState.createWithContent(convertFromRaw(rawContent), editorDecorators)\n  } catch (error) {\n    console.warn(error)\n    return EditorState.createEmpty(editorDecorators)\n  }\n\n}\n\nexport default {\n  convertRawToHTML,\n  convertHTMLToRaw,\n\n  convertEditorStateToHTML,\n  convertHTMLToEditorState,\n  convertEditorStateToRaw,\n  convertRawToEditorState\n}\n","import { Modifier, EditorState, SelectionState, RichUtils, CharacterMetadata, AtomicBlockUtils, convertFromRaw } from 'draft-js'\nimport { setBlockData, getSelectionEntity } from 'draftjs-utils'\nimport { convertHTMLToRaw } from '../covert'\nimport Immutable from 'immutable'\n\nconst strictBlockTypes = ['atomic']\n\nexport const registerStrictBlockType = (blockType) => {\n  strictBlockTypes.indexOf(blockType) === -1 && strictBlockTypes.push(blockType)\n}\n\nexport const isEditorState = (editorState) => {\n  return editorState instanceof EditorState\n}\n\nexport const createEmptyEditorState = (editorDecorators) => {\n  return EditorState.createEmpty(editorDecorators)\n}\n\nexport const createEditorState = (contentState, editorDecorators) => {\n  return EditorState.createWithContent(contentState, editorDecorators)\n}\n\nexport const isSelectionCollapsed = (editorState) => {\n  return editorState.getSelection().isCollapsed()\n}\n\nexport const selectionContainsBlockType = (editorState, blockType) => {\n  return getSelectedBlocks(editorState).find(block => block.getType() === blockType)\n}\n\nexport const selectionContainsStrictBlock = (editorState) => {\n  return getSelectedBlocks(editorState).find(block => ~strictBlockTypes.indexOf(block.getType()))\n}\n\nexport const selectBlock = (editorState, block) => {\n\n  const blockKey = block.getKey()\n\n  return EditorState.forceSelection(editorState, new SelectionState({\n    anchorKey: blockKey,\n    anchorOffset: 0,\n    focusKey: blockKey,\n    focusOffset: block.getLength()\n  }))\n\n}\n\nexport const selectNextBlock = (editorState, block) => {\n  const nextBlock = editorState.getCurrentContent().getBlockAfter(block.getKey())\n  return nextBlock ? selectBlock(editorState, nextBlock) : editorState\n}\n\nexport const removeBlock = (editorState, block, lastSelection = null) => {\n\n  let nextContentState, nextEditorState\n  const blockKey = block.getKey()\n\n  nextContentState = Modifier.removeRange(editorState.getCurrentContent(), new SelectionState({\n    anchorKey: blockKey,\n    anchorOffset: 0,\n    focusKey: blockKey,\n    focusOffset: block.getLength()\n  }), 'backward')\n\n  nextContentState = Modifier.setBlockType(nextContentState, nextContentState.getSelectionAfter(), 'unstyled')\n  nextEditorState = EditorState.push(editorState, nextContentState, 'remove-range')\n  return EditorState.forceSelection(nextEditorState, lastSelection || nextContentState.getSelectionAfter())\n\n}\n\nexport const getSelectionBlock = (editorState) => {\n  return editorState.getCurrentContent().getBlockForKey(editorState.getSelection().getAnchorKey())\n}\n\nexport const updateEachCharacterOfSelection = (editorState, callback) => {\n\n  const selectionState = editorState.getSelection()\n  const contentState = editorState.getCurrentContent()\n  const contentBlocks = contentState.getBlockMap()\n  const selectedBlocks = getSelectedBlocks(editorState)\n\n  if (selectedBlocks.length === 0) {\n    return editorState\n  }\n\n  const startKey = selectionState.getStartKey()\n  const startOffset = selectionState.getStartOffset()\n  const endKey = selectionState.getEndKey()\n  const endOffset = selectionState.getEndOffset()\n\n  const nextContentBlocks = contentBlocks.map((block) => {\n\n    if (selectedBlocks.indexOf(block) === -1) {\n      return block\n    }\n\n    const blockKey = block.getKey()\n    const charactersList = block.getCharacterList()\n    let nextCharactersList = null\n\n    if (blockKey === startKey && blockKey === endKey) {\n      nextCharactersList = charactersList.map((character, index) => {\n        if (index >= startOffset && index < endOffset) {\n          return callback(character)\n        }\n        return character\n      })\n    } else if (blockKey === startKey) {\n      nextCharactersList = charactersList.map((character, index) => {\n        if (index >= startOffset) {\n          return callback(character)\n        }\n        return character\n      })\n    } else if (blockKey === endKey) {\n      nextCharactersList = charactersList.map((character, index) => {\n        if (index < endOffset) {\n          return callback(character)\n        }\n        return character\n      })\n    } else {\n      nextCharactersList = charactersList.map((character) => {\n        return callback(character)\n      })\n    }\n\n    return block.merge({\n      'characterList': nextCharactersList\n    })\n\n  })\n\n  return EditorState.push(editorState, contentState.merge({\n    blockMap: nextContentBlocks,\n    selectionBefore: selectionState,\n    selectionAfter: selectionState\n  }), 'update-selection-character-list')\n\n}\n\nexport const getSelectedBlocks = (editorState) => {\n\n  const selectionState = editorState.getSelection()\n  const contentState = editorState.getCurrentContent()\n\n  const startKey = selectionState.getStartKey()\n  const endKey = selectionState.getEndKey()\n  const isSameBlock = startKey === endKey\n  const startingBlock = contentState.getBlockForKey(startKey)\n  const selectedBlocks = [startingBlock]\n\n  if (!isSameBlock) {\n    let blockKey = startKey\n\n    while (blockKey !== endKey) {\n      const nextBlock = contentState.getBlockAfter(blockKey)\n      selectedBlocks.push(nextBlock)\n      blockKey = nextBlock.getKey()\n    }\n  }\n\n  return selectedBlocks\n\n}\n\nexport const setSelectionBlockData = (editorState, blockData, override) => {\n\n  let newBlockData = override ? blockData : Object.assign({}, getSelectionBlockData(editorState).toJS(), blockData)\n\n  Object.keys(newBlockData).forEach(key => {\n    if (newBlockData.hasOwnProperty(key) && newBlockData[key] === undefined) {\n      delete newBlockData[key]\n    }\n  })\n\n  return setBlockData(editorState, newBlockData)\n\n}\n\nexport const getSelectionBlockData = (editorState, name) => {\n  const blockData = getSelectionBlock(editorState).getData()\n  return name ? blockData.get(name) : blockData\n}\n\nexport const getSelectionBlockType = (editorState) => {\n  return getSelectionBlock(editorState).getType()\n}\n\nexport const getSelectionText = (editorState) => {\n\n  const selectionState = editorState.getSelection()\n  const contentState = editorState.getCurrentContent()\n\n  if (selectionState.isCollapsed() || getSelectionBlockType(editorState) === 'atomic') {\n    return ''\n  }\n\n  const anchorKey = selectionState.getAnchorKey()\n  const currentContentBlock = contentState.getBlockForKey(anchorKey)\n  const start = selectionState.getStartOffset()\n  const end = selectionState.getEndOffset()\n\n  return currentContentBlock.getText().slice(start, end)\n\n}\n\nexport const toggleSelectionBlockType = (editorState, blockType) => {\n\n  if (selectionContainsStrictBlock(editorState)) {\n    return editorState\n  }\n\n  return RichUtils.toggleBlockType(editorState, blockType)\n\n}\n\nexport const getSelectionEntityType = (editorState) => {\n\n  const entityKey = getSelectionEntity(editorState)\n\n  if (entityKey) {\n    const entity = editorState.getCurrentContent().getEntity(entityKey)\n    return entity ? entity.get('type') : null\n  }\n\n  return null\n\n}\n\nexport const getSelectionEntityData = (editorState, type) => {\n\n  const entityKey = getSelectionEntity(editorState)\n\n  if (entityKey) {\n    const entity = editorState.getCurrentContent().getEntity(entityKey)\n    if (entity && entity.get('type') === type) {\n      return entity.getData()\n    } else {\n      return {}\n    }\n  } else {\n    return {}\n  }\n\n}\n\nexport const toggleSelectionEntity = (editorState, entity) => {\n\n  const contentState = editorState.getCurrentContent()\n  const selectionState = editorState.getSelection()\n\n  if (selectionState.isCollapsed() || getSelectionBlockType(editorState) === 'atomic') {\n    return editorState\n  }\n\n  if (!entity || !entity.type || getSelectionEntityType(editorState) === entity.type) {\n    return EditorState.push(editorState, Modifier.applyEntity(contentState, selectionState, null), 'apply-entity')\n  }\n\n  try {\n\n    const nextContentState = contentState.createEntity(entity.type, entity.mutability, entity.data)\n    const entityKey = nextContentState.getLastCreatedEntityKey()\n\n    let nextEditorState = EditorState.set(editorState, {\n      currentContent: nextContentState\n    })\n\n    return EditorState.push(nextEditorState, Modifier.applyEntity(nextContentState, selectionState, entityKey), 'apply-entity')\n\n  } catch (error) {\n    console.warn(error)\n    return editorState\n  }\n\n}\n\nexport const toggleSelectionLink = (editorState, href, target) => {\n\n  const contentState = editorState.getCurrentContent()\n  const selectionState = editorState.getSelection()\n\n  let entityData = { href, target }\n\n  if (selectionState.isCollapsed() || getSelectionBlockType(editorState) === 'atomic') {\n    return editorState\n  }\n\n  if (href === false) {\n    return RichUtils.toggleLink(editorState, selectionState, null)\n  }\n\n  if (href === null) {\n    delete entityData.href\n  }\n\n  try {\n\n    const nextContentState = contentState.createEntity('LINK', 'MUTABLE', entityData)\n    const entityKey = nextContentState.getLastCreatedEntityKey()\n\n    let nextEditorState = EditorState.set(editorState, {\n      currentContent: nextContentState\n    })\n\n    nextEditorState = RichUtils.toggleLink(nextEditorState, selectionState, entityKey)\n    nextEditorState = EditorState.forceSelection(nextEditorState, selectionState.merge({\n      anchorOffset: selectionState.getEndOffset(),\n      focusOffset: selectionState.getEndOffset()\n    }))\n\n    nextEditorState = EditorState.push(nextEditorState, Modifier.insertText(\n      nextEditorState.getCurrentContent(), nextEditorState.getSelection(), ''\n    ), 'insert-text')\n\n    return nextEditorState\n\n  } catch (error) {\n    console.warn(error)\n    return editorState\n  }\n\n}\n\nexport const getSelectionInlineStyle = (editorState) => {\n  return editorState.getCurrentInlineStyle()\n}\n\nexport const selectionHasInlineStyle = (editorState, style) => {\n  return getSelectionInlineStyle(editorState).has(style.toUpperCase())\n}\n\nexport const toggleSelectionInlineStyle = (editorState, style, prefix = '') => {\n\n  let nextEditorState = editorState\n  style = prefix + style.toUpperCase()\n\n  if (prefix) {\n\n    nextEditorState = updateEachCharacterOfSelection(nextEditorState, (characterMetadata) => {\n\n      return characterMetadata.toJS().style.reduce((characterMetadata, characterStyle) => {\n        if (characterStyle.indexOf(prefix) === 0 && style !== characterStyle) {\n          return CharacterMetadata.removeStyle(characterMetadata, characterStyle)\n        } else {\n          return characterMetadata\n        }\n      }, characterMetadata)\n\n    })\n\n  }\n\n  return RichUtils.toggleInlineStyle(nextEditorState, style)\n\n}\n\nexport const removeSelectionInlineStyles = (editorState) => {\n\n  return updateEachCharacterOfSelection(editorState, (characterMetadata) => {\n    return characterMetadata.merge({\n      style: Immutable.OrderedSet([])\n    })\n  })\n\n}\n\nexport const toggleSelectionAlignment = (editorState, alignment) => {\n  return setSelectionBlockData(editorState, {\n    textAlign: getSelectionBlockData(editorState, 'textAlign') !== alignment ? alignment : undefined\n  })\n}\n\nexport const toggleSelectionIndent = (editorState, textIndent, maxIndent = 6) => {\n  return textIndent < 0 || textIndent > maxIndent || isNaN(textIndent) ? editorState : setSelectionBlockData(editorState, {\n    textIndent: textIndent || undefined\n  })\n}\n\nexport const increaseSelectionIndent = (editorState, maxIndent = 6) => {\n  const currentIndent = getSelectionBlockData(editorState, 'textIndent') || 0\n  return toggleSelectionIndent(editorState, currentIndent + 1, maxIndent)\n}\n\nexport const decreaseSelectionIndent = (editorState, maxIndent) => {\n  const currentIndent = getSelectionBlockData(editorState, 'textIndent') || 0\n  return toggleSelectionIndent(editorState, currentIndent - 1, maxIndent)\n}\n\nexport const toggleSelectionColor = (editorState, color) => {\n  return toggleSelectionInlineStyle(editorState, color.replace('#', ''), 'COLOR-')\n}\n\nexport const toggleSelectionBackgroundColor = (editorState, color) => {\n  return toggleSelectionInlineStyle(editorState, color.replace('#', ''), 'BGCOLOR-')\n}\n\nexport const toggleSelectionFontSize = (editorState, fontSize) => {\n  return toggleSelectionInlineStyle(editorState, fontSize, 'FONTSIZE-')\n}\n\nexport const toggleSelectionLineHeight = (editorState, lineHeight) => {\n  return toggleSelectionInlineStyle(editorState,  lineHeight, 'LINEHEIGHT-')\n}\n\nexport const toggleSelectionFontFamily = (editorState, fontFamily) => {\n  return toggleSelectionInlineStyle(editorState, fontFamily, 'FONTFAMILY-')\n}\n\nexport const toggleSelectionLetterSpacing = (editorState, letterSpacing) => {\n  return toggleSelectionInlineStyle(editorState, letterSpacing, 'LETTERSPACING-')\n}\n\nexport const insertText = (editorState, text, inlineStyle, entity) => {\n\n  const selectionState = editorState.getSelection()\n  const currentSelectedBlockType = getSelectionBlockType(editorState)\n\n  if (currentSelectedBlockType === 'atomic') {\n    return editorState\n  }\n\n  let entityKey\n  let contentState = editorState.getCurrentContent()\n\n  if (entity && entity.type) {\n    contentState = contentState.createEntity(entity.type, entity.mutability || 'MUTABLE', entity.data)\n    entityKey = contentState.getLastCreatedEntityKey()\n  }\n\n  if (!selectionState.isCollapsed()) {\n    return EditorState.push(editorState, Modifier.replaceText(contentState, selectionState, text, inlineStyle, entityKey), 'replace-text')\n  } else {\n    return EditorState.push(editorState, Modifier.insertText(contentState, selectionState, text, inlineStyle, entityKey), 'insert-text')\n  }\n\n}\n\nexport const insertHTML = (editorState, htmlString, source) => {\n\n  if (!htmlString) {\n    return editorState\n  }\n\n  const selectionState = editorState.getSelection()\n  const contentState = editorState.getCurrentContent()\n  const options = editorState.convertOptions || {}\n\n  try {\n\n    const { blockMap } = convertFromRaw(convertHTMLToRaw(htmlString, options, source))\n\n    return EditorState.push(editorState, Modifier.replaceWithFragment(\n      contentState, selectionState, blockMap\n    ), 'insert-fragment')\n\n  } catch (error) {\n    console.warn(error)\n    return editorState\n  }\n\n}\n\nexport const insertAtomicBlock = (editorState, type, immutable = true, data = {}) => {\n\n  if (selectionContainsStrictBlock(editorState)) {\n    return insertAtomicBlock(selectNextBlock(editorState, getSelectionBlock(editorState)), type, immutable, data)\n  }\n\n  const selectionState = editorState.getSelection()\n  const contentState = editorState.getCurrentContent()\n\n  if (!selectionState.isCollapsed() || getSelectionBlockType(editorState) === 'atomic') {\n    return editorState\n  }\n\n  const contentStateWithEntity = contentState.createEntity(type, immutable ? 'IMMUTABLE' : 'MUTABLE', data)\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey()\n  const newEditorState = AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, ' ')\n\n  return newEditorState\n\n}\n\nexport const insertHorizontalLine = (editorState) => {\n  return insertAtomicBlock(editorState, 'HR')\n}\n\nexport const insertMedias = (editorState, medias = []) => {\n\n  if (!medias.length) {\n    return editorState\n  }\n\n  return medias.reduce((editorState, media) => {\n    const { url, link, link_target, name, type, width, height, meta } = media\n    return insertAtomicBlock(editorState, type, true, { url, link, link_target, name, type, width, height, meta })\n  }, editorState)\n\n}\n\nexport const setMediaData = (editorState, entityKey, data) => {\n  return EditorState.push(editorState, editorState.getCurrentContent().mergeEntityData(entityKey, data), 'change-block-data')\n}\n\nexport const removeMedia = (editorState, mediaBlock) => {\n  return removeBlock(editorState, mediaBlock)\n}\n\nexport const setMediaPosition = (editorState, mediaBlock, position) => {\n\n  let newPosition = {}\n  const { float, alignment } = position\n\n  if (typeof float !== 'undefined') {\n    newPosition.float = mediaBlock.getData().get('float') === float ? null : float\n  }\n\n  if (typeof alignment !== 'undefined') {\n    newPosition.alignment = mediaBlock.getData().get('alignment') === alignment ? null : alignment\n  }\n\n  return setSelectionBlockData(selectBlock(editorState, mediaBlock), newPosition)\n\n}\n\nexport const clear = (editorState) => {\n\n  const contentState = editorState.getCurrentContent()\n\n  const firstBlock = contentState.getFirstBlock()\n  const lastBlock = contentState.getLastBlock()\n\n  const allSelected = new SelectionState({\n    anchorKey: firstBlock.getKey(),\n    anchorOffset: 0,\n    focusKey: lastBlock.getKey(),\n    focusOffset: lastBlock.getLength(),\n    hasFocus: true\n  })\n\n  return RichUtils.toggleBlockType(EditorState.push(\n    editorState,\n    Modifier.removeRange(contentState, allSelected, 'backward'),\n    'remove-range'\n  ), 'unstyled')\n\n}\n\nexport const handleKeyCommand = (editorState, command) => {\n  return RichUtils.handleKeyCommand(editorState, command)\n}\n\nexport const undo = (editorState) => {\n  return EditorState.undo(editorState)\n}\n\nexport const redo = (editorState) => {\n  return EditorState.redo(editorState)\n}\n","import { getDefaultKeyBinding, KeyBindingUtil } from 'draft-js'\n\n// TODO\n// 允许自定义的快捷键设置\n\nexport default (customKeyBindingFn) => (event) => {\n\n  if (event.keyCode === 83 && (KeyBindingUtil.hasCommandModifier(event) || KeyBindingUtil.isCtrlKeyCommand(event))) {\n    return 'braft-save'\n  }\n\n  if (customKeyBindingFn) {\n    return customKeyBindingFn(event) || getDefaultKeyBinding(event)\n  }\n\n  return getDefaultKeyBinding(event)\n\n}\n","export default {\n  language: 'zh',\n  controls: [\n    'undo', 'redo', 'separator',\n    'font-size', 'line-height', 'letter-spacing', 'separator',\n    'text-color', 'bold', 'italic', 'underline', 'strike-through', 'separator',\n    'superscript', 'subscript', 'remove-styles', 'emoji', 'separator',\n    'text-indent', 'text-align', 'separator',\n    'headings', 'list-ul', 'list-ol', 'blockquote', 'code', 'separator',\n    'media', 'link', 'table', 'split', 'hr', 'separator',\n    'clear', 'separator',\n    'fullscreen'\n  ],\n  excludeControls: [],\n  extendControls: [],\n  extendAtomics: [],\n  componentBelowControlBar: null,\n  media: {\n    pasteImage: true,\n    imagePasteLimit: 5,\n    image: true,\n    video: true,\n    audio: true,\n    uploadFn: null,\n    validateFn: null,\n    onBeforeDeselect: null,\n    onDeselect: null,\n    onBeforeSelect: null,\n    onSelect: null,\n    onBeforeRemove: null,\n    onRemove: null,\n    onCancel: null,\n    onFileSelect: null,\n    onBeforeInsert: null,\n    onInsert: null,\n    onChange: null,\n    accepts: {\n      image: 'image/png,image/jpeg,image/gif,image/webp,image/apng,image/svg',\n      video: 'video/mp4',\n      audio: 'audio/mp3'\n    },\n    externals: {\n      audio: true,\n      video: true,\n      image: true,\n      embed: true\n    },\n  },\n  imageControls: [\n    'float-left', 'float-right',\n    'align-left', 'align-center', 'align-right',\n    'link', 'size', 'remove'\n  ],\n  imageResizable: true,\n  colors: [\n    '#000000', '#333333', '#666666', '#999999', '#cccccc', '#ffffff',\n    '#61a951', '#16a085', '#07a9fe', '#003ba5', '#8e44ad', '#f32784',\n    '#c0392b', '#d35400', '#f39c12', '#fdda00'\n  ],\n  colorPicker: null,\n  colorPickerTheme: 'dark',\n  colorPickerAutoHide: true,\n  codeTabIndents: 2,\n  headings: ['header-one', 'header-two', 'header-three', 'header-four', 'header-five', 'header-six', 'unstyled'],\n  textAligns: ['left', 'center', 'right', 'justify'],\n  textBackgroundColor: true,\n  allowInsertLinkText: false,\n  defaultLinkTarget: '',\n  letterSpacings: [0, 1, 2, 3, 4, 5, 6],\n  lineHeights: [1, 1.2, 1.5, 1.75, 2, 2.5, 3, 4],\n  fontSizes: [\n    12, 14, 16, 18, 20, 24,\n    28, 30, 32, 36, 40, 48,\n    56, 64, 72, 96, 120, 144\n  ],\n  fontFamilies: [{\n    name: 'Arial',\n    family: 'Arial, Helvetica, sans-serif'\n  }, {\n    name: 'Georgia',\n    family: 'Georgia, serif'\n  }, {\n    name: 'Impact',\n    family: 'Impact, serif'\n  }, {\n    name: 'Monospace',\n    family: '\"Courier New\", Courier, monospace'\n  }, {\n    name: 'Tahoma',\n    family: 'tahoma, arial, \"Hiragino Sans GB\", 宋体, sans-serif'\n  }],\n  converts: {\n    unitExportFn: (value, type) => type === 'line-height' ? value : `${value}px`,\n  },\n  emojis: [\n    '🤣', '🙌', '💚', '💛', '👏', '😉', '💯',\n    '💕', '💞', '💘', '💙', '💝', '🖤', '💜',\n    '❤️', '😍', '😻', '💓', '💗', '😋', '😇',\n    '😂', '😹', '😘', '💖', '😁', '😀', '🤞',\n    '😲', '😄', '😊', '👍', '😌', '😃', '😅',\n    '✌️', '🤗', '💋', '😗', '😽', '😚', '🤠',\n    '😙', '😺', '👄', '😸', '😏', '😼', '👌',\n    '😎', '😆', '😛', '🙏', '🤝', '🙂', '🤑',\n    '😝', '😐', '😑', '🤤', '😤', '🙃', '🤡',\n    '😶', '😪', '😴', '😵', '😓', '👊', '😦',\n    '😷', '🤐', '😜', '🤓', '👻', '😥', '🙄',\n    '🤔', '🤒', '🙁', '😔', '😯', '☹️', '☠️',\n    '😰', '😩', '😖', '😕', '😒', '😣', '😢',\n    '😮', '😿', '🤧', '😫', '🤥', '😞', '😬',\n    '👎', '💀', '😳', '😨', '🤕', '🤢', '😱',\n    '😭', '😠', '😈', '😧', '💔', '😟', '🙀',\n    '💩', '👿', '😡', '😾', '🖕'\n  ],\n  stripPastedStyles: false,\n  triggerChangeOnMount: true,\n  className: '',\n  style: {},\n  controlBarClassName: '',\n  controlBarStyle: {},\n  contentClassName: '',\n  contentStyle: {},\n  draftProps: {},\n  hooks: {},\n  onChange: null,\n  onFocus: null,\n  onBlur: null,\n  onTab: null,\n  onDelete: null,\n  onSave: null,\n  fixPlaceholder: false\n}\n","let braftUniqueIndex = 0\n\nexport const UniqueIndex = () => braftUniqueIndex += 1","import * as ContentUtils from './content'\nimport * as BaseUtils from './base'\nimport * as ColorUtils from './color'\n\nexport {\n  ContentUtils,\n  BaseUtils,\n  ColorUtils\n}\n","import { ContentUtils, ColorUtils } from 'utils'\nimport { RichUtils, Modifier, EditorState, ContentState } from 'draft-js'\nimport getFragmentFromSelection from 'draft-js/lib/getFragmentFromSelection'\nimport { handleNewLine } from 'draftjs-utils'\n\nexport const keyCommandHandlers = (command, editorState, editor) => {\n\n  if (editor.editorProps.handleKeyCommand && editor.editorProps.handleKeyCommand(command, editorState, editor) === 'handled') {\n    return 'handled'\n  }\n\n  if (command === 'braft-save') {\n    editor.editorProps.onSave && editor.editorProps.onSave(editorState)\n    return 'handled'\n  }\n\n  const { controls, excludeControls } = editor.editorProps\n  const allowIndent = (controls.indexOf('text-indent') !== 0 || controls.find(item => item.key === 'text-indent')) && excludeControls.indexOf('text-indent') === -1\n  const cursorStart = editorState.getSelection().getStartOffset()\n  const cursorEnd = editorState.getSelection().getEndOffset()\n  const cursorIsAtFirst = cursorStart === 0 && cursorEnd === 0\n\n  if (command === 'backspace') {\n\n    if (editor.editorProps.onDelete && editor.editorProps.onDelete(editorState) === false) {\n      return 'handled'\n    }\n\n    const blockType = ContentUtils.getSelectionBlockType(editorState)\n\n    if (allowIndent && cursorIsAtFirst && blockType !== 'code-block') {\n      editor.setValue(ContentUtils.decreaseSelectionIndent(editorState))\n    }\n\n  }\n\n  if (command === 'tab') {\n    const blockType = ContentUtils.getSelectionBlockType(editorState)\n\n    if (blockType === 'code-block') {\n      editor.setValue(ContentUtils.insertText(editorState, ' '.repeat(editor.editorProps.codeTabIndents)))\n      return 'handled'\n    } else if (blockType === 'ordered-list-item' || blockType === 'unordered-list-item') {\n      const newEditorState = RichUtils.onTab(\n        event,\n        editorState,\n        4,\n      )\n      if (newEditorState !== editorState) {\n        editor.setValue(newEditorState)\n      }\n      return 'handled'\n    } else if (blockType !== 'atomic' && allowIndent && cursorIsAtFirst) {\n      editor.setValue(ContentUtils.increaseSelectionIndent(editorState))\n      return 'handled'\n    }\n\n  }\n\n  const nextEditorState = ContentUtils.handleKeyCommand(editorState, command)\n\n  if (nextEditorState) {\n    editor.setValue(nextEditorState)\n    return 'handled'\n  }\n\n  return 'not-handled'\n\n}\n\nexport const returnHandlers = (event, editorState, editor) => {\n\n  if (editor.editorProps.handleReturn && editor.editorProps.handleReturn(event, editorState, editor) === 'handled') {\n    return 'handled'\n  }\n\n  const currentBlock = ContentUtils.getSelectionBlock(editorState)\n  const currentBlockType = currentBlock.getType()\n\n  if (currentBlockType === 'unordered-list-item' || currentBlockType === 'ordered-list-item') {\n\n    if (currentBlock.getLength() === 0) {\n      editor.setValue(ContentUtils.toggleSelectionBlockType(editorState, 'unstyled'))\n      return 'handled'\n    }\n\n    return 'not-handled'\n\n  } else if (currentBlockType === 'code-block') {\n\n    if (\n      event.which === 13 && (\n        event.getModifierState('Shift') ||\n        event.getModifierState('Alt') ||\n        event.getModifierState('Control')\n      )) {\n      editor.setValue(ContentUtils.toggleSelectionBlockType(editorState, 'unstyled'))\n      return 'handled'\n    }\n\n    return 'not-handled'\n\n  } else if (currentBlockType === 'blockquote') {\n\n    if (event.which === 13) {\n\n      if (\n        event.getModifierState('Shift') ||\n        event.getModifierState('Alt') ||\n        event.getModifierState('Control')\n      ) {\n        event.which = 0\n      } else {\n        editor.setValue(RichUtils.insertSoftNewline(editorState))\n        return 'handled'\n      }\n\n    }\n\n  }\n\n  const nextEditorState = handleNewLine(editorState, event)\n\n  if (nextEditorState) {\n    editor.setValue(nextEditorState)\n    return 'handled'\n  }\n\n  return 'not-handled'\n\n}\n\nexport const beforeInputHandlers = (chars, editorState, editor) => {\n\n  if (editor.editorProps.handleBeforeInput && editor.editorProps.handleBeforeInput(chars, editorState, editor) === 'handled') {\n    return 'handled'\n  }\n\n  return 'not-handled'\n\n}\n\nexport const compositionStartHandler = (_, editor) => {\n\n  const { editorState } = editor.state\n  const selectedBlocks = ContentUtils.getSelectedBlocks(editorState)\n\n  if (selectedBlocks && selectedBlocks.length > 1) {\n\n    const nextEditorState = EditorState.push(\n      editorState,\n      Modifier.removeRange(editorState.getCurrentContent(), editorState.getSelection(), 'backward'),\n      'remove-range'\n    )\n\n    editor.setValue(nextEditorState)\n\n  }\n\n}\n\nexport const dropHandlers = (selectionState, dataTransfer, editor) => {\n\n  if (editor.editorProps.readOnly || editor.editorProps.disabled) {\n    return 'handled'\n  }\n\n  if (window && window.__BRAFT_DRAGING__IMAGE__) {\n\n    let nextEditorState = EditorState.forceSelection(editor.state.editorState, selectionState)\n    nextEditorState = ContentUtils.insertMedias(nextEditorState, [window.__BRAFT_DRAGING__IMAGE__.mediaData])\n    nextEditorState = ContentUtils.removeBlock(nextEditorState, window.__BRAFT_DRAGING__IMAGE__.block, nextEditorState.getSelection())\n\n    window.__BRAFT_DRAGING__IMAGE__ = null\n\n    editor.lockOrUnlockEditor(true)\n    editor.setValue(nextEditorState)\n\n    return 'handled'\n\n  } else if (!dataTransfer || !dataTransfer.getText()) {\n    return 'handled'\n  }\n\n  return 'not-handled'\n\n}\n\nexport const handleFiles = (files, editor) => {\n\n  const { pasteImage, validateFn, imagePasteLimit } = { ...editor.constructor.defaultProps.media, ...editor.editorProps.media }\n\n  pasteImage && files.slice(0, imagePasteLimit).forEach((file) => {\n\n    if (file && file.type.indexOf('image') > -1 && editor.braftFinder) {\n      let validateResult = validateFn ? validateFn(file) : true\n      if (validateResult instanceof Promise) {\n        validateResult.then(() => {\n          editor.braftFinder.uploadImage(file, image => {\n            editor.isLiving && editor.setValue(ContentUtils.insertMedias(editor.state.editorState, [image]))\n          })\n        })\n      } else if (validateResult) {\n        editor.braftFinder.uploadImage(file, image => {\n          editor.isLiving && editor.setValue(ContentUtils.insertMedias(editor.state.editorState, [image]))\n        })\n      }\n    }\n\n  })\n\n  if (files[0] && files[0].type.indexOf('image') > -1 && pasteImage) {\n    return 'handled'\n  }\n\n  return 'not-handled'\n\n}\n\nexport const droppedFilesHandlers = (selectionState, files, editor) => {\n\n  if (editor.editorProps.handleDroppedFiles && editor.editorProps.handleDroppedFiles(selectionState, files, editor) === 'handled') {\n    return 'handled'\n  }\n\n  return handleFiles(files, editor)\n\n}\n\nexport const pastedFilesHandlers = (files, editor) => {\n\n  if (editor.editorProps.handlePastedFiles && editor.editorProps.handlePastedFiles(files, editor) === 'handled') {\n    return 'handled'\n  }\n\n  return handleFiles(files, editor)\n\n}\n\nexport const copyHandlers = (event, editor) => {\n\n  const blockMap = getFragmentFromSelection(editor.state.editorState)\n\n  if (blockMap && blockMap.toArray) {\n\n    try {\n\n      const tempContentState = ContentState.createFromBlockArray(blockMap.toArray())\n      const tempEditorState = EditorState.createWithContent(tempContentState)\n      const clipboardData = (event.clipboardData || window.clipboardData || event.originalEvent.clipboardData)\n\n      tempEditorState.setConvertOptions(editor.state.editorState.convertOptions)\n\n      clipboardData.setData('text/html', tempEditorState.toHTML())\n      clipboardData.setData('text/plain', tempEditorState.toText())\n\n      event.preventDefault()\n\n    } catch (error) {\n      console.warn(error)\n    }\n\n  }\n\n}\n\nexport const pastedTextHandlers = (text, html, editorState, editor) => {\n\n  if (editor.editorProps.handlePastedText && editor.editorProps.handlePastedText(text, html, editorState, editor) === 'handled') {\n    return 'handled'\n  }\n\n  if (!html || editor.editorProps.stripPastedStyles) {\n    return false\n  }\n\n  const tempColors = ColorUtils.detectColorsFromHTMLString(html)\n\n  editor.setState({\n    tempColors: [...editor.state.tempColors, ...tempColors].filter(item => editor.editorProps.colors.indexOf(item) === -1).filter((item, index, array) => array.indexOf(item) === index)\n  }, () => {\n    editor.setValue(ContentUtils.insertHTML(editorState, html, 'paste'))\n  })\n\n  return 'handled'\n\n}\n","// TODO\n// - block-style和atomic类型的扩展支持\n\nimport React from 'react'\n\nconst extensionControls = []\nconst extensionDecorators = []\n\nconst propInterceptors = []\n\nconst extensionBlockRenderMaps = []\nconst extensionBlockRendererFns= []\n\nconst extensionInlineStyleMaps = []\nconst extensionInlineStyleFns = []\n\nconst extensionEntities = []\n\nconst inlineStyleImporters = []\nconst inlineStyleExporters = []\nconst blockImporters = []\nconst blockExporters = []\n\nconst filterByEditorId = (items, editorId) => {\n\n  if (!editorId) {\n    return items.filter(item => !item.includeEditors).map(item => item.data)\n  }\n\n  return items.map(item => {\n\n    if (!item.includeEditors && !item.excludeEditors) {\n      return item.data\n    }\n\n    if (item.includeEditors) {\n      return item.includeEditors.indexOf(editorId) !== -1 ? item.data : false\n    }\n\n    if (item.excludeEditors) {\n      return item.excludeEditors.indexOf(editorId) !== -1 ? false : item.data\n    }\n\n    return false\n\n  }).filter(item => item)\n\n}\n\nexport const getPropInterceptors = (editorId) => filterByEditorId(propInterceptors, editorId)\n\nexport const getExtensionControls = (editorId) => filterByEditorId(extensionControls, editorId)\n\nexport const getExtensionDecorators = (editorId) => filterByEditorId(extensionDecorators, editorId, 'decorators')\n\nexport const getExtensionBlockRenderMaps = (editorId) => filterByEditorId(extensionBlockRenderMaps, editorId)\n\nexport const getExtensionBlockRendererFns = (editorId) => filterByEditorId(extensionBlockRendererFns, editorId)\n\nexport const getExtensionInlineStyleMap = (editorId) => {\n\n  let inlineStyleMap = {}\n\n  filterByEditorId(extensionInlineStyleMaps, editorId).forEach(item => {\n    inlineStyleMap[item.inlineStyleName] = item.styleMap\n  })\n\n  return inlineStyleMap\n\n}\n\nexport const getExtensionInlineStyleFns = (editorId) => filterByEditorId(extensionInlineStyleFns, editorId)\n\nexport const compositeStyleImportFn = (styleImportFn, editorId) => (nodeName, node, style) => {\n\n  filterByEditorId(inlineStyleImporters, editorId).forEach(styleImporter => {\n    if (styleImporter.importer && styleImporter.importer(nodeName, node)) {\n      style = style.add(styleImporter.inlineStyleName)\n    }\n  })\n\n  return styleImportFn ? styleImportFn(nodeName, node, style) : style\n\n}\n\nexport const compositeStyleExportFn = (styleExportFn, editorId) => (style) => {\n\n  style = style.toUpperCase()\n  let result = styleExportFn ? styleExportFn(style) : undefined\n\n  if (result) {\n    return result\n  }\n\n  filterByEditorId(inlineStyleExporters, editorId).find((item) => {\n    if (item.inlineStyleName === style) {\n      result = item.exporter\n      return true\n    }\n  })\n\n  return result\n\n}\n\nexport const compositeEntityImportFn = (entityImportFn, editorId) => (nodeName, node, createEntity, source) => {\n\n  let result = entityImportFn ? entityImportFn(nodeName, node, createEntity, source) : null\n\n  if (result) {\n    return result\n  }\n\n  filterByEditorId(extensionEntities, editorId).find(entityItem => {\n    const matched = entityItem.importer ? entityItem.importer(nodeName, node, source) : null\n    matched && (result = createEntity(entityItem.entityType, matched.mutability || 'MUTABLE', matched.data || {}))\n    return !!matched\n  })\n\n  return result\n\n}\n\nexport const compositeEntityExportFn = (entityExportFn, editorId) => (entity, originalText) => {\n\n  let result = entityExportFn ? entityExportFn(entity, originalText) : undefined\n\n  if (result) {\n    return result\n  }\n\n  const entityType = entity.type.toUpperCase()\n\n  filterByEditorId(extensionEntities, editorId).find(entityItem => {\n    if (entityItem.entityType === entityType) {\n      result = entityItem.exporter ? entityItem.exporter(entity, originalText) : undefined\n      return true\n    }\n  })\n\n  return result\n\n}\n\nexport const compositeBlockImportFn = (blockImportFn, editorId) => (nodeName, node, source) => {\n\n  let result = blockImportFn ? blockImportFn(nodeName, node, source) : null\n\n  if (result) {\n    return result\n  }\n\n  filterByEditorId(blockImporters, editorId).find(blockImporter => {\n    const matched = blockImporter.importer ? blockImporter.importer(nodeName, node, source) : undefined\n    matched && (result = matched)\n    return !!matched\n  })\n\n  return result\n\n}\n\nexport const compositeBlockExportFn = (blockExportFn, editorId) => (contentState, block) => {\n\n  let result = blockExportFn ? blockExportFn(contentState, block) : null\n\n  if (result) {\n    return result\n  }\n\n  filterByEditorId(blockExporters, editorId).find(blockExporter => {\n    const matched = blockExporter.exporter ? blockExporter.exporter(contentState, block) : undefined\n    matched && (result = matched)\n    return !!matched\n  })\n\n  return result\n\n}\n\nconst useExtension = (extension) => {\n\n  if (extension instanceof Array) {\n    extension.forEach(useExtension)\n    return false\n  }\n\n  if(!extension || !extension.type || typeof extension.type !== 'string') {\n    return false\n  }\n\n  const { includeEditors, excludeEditors } = extension\n\n  if (extension.type === 'control') {\n\n    extensionControls.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: extension.control\n    })\n\n  } else if (extension.type === 'inline-style') {\n\n    const inlineStyleName = extension.name.toUpperCase()\n\n    if (extension.control) {\n      extensionControls.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          key: inlineStyleName,\n          type: 'inline-style',\n          command: inlineStyleName,\n          ...extension.control\n        }\n      })\n    }\n\n    if (extension.style) {\n      extensionInlineStyleMaps.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          inlineStyleName: inlineStyleName,\n          styleMap: extension.style\n        }\n      })\n    }\n\n    if (extension.styleFn) {\n      extensionInlineStyleFns.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          inlineStyleName: inlineStyleName,\n          styleFn: extension.styleFn\n        }\n      })\n    }\n\n    if (extension.importer) {\n      inlineStyleImporters.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          inlineStyleName: inlineStyleName,\n          importer: extension.importer\n        }\n      })\n    }\n\n    inlineStyleExporters.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: {\n        inlineStyleName: inlineStyleName,\n        exporter: extension.exporter ? extension.exporter(extension) : <span style={extension.style}/>\n      }\n    })\n\n  } else if (extension.type === 'block-style') {\n    // TODO\n  } else if (extension.type === 'entity') {\n\n    const entityType = extension.name.toUpperCase()\n\n    if (extension.control) {\n      extensionControls.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: typeof extension.control === 'function' ? extension.control : {\n          key: entityType,\n          type: 'entity',\n          command: entityType,\n          data: {\n            mutability: extension.mutability || 'MUTABLE',\n            data: extension.data || {},\n          },\n          ...extension.control\n        }\n      })\n    }\n\n    extensionEntities.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: {\n        entityType: entityType,\n        importer: extension.importer,\n        exporter: extension.exporter\n      }\n    })\n\n    extensionDecorators.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: {\n        type: 'entity',\n        decorator: {\n          key: entityType,\n          component: extension.component\n        }\n      }\n    })\n\n  } else if (extension.type === 'block') {\n\n    const blockType = extension.name\n\n    if (extension.renderMap) {\n      extensionBlockRenderMaps.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          blockType: blockType,\n          renderMap: extension.renderMap\n        }\n      })\n    }\n\n    if (extension.rendererFn) {\n      extensionBlockRendererFns.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          blockType: blockType,\n          rendererFn: extension.rendererFn\n        }\n      })\n    }\n\n    if (extension.importer) {\n      blockImporters.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          blockType: blockType,\n          importer: extension.importer\n        }\n      })\n    }\n\n    if (extension.exporter) {\n      blockExporters.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          blockType: blockType,\n          exporter: extension.exporter\n        }\n      })\n    }\n\n  } else if (extension.type === 'atomic') {\n    // TODO\n  } else if (extension.type === 'decorator') {\n\n    const { decorator } = extension\n\n    if (decorator && decorator.strategy && decorator.component) {\n      extensionDecorators.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          type: 'strategy',\n          decorator: decorator\n        }\n      })\n    } else if (decorator && decorator.getDecorations) {\n      extensionDecorators.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          type: 'class',\n          decorator: decorator\n        }\n      })\n    }\n\n  } else if (extension.type === 'prop-interception') {\n\n    propInterceptors.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: extension.interceptor\n    })\n\n  }\n\n}\n\nexport const createExtensibleEditor = (BraftEditor) => {\n\n  BraftEditor.use = useExtension\n\n  return BraftEditor\n\n}","import React from 'react'\nimport { Map } from 'immutable'\nimport { DefaultDraftBlockRenderMap } from 'draft-js'\nimport { getExtensionBlockRenderMaps } from 'helpers/extension'\n\nexport default (props, blockRenderMap) => {\n\n  let customBlockRenderMap = Map({\n    'atomic': {\n      element: ''\n    },\n    'code-block': {\n      element: 'code',\n      wrapper: <pre className=\"braft-code-block\"/>\n    }\n  })\n\n  try {\n\n    const extensionBlockRenderMaps = getExtensionBlockRenderMaps(props.editorId)\n\n    customBlockRenderMap = extensionBlockRenderMaps.reduce((customBlockRenderMap, item) => {\n      return customBlockRenderMap.merge(typeof item.renderMap === 'function' ? item.renderMap(props) : item.renderMap)\n    }, customBlockRenderMap)\n\n    if (blockRenderMap) {\n      if (typeof blockRenderMap === 'function') {\n        customBlockRenderMap = customBlockRenderMap.merge(blockRenderMap(props))\n      } else {\n        customBlockRenderMap = customBlockRenderMap.merge(blockRenderMap)\n      }\n    }\n\n    customBlockRenderMap = DefaultDraftBlockRenderMap.merge(customBlockRenderMap)\n\n  } catch (error) {\n    console.warn(error)\n  }\n\n  return customBlockRenderMap\n\n}","import './style.scss'\nimport React from 'react'\n\nexport default (props) => {\n\n  const { active, onClick, className } = props\n\n  return (\n    <div onClick={() => onClick()} className={'bf-switch ' + className + (active ? ' active' : '')}></div>\n  )\n\n}\n","import React from 'react'\n\nexport default (lang, editor) => [\n  {\n    key: 'undo',\n    title: lang.controls.undo,\n    text: <i className=\"bfi-undo\"></i>,\n    type: 'editor-method',\n    command: 'undo'\n  }, {\n    key: 'redo',\n    title: lang.controls.redo,\n    text: <i className=\"bfi-redo\"></i>,\n    type: 'editor-method',\n    command: 'redo'\n  }, {\n    key: 'remove-styles',\n    title: lang.controls.removeStyles,\n    text: <i className=\"bfi-format_clear\"></i>,\n    type: 'editor-method',\n    command: 'removeSelectionInlineStyles'\n  }, {\n    key: 'hr',\n    title: lang.controls.hr,\n    text: <i className=\"bfi-hr\"></i>,\n    type: 'editor-method',\n    command: 'insertHorizontalLine'\n  }, {\n    key: 'bold',\n    title: lang.controls.bold,\n    text: <i className=\"bfi-bold\"></i>,\n    type: 'inline-style',\n    command: 'bold'\n  }, {\n    key: 'italic',\n    title: lang.controls.italic,\n    text: <i className=\"bfi-italic\"></i>,\n    type: 'inline-style',\n    command: 'italic'\n  }, {\n    key: 'underline',\n    title: lang.controls.underline,\n    text: <i className=\"bfi-underlined\"></i>,\n    type: 'inline-style',\n    command: 'underline'\n  }, {\n    key: 'strike-through',\n    title: lang.controls.strikeThrough,\n    text: <i className=\"bfi-strikethrough\"></i>,\n    type: 'inline-style',\n    command: 'strikethrough',\n  }, {\n    key: 'superscript',\n    title: lang.controls.superScript,\n    text: <i className=\"bfi-superscript\"></i>,\n    type: 'inline-style',\n    command: 'superscript'\n  }, {\n    key: 'subscript',\n    title: lang.controls.subScript,\n    text: <i className=\"bfi-subscript\"></i>,\n    type: 'inline-style',\n    command: 'subscript'\n  }, {\n    key: 'headings',\n    title: lang.controls.headings,\n    type: 'headings',\n  }, {\n    key: 'blockquote',\n    title: lang.controls.blockQuote,\n    text: <i className=\"bfi-quote\"></i>,\n    type: 'block-type',\n    command: 'blockquote',\n  }, {\n    key: 'code',\n    title: lang.controls.code,\n    text: <i className=\"bfi-code\"></i>,\n    type: 'block-type',\n    command: 'code-block'\n  }, {\n    key: 'list-ul',\n    title: lang.controls.unorderedList,\n    text: <i className=\"bfi-list\"></i>,\n    type: 'block-type',\n    command: 'unordered-list-item'\n  }, {\n    key: 'list-ol',\n    title: lang.controls.orderedList,\n    text: <i className=\"bfi-list-numbered\"></i>,\n    type: 'block-type',\n    command: 'ordered-list-item'\n  }, {\n    key: 'link',\n    title: lang.controls.link,\n    type: 'link'\n  }, {\n    key: 'text-color',\n    title: lang.controls.color,\n    type: 'text-color'\n  }, {\n    key: 'line-height',\n    title: lang.controls.lineHeight, \n    type: 'line-height'\n  }, {\n    key: 'letter-spacing',\n    title: lang.controls.letterSpacing,\n    type: 'letter-spacing'\n  }, {\n    key: 'text-indent',\n    title: lang.controls.textIndent,\n    type: 'text-indent'\n  },{\n    key: 'font-size',\n    title: lang.controls.fontSize,\n    type: 'font-size'\n  }, {\n    key: 'font-family',\n    title: lang.controls.fontFamily,\n    type: 'font-family'\n  }, {\n    key: 'text-align',\n    title: lang.controls.textAlign,\n    type: 'text-align'\n  }, {\n    key: 'media',\n    title: lang.controls.media,\n    text: <i className=\"bfi-media\"></i>,\n    type: 'media'\n  }, {\n    key: 'emoji',\n    title: lang.controls.emoji,\n    text: <i className=\"bfi-emoji\"></i>,\n    type: 'emoji'\n  }, {\n    key: 'clear',\n    title: lang.controls.clear,\n    text: <i className=\"bfi-clear_all\"></i>,\n    type: 'editor-method',\n    command: 'clearEditorContent'\n  }, {\n    key: 'fullscreen',\n    title: editor.state.isFullscreen ? lang.controls.exitFullscreen : lang.controls.fullscreen,\n    text: <i className={editor.state.isFullscreen ? 'bfi-fullscreen-exit' : 'bfi-fullscreen'}></i>,\n    type: 'editor-method',\n    command: 'toggleFullscreen'\n  }, {\n    key: 'modal',\n    type: 'modal',\n  }, {\n    key: 'button',\n    type: 'button',\n  }, {\n    key: 'dropdown',\n    type: 'dropdown',\n  }, {\n    key: 'component',\n    type: 'component',\n  }\n]\n\nexport const imageControlItems = {\n  'float-left': {\n    text: <span data-float=\"left\">&#xe91e;</span>,\n    command: 'setImageFloat|left'\n  },\n  'float-right': {\n    text: <span data-float=\"right\">&#xe914;</span>,\n    command: 'setImageFloat|right'\n  },\n  'align-left': {\n    text: <span data-align=\"left\">&#xe027;</span>,\n    command: 'setImageAlignment|left'\n  },\n  'align-center': {\n    text: <span data-align=\"center\">&#xe028;</span>,\n    command: 'setImageAlignment|center'\n  },\n  'align-right': {\n    text: <span data-align=\"right\">&#xe029;</span>,\n    command: 'setImageAlignment|right'\n  },\n  'size': {\n    text: <span>&#xe3c2;</span>,\n    command: 'toggleSizeEditor'\n  },\n  'link': {\n    text: <span>&#xe91a;</span>,\n    command: 'toggleLinkEditor'\n  },\n  'remove': {\n    text: <span>&#xe9ac;</span>,\n    command: 'removeImage'\n  }\n}","import './style.scss'\nimport React from 'react'\nimport * as ContentUtils  from 'utils/content'\nimport Switch from 'components/common/Switch'\nimport { imageControlItems } from 'configs/controls'\n\nexport default class Image extends React.Component {\n\n  state = {\n    toolbarVisible: false,\n    toolbarOffset: 0,\n    linkEditorVisible: false,\n    sizeEditorVisible: false,\n    tempLink: null,\n    tempWidth: null,\n    tempHeight: null\n  }\n  initialLeft\n  initialTop\n  initialWidth\n  initialHeight\n  reSizeType\n\n  changeSize = e => {\n    let type = this.reSizeType\n    if(!this.initialLeft){\n      this.initialLeft = e.screenX\n      this.initialTop = e.screenY\n    }\n    if(type === 'rightbottom'){\n      this.initialHeight +=  e.screenY-this.initialTop\n      this.initialWidth +=  e.screenX-this.initialLeft\n    }\n    if(type === 'leftbottom'){\n      this.initialHeight +=  e.screenY-this.initialTop\n      this.initialWidth +=  -e.screenX+this.initialLeft\n    }\n\n\n    this.initialLeft = e.screenX\n    this.initialTop = e.screenY\n  }\n\n  moveImage = (e) => {\n\n    this.changeSize(e)\n\n    this.setState({\n      tempWidth: Math.abs(this.initialWidth),\n      tempHeight: Math.abs(this.initialHeight)\n    })\n  }\n\n  upImage = () => {\n    this.confirmImageSize()\n    document.removeEventListener('mousemove',this.moveImage)\n    document.removeEventListener('mouseup',this.upImage)\n  }\n\n  repareChangeSize = type => (e) => {\n    this.reSizeType = type\n    const imageRect = this.imageElement.getBoundingClientRect()\n    this.initialLeft = this.initialTop = 0\n    this.initialWidth = imageRect.width\n    this.initialHeight = imageRect.height\n    e.preventDefault()\n    document.addEventListener('mousemove', this.moveImage)\n    document.addEventListener('mouseup', this.upImage)\n  }\n\n  render () {\n\n    const { mediaData, language, imageControls, imageResizable } = this.props\n    const { toolbarVisible, toolbarOffset, linkEditorVisible, sizeEditorVisible, tempWidth, tempHeight } = this.state\n    const blockData = this.props.block.getData()\n\n    let float = blockData.get('float')\n    let alignment = blockData.get('alignment')\n    let { url, link, link_target, width, height, meta } = mediaData\n    let imageStyles = {}\n    let clearFix = false\n\n    if (float) {\n      alignment = null\n    } else if (alignment === 'left') {\n      imageStyles.float = 'left'\n      clearFix = true\n    } else if (alignment === 'right') {\n      imageStyles.float = 'right'\n      clearFix = true\n    } else if (alignment === 'center') {\n      imageStyles.textAlign = 'center'\n    } else {\n      imageStyles.float = 'left'\n      clearFix = true\n    }\n\n    const renderedControlItems = imageControls.map((item, index) => {\n\n      if (typeof item === 'string' && imageControlItems[item]) {\n        return (\n          <a className={item === 'link' && link ? 'active' : ''} key={index} onClick={() => this.executeCommand(imageControlItems[item].command)}>\n            {imageControlItems[item].text}\n          </a>\n        )\n      } else if (item && (item.render || item.text)) {\n        return item.render ? item.render(mediaData, this.props.block) : <a key={index} onClick={() => item.onClick && this.executeCommand(item.onClick)}>{item.text}</a>\n      } else {\n        return null\n      }\n\n    })\n\n    return (\n      <div className='bf-media'>\n        <div\n          style={imageStyles}\n          draggable={true}\n          onMouseEnter={this.showToolbar}\n          onMouseMove={this.showToolbar}\n          onMouseLeave={this.hideToolbar}\n          onDragStart={this.handleDragStart}\n          onDragEnd={this.handleDragEnd}\n          ref={instance => this.mediaEmbederInstance = instance}\n          className='bf-image'\n        >\n          {toolbarVisible ? (\n            <div\n              style={{marginLeft: toolbarOffset}}\n              ref={instance => this.toolbarElement = instance}\n              data-float={float}\n              data-align={alignment}\n              className='bf-media-toolbar'\n            >\n              {linkEditorVisible ? (\n                <div className='bf-image-link-editor'>\n                  <div className='editor-input-group'>\n                    <input type='text' placeholder={language.linkEditor.inputWithEnterPlaceHolder} onKeyDown={this.handleLinkInputKeyDown} onChange={this.setImageLink} defaultValue={link}/>\n                    <button type='button' onClick={this.confirmImageLink}>{language.base.confirm}</button>\n                  </div>\n                  <div className='switch-group'>\n                    <Switch\n                      active={link_target === '_blank'}\n                      onClick={() => this.setImageLinkTarget(link_target)}\n                    />\n                    <label>{language.linkEditor.openInNewWindow}</label>\n                  </div>\n                </div>\n              ) : null}\n              {sizeEditorVisible ? (\n                <div className='bf-image-size-editor'>\n                  <div className='editor-input-group'>\n                    <input type='text' placeholder={language.base.width} onKeyDown={this.handleSizeInputKeyDown} onChange={this.setImageWidth} defaultValue={width}/>\n                    <input type='text' placeholder={language.base.height} onKeyDown={this.handleSizeInputKeyDown} onChange={this.setImageHeight} defaultValue={height}/>\n                    <button type='button' onClick={this.confirmImageSize}>{language.base.confirm}</button>\n                  </div>\n                </div>\n              ) : null}\n              {renderedControlItems}\n              <i style={{marginLeft: toolbarOffset * -1}} className='bf-media-toolbar-arrow'></i>\n            </div>\n          ) : null}\n          <div style={{position:'relative',width: `${width}px`,height: `${height}px`,display: 'inline-block'}}>\n            <img\n              ref={instance => this.imageElement = instance}\n              src={url}\n              width={width}\n              height={height}\n              {...meta}\n            />\n            {toolbarVisible && imageResizable ?\n              <div\n                className='bf-csize-icon right-bottom'\n                onMouseDown={this.repareChangeSize('rightbottom')}\n              /> : null}\n            {toolbarVisible &&  imageResizable ?\n              <div\n                className='bf-csize-icon left-bottom'\n                onMouseDown={this.repareChangeSize('leftbottom')}\n              /> : null}\n            <div\n              className={`bf-pre-csize ${this.reSizeType}`}\n              style={{width: `${tempWidth}px`, height:`${tempHeight}px`}}\n            />\n          </div>\n        </div>\n        {clearFix && <div className='clearfix' style={{clear:'both',height:0,lineHeight:0,float:'none'}}></div>}\n      </div>\n    )\n\n  }\n\n  lockEditor () {\n    this.props.editor.lockOrUnlockEditor(true)\n  }\n\n  unlockEditor () {\n    this.props.editor.lockOrUnlockEditor(false)\n  }\n\n  calcToolbarOffset () {\n\n    const { getContainerNode, containerNode } = this.props\n    const container = getContainerNode ? getContainerNode() : containerNode\n\n    if (!container) {\n      return 0\n    }\n\n    const viewRect = container.querySelector('.bf-content').getBoundingClientRect()\n    const toolbarRect = this.toolbarElement.getBoundingClientRect()\n    const imageRect = this.imageElement.getBoundingClientRect()\n\n    const right = viewRect.right - (imageRect.right - imageRect.width / 2 + toolbarRect.width / 2)\n    const left = (imageRect.left + imageRect.width / 2 - toolbarRect.width / 2) - viewRect.left\n\n    if (right < 10) {\n      return right - 10\n    } else if (left < 10) {\n      return left * -1 + 10\n    } else {\n      return 0\n    }\n\n  }\n\n  preventDragEvent = (event) => {\n    event.stopPropagation()\n    event.preventDefault()\n  }\n\n  handleDragStart = () => {\n\n    if (this.props.editor.editorProps.readOnly || this.props.editor.editorProps.disabled) {\n      return false\n    }\n\n    window.__BRAFT_DRAGING__IMAGE__ = {\n      block: this.props.block,\n      mediaData: {\n        type: 'IMAGE',\n        ...this.props.mediaData\n      }\n    }\n\n    this.setState({\n      toolbarVisible: false\n    }, () => {\n      this.unlockEditor()\n    })\n\n    return true\n\n  }\n\n  handleDragEnd = () => {\n\n    window.__BRAFT_DRAGING__IMAGE__ = null\n    return false\n\n  }\n\n  executeCommand = (command) => {\n\n    if (typeof command === 'string') {\n      const [method, param] = command.split('|')\n      this[method] && this[method](param)\n    } else if (typeof command === 'function') {\n      command(this.props.block, this.props.mediaData, this.props.editor.getValue())\n    }\n\n  }\n\n  removeImage = () => {\n    this.props.editor.setValue(ContentUtils.removeBlock(this.props.editor.getValue(), this.props.block))\n    this.unlockEditor()\n  }\n\n  toggleLinkEditor = () => {\n    this.setState({\n      linkEditorVisible: !this.state.linkEditorVisible,\n      sizeEditorVisible: false\n    })\n  }\n\n  toggleSizeEditor = () => {\n    this.setState({\n      linkEditorVisible: false,\n      sizeEditorVisible: !this.state.sizeEditorVisible\n    })\n  }\n\n  handleLinkInputKeyDown = (e) => {\n\n    if (e.keyCode === 13) {\n      this.confirmImageLink()\n    } else {\n      return\n    }\n  }\n\n  setImageLink = (e) => {\n    this.setState({ tempLink: e.currentTarget.value })\n    return\n  }\n\n  setImageLinkTarget (link_target) {\n\n    const hookReturns = this.props.hooks('set-image-link-target', link_target)(link_target)\n\n    if (hookReturns === false) {\n      return false\n    }\n\n    if (typeof hookReturns === 'string') {\n      link_target = hookReturns\n    }\n\n    link_target = link_target === '_blank' ? '' : '_blank'\n    this.props.editor.setValue(ContentUtils.setMediaData(this.props.editor.getValue(), this.props.entityKey, { link_target }))\n    window.setImmediate(this.props.editor.forceRender)\n  }\n\n  confirmImageLink = () => {\n\n    let { tempLink: link } = this.state\n    const hookReturns = this.props.hooks('set-image-link', link)(link)\n\n    if (hookReturns === false) {\n      return false\n    }\n\n    if (typeof hookReturns === 'string') {\n      link = hookReturns\n    }\n\n    if (link !== null) {\n      this.props.editor.setValue(ContentUtils.setMediaData(this.props.editor.getValue(), this.props.entityKey, { link }))\n      window.setImmediate(this.props.editor.forceRender)\n    }\n  }\n\n  handleSizeInputKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.confirmImageSize()\n    } else {\n      return\n    }\n  }\n\n  setImageWidth = ({ currentTarget }) => {\n\n    let { value } = currentTarget\n\n    value && !isNaN(value) && (value = value + 'px')\n\n    this.setState({\n      tempWidth: value\n    })\n\n    return\n  }\n\n  setImageHeight = ({ currentTarget }) => {\n\n    let { value } = currentTarget\n\n    value && !isNaN(value) && (value = value + 'px')\n\n    this.setState({\n      tempHeight: value\n    })\n\n    return\n  }\n\n  confirmImageSize = () => {\n\n    const { tempWidth: width, tempHeight: height } = this.state\n    let newImageSize = {}\n\n    width !== null && (newImageSize.width = width)\n    height !== null && (newImageSize.height = height)\n\n    const hookReturns = this.props.hooks('set-image-size', newImageSize)(newImageSize)\n\n    if (hookReturns === false) {\n      return false\n    }\n\n    if (hookReturns && (hookReturns.width || hookReturns.height)) {\n      newImageSize = hookReturns\n    }\n\n    this.props.editor.setValue(ContentUtils.setMediaData(this.props.editor.getValue(), this.props.entityKey, newImageSize))\n    window.setImmediate(this.props.editor.forceRender)\n  }\n\n  setImageFloat = (float) => {\n\n    const hookReturns = this.props.hooks('set-image-float', float)(float)\n\n    if (hookReturns === false) {\n      return false\n    }\n\n    if (typeof hookReturns === 'string') {\n      float = hookReturns\n    }\n\n    this.props.editor.setValue(ContentUtils.setMediaPosition(this.props.editor.getValue(), this.props.block, { float }))\n    this.unlockEditor()\n  }\n\n  setImageAlignment = (alignment) => {\n\n    const hookReturns = this.props.hooks('set-image-alignment', alignment)(alignment)\n\n    if (hookReturns === false) {\n      return false\n    }\n\n    if (typeof hookReturns === 'string') {\n      alignment = hookReturns\n    }\n\n    this.props.editor.setValue(ContentUtils.setMediaPosition(this.props.editor.getValue(), this.props.block, { alignment }))\n    this.unlockEditor()\n  }\n\n  showToolbar = (event) => {\n\n    if (this.props.editor.editorProps.readOnly || this.props.editor.editorProps.disabled) {\n      return false\n    }\n\n    event.preventDefault()\n\n    if (!this.state.toolbarVisible) {\n      this.setState({\n        toolbarVisible: true\n      }, () => {\n        this.lockEditor()\n        this.setState({ toolbarOffset: this.calcToolbarOffset() })\n      })\n    }\n  }\n\n  hideToolbar = (event) => {\n\n    event.preventDefault()\n\n    this.setState({\n      toolbarVisible: false\n    }, () => {\n      this.unlockEditor()\n      // this.props.editor.requestFocus()\n    })\n  }\n\n}\n","import './style.scss'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport * as BaseUtils from 'utils/base'\n\nexport default class Modal extends React.Component {\n\n  constructor (props) {\n\n    super(props)\n    this.active = false\n    this.componentId = 'BRAFT-MODAL-' + BaseUtils.UniqueIndex()\n\n  }\n\n  static defaultProps = {\n    showFooter: true,\n    closeOnBlur: true\n  }\n\n  componentDidMount () {\n\n    if (this.props.visible) {\n      this.active = true\n      this.renderComponent(this.props)\n    }\n\n  }\n\n  componentWillReceiveProps (next) {\n\n    if (this.props.visible && !next.visible) {\n      this.unrenderComponent()\n    } else if (this.props.visible || next.visible) {\n      this.active = true\n      this.renderComponent(next)\n    }\n\n  }\n\n  render () {\n    return null\n  }\n\n  handleTransitionEnd = () => {\n\n    if (!this.rootElement || !this.rootElement.classList) {\n      return false\n    }\n\n    if (!this.rootElement.classList.contains('active')) {\n      ReactDOM.unmountComponentAtNode(this.rootElement) && this.rootElement.parentNode.removeChild(this.rootElement)\n    }\n\n  }\n\n  unrenderComponent () {\n    this.active = false\n    this.activeId && window.clearImmediate(this.activeId)\n    if (this.rootElement && this.rootElement.classList) {\n      this.rootElement.classList.remove('active')\n    }\n  }\n\n  renderComponent (props) {\n\n    if (!this.active) {\n      return false\n    }\n\n    let { title, className, width, height, children, component, confirmable, showFooter, showCancel, showConfirm, showClose, cancelText, confirmText, bottomText, language } = props\n\n    typeof showCancel === 'undefined' && (showCancel = true)\n    typeof showClose === 'undefined' && (showClose = true)\n    typeof showConfirm === 'undefined' && (showConfirm = true)\n    typeof showFooter === 'undefined' && (showFooter = true)\n\n    const childComponent = (\n      <div onMouseDown={this.handleMouseDown} className={'bf-modal ' + (className || '')}>\n        <div className='bf-modal-mask' onClick={this.handleMaskClick}></div>\n        <div onTransitionEnd={this.handleTransitionEnd} style={{width, height}} className='bf-modal-content'>\n          <div className='bf-modal-header'>\n            <h3 className='bf-modal-caption'>{title}</h3>\n            {showClose && <button type='button' onClick={this.close} className='bf-modal-close-button'><i className='bfi-close'></i></button>}\n          </div>\n          <div className='bf-modal-body'>{children || component}</div>\n          {showFooter ? (\n            <div className='bf-modal-footer'>\n              <div className='bf-modal-addon-text'>{bottomText}</div>\n              <div className='bf-modal-buttons'>\n                {showCancel && <button type='button' onClick={this.handleCancel} className='bf-modal-cancel'>{cancelText || language.base.cancel}</button>}\n                {showConfirm && <button type='button' onClick={this.handleConfirm} className={'bf-modal-confirm ' + (!confirmable ? 'disabled' : '')}>{confirmText || language.base.confirm}</button>}\n              </div>\n            </div>\n          ) : null}\n        </div>\n      </div>\n    )\n\n    this.rootElement = document.querySelector('#' + this.componentId)\n\n    if (!this.rootElement) {\n      this.rootElement = document.createElement('div')\n      this.rootElement.id = this.componentId\n      this.rootElement.className = 'bf-modal-root'\n      document.body.appendChild(this.rootElement)\n    }\n\n    ReactDOM.render(childComponent, this.rootElement)\n\n    this.activeId = window.setImmediate(() => {\n      this.rootElement.classList.add('active')\n    })\n\n  }\n\n  handleMouseDown = (event) => {\n\n    const tagName = event.target.tagName.toLowerCase()\n\n    if (tagName === 'input' || tagName === 'textarea') {\n      return false\n    }\n\n    event.preventDefault()\n\n  }\n\n  handleCancel = () => {\n    this.props.closeOnCancel && this.close()\n    this.props.onCancel && this.props.onCancel()\n  }\n\n  handleConfirm = () => {\n    this.props.closeOnConfirm && this.close()\n    this.props.onConfirm && this.props.onConfirm()\n  }\n\n  handleMaskClick = () => {\n    this.props.closeOnBlur && this.close()\n    this.props.onBlue && this.props.onBlue()\n  }\n\n  close = () => {\n    this.unrenderComponent()\n    this.props.onClose && this.props.onClose()\n  }\n\n}\n\nexport const showModal = (props) => {\n\n  const hostNode = document.createElement('div')\n\n  hostNode.style.display = 'none'\n  document.body.appendChild(hostNode)\n\n  props = {\n    visible: true,\n    closeOnConfirm: true,\n    closeOnCancel: true,\n    ...props\n  }\n\n  const close = () => {\n    ReactDOM.unmountComponentAtNode(hostNode) && hostNode.parentNode.removeChild(hostNode)\n  }\n\n  const onConfirm = () => {\n    props.onConfirm && props.onConfirm()\n  }\n\n  const onCancel = () => {\n    props.onCancel && props.onCancel()\n  }\n\n  const onClose = () => {\n    close()\n    props.onClose && props.onClose()\n  }\n\n  const modalInstance = ReactDOM.render(<Modal { ...props } onConfirm={onConfirm} onCancel={onCancel} onClose={onClose} />, hostNode)\n  modalInstance.destroy = close\n  modalInstance.update = modalInstance.renderComponent\n\n  return modalInstance\n\n}\n","import React from 'react'\nimport { showModal } from 'components/common/Modal'\nimport './style.scss'\n\nconst playViaModal = (title, component, language) => showModal({\n  title: title,\n  component: component,\n  language: language,\n  showFooter: false\n})\n\nconst typeIconsMap = {\n  'video': 'bfi-film',\n  'audio': 'bfi-music',\n  'embed': 'bfi-code'\n}\n\nexport default ({title, type, language, name, poster, children, onRemove}) => {\n\n  return (\n    <div className={`bf-player-holder ${type}`}>\n      <div className=\"icon-badge\">\n        <i className={typeIconsMap[type]}></i>\n        <span className=\"text\">{language.media[type]}</span>\n      </div>\n      <button onMouseDown={onRemove} className=\"button-remove\">\n        <i className=\"bfi-close\"></i>\n      </button>\n      <button onMouseDown={() => playViaModal(name ? `${title}:${name}` : title, children, language)} className=\"button-play\">\n        <i className=\"bfi-play_arrow\"></i>\n      </button>\n      {name ? <h5 className=\"bf-name\">{name}</h5> : null}\n      {poster ? <div className=\"bf-poster\" style={{backgroundImage: `url(${poster})`}}></div> : null}\n    </div>\n  )\n}\n","import './style.scss'\nimport React from 'react'\nimport PlayerModal from 'components/business/PlayerModal'\nimport * as ContentUtils  from 'utils/content'\n\nexport default class Video extends React.Component {\n\n  render () {\n\n    const { mediaData, language } = this.props\n    const { url, name, meta } = mediaData\n\n    return (\n      <div className='bf-video-wrap'>\n        <PlayerModal type=\"video\" onRemove={this.removeVideo} poster={meta ? meta.poster || '' : ''} language={language} url={url} name={name} title={language.videoPlayer.title}>\n          <div className=\"bf-video-player\">\n            <video controls poster={meta ? meta.poster || '' : ''}>\n              <source src={url} />\n            </video>\n          </div>\n        </PlayerModal>\n      </div>\n    )\n\n  }\n\n  removeVideo = () => {\n    this.props.editor.setValue(ContentUtils.removeBlock(this.props.editorState, this.props.block))\n  }\n\n}\n","import './style.scss'\nimport React from 'react'\nimport PlayerModal from 'components/business/PlayerModal'\nimport * as ContentUtils  from 'utils/content'\n\nexport default class Audio extends React.Component {\n\n  render () {\n\n    const { mediaData, language } = this.props\n    const { url, name, meta } = mediaData\n\n    return (\n      <div className='bf-audio-wrap'>\n        <PlayerModal type=\"audio\" onRemove={this.removeAudio} poster={meta ? meta.poster || '' : ''} language={language} url={url} name={name} title={language.audioPlayer.title}>\n          <div className=\"bf-audio-player\"><audio controls src={url}/></div>\n        </PlayerModal>\n      </div>\n    )\n\n  }\n\n  removeAudio = () => {\n    this.props.editor.setValue(ContentUtils.removeBlock(this.props.editorState, this.props.block))\n  }\n\n}\n","import './style.scss'\nimport React from 'react'\nimport PlayerModal from 'components/business/PlayerModal'\nimport * as ContentUtils  from 'utils/content'\n\nexport default class Embed extends React.Component {\n\n  render () {\n\n    const { mediaData, language } = this.props\n    const { name, url, meta } = mediaData\n\n    return (\n      <div className='bf-embed-wrap'>\n        <PlayerModal type=\"embed\" onRemove={this.removeEmbed} poster={meta ? meta.poster || '' : ''} language={language} url={url} name={name} title={language.videoPlayer.embedTitle}>\n          <div className='bf-embed-player' dangerouslySetInnerHTML={{ __html: url}}></div>\n        </PlayerModal>\n      </div>\n    )\n\n  }\n\n  removeEmbed = () => {\n    this.props.editor.setValue(ContentUtils.removeBlock(this.props.editorState, this.props.block))\n  }\n\n}\n","import React from 'react'\nimport * as ContentUtils from 'utils/content'\nimport './style.scss'\n\nexport default class Attachment extends React.Component {\n  render () {\n    const { mediaData } = this.props\n    const { meta: { fileSize, fileType, fileName } } = mediaData\n\n    return (\n      <div className='bf-attachment'>\n        <button onMouseDown={this.removeAttachment} className=\"button-remove\">\n          <i className='bfi-close' />\n        </button>\n        <div className={`bf-attachment-icon bf-attachment-icon-${fileType.toLowerCase()}`}>\n          {fileType}\n        </div>\n        <div className='bf-attachment-content'>\n          <div className='bf-attachment-content-title'>{fileName}</div>\n          <div className='bf-attachment-content-desc'>{fileSize}</div>\n        </div>\n      </div>\n    )\n  }\n\n  removeAttachment = () => {\n    this.props.editor.setValue(ContentUtils.removeBlock(this.props.editorState, this.props.block))\n  }\n\n}\n","import React from 'react'\nimport * as ContentUtils  from 'utils/content'\nimport './style.scss'\n\nexport default class HorizontalLine extends React.Component {\n\n  render () {\n\n    return (\n      <div className='bf-hr'>\n        <div className='bf-media-toolbar'>\n          <a onClick={this.removeHorizontalLine}>&#xe9ac;</a>\n        </div>\n      </div>\n    )\n\n  }\n\n  removeHorizontalLine = () => {\n    this.props.editor.setValue(ContentUtils.removeBlock(this.props.editorState, this.props.block))\n  }\n\n}\n","import React from 'react'\nimport Image from 'renderers/atomics/Image'\nimport Video from 'renderers/atomics/Video'\nimport Audio from 'renderers/atomics/Audio'\nimport Embed from 'renderers/atomics/Embed'\nimport Attachment from 'renderers/atomics/Attachment'\nimport HorizontalLine from 'renderers/atomics/HorizontalLine'\n\nimport { getExtensionBlockRendererFns } from 'helpers/extension'\n\nclass BlockRenderFnContext {\n  superProps\n  customBlockRendererFn\n\n  getRenderFn = (superProps, customBlockRendererFn) => {\n    this.superProps = superProps\n    this.customBlockRendererFn = customBlockRendererFn\n\n    return this.blockRendererFn\n  }\n\n  renderAtomicBlock = (props) => {\n    const { superProps } = this\n\n    const entityKey = props.block.getEntityAt(0)\n\n    if (!entityKey) {\n      return null\n    }\n\n    const entity = props.contentState.getEntity(entityKey)\n    const mediaData = entity.getData()\n    const mediaType = entity.getType()\n    const mediaProps = {\n      ...superProps,\n      block: props.block,\n      mediaData, entityKey\n    }\n\n    if (mediaType === 'IMAGE') {\n      return <Image { ...mediaProps } />\n    } else if (mediaType === 'AUDIO') {\n      return <Audio { ...mediaProps } />\n    } else if (mediaType === 'VIDEO') {\n      return <Video { ...mediaProps } />\n    } else if (mediaType === 'EMBED') {\n      return <Embed { ...mediaProps } />\n    } else if (mediaType === 'HR') {\n      return <HorizontalLine { ...mediaProps } />\n    } else if (mediaType === 'ATTACHMENT') {\n      return <Attachment {...mediaProps} />\n    }\n\n    if (superProps.extendAtomics) {\n      const atomics = superProps.extendAtomics\n      for (let i = 0; i < atomics.length; i++) {\n        if (mediaType === atomics[i].type) {\n          const Component = atomics[i].component\n          return <Component {...mediaProps} />\n        }\n      }\n    }\n\n    return null\n  }\n\n  blockRendererFn = (block) => {\n    const { customBlockRendererFn, superProps } = this\n\n    const blockType = block.getType()\n    let blockRenderer = null\n\n    if (customBlockRendererFn) {\n      blockRenderer = customBlockRendererFn(block, superProps) || null\n    }\n\n    if (blockRenderer) {\n      return blockRenderer\n    }\n\n    const extensionBlockRendererFns = getExtensionBlockRendererFns(superProps.editorId)\n\n    extensionBlockRendererFns.find(item => {\n      if (item.blockType === blockType || (item.blockType instanceof RegExp && item.blockType.test(blockType))) {\n        blockRenderer = item.rendererFn ? item.rendererFn(superProps) : null\n        return true\n      }\n    })\n\n    if (blockRenderer) {\n      return blockRenderer\n    }\n\n    if (blockType === 'atomic') {\n      blockRenderer = {\n        component: this.renderAtomicBlock,\n        editable: false\n      }\n    }\n\n    return blockRenderer\n  }\n}\n\nconst blockRenderFnContext = new BlockRenderFnContext()\nexport default blockRenderFnContext.getRenderFn\n","export default (customBlockStyleFn) => (block) => {\n\n  const blockAlignment = block.getData() && block.getData().get('textAlign')\n  const blockIndent = block.getData() && block.getData().get('textIndent')\n  const blockFloat = block.getData() && block.getData().get('float')\n\n  let result = ''\n\n  if (blockAlignment) {\n    result = `bfa-${blockAlignment}`\n  }\n\n  if (blockIndent && blockIndent !== 0) {\n    result += ` bftd-${blockIndent}`\n  }\n\n  if (blockFloat) {\n    result += ` bff-${blockFloat}`\n  }\n\n  if (customBlockStyleFn) {\n    result += (customBlockStyleFn(block) || '')\n  }\n\n  return result\n\n}","import { getExtensionInlineStyleMap } from 'helpers/extension'\n\nexport default (props, customStyleMap = {}) => {\n\n  const extensionInlineStyleMap = getExtensionInlineStyleMap(props.editorId)\n\n  return {\n    'SUPERSCRIPT': {\n      position: 'relative',\n      top: '-8px',\n      fontSize: '11px'\n    },\n    'SUBSCRIPT': {\n      position: 'relative',\n      bottom: '-8px',\n      fontSize: '11px'\n    },\n    ...extensionInlineStyleMap,\n    ...customStyleMap\n  }\n\n}","import { getExtensionInlineStyleFns } from 'helpers/extension'\n\nconst getStyleValue = (style) => style.split('-')[1]\n\nexport default (props, options) => (styles, block) => {\n\n  let output = {}\n  const { fontFamilies, unitExportFn, customStyleFn } = options\n\n  const extensionInlineStyleFns = getExtensionInlineStyleFns(props.editorId)\n\n  extensionInlineStyleFns.forEach(item => {\n    output = item.styleFn ? item.styleFn(styles, block, output) : output\n  })\n\n  output = customStyleFn ? customStyleFn(styles, block, output) : {}\n\n  styles.forEach((style) => {\n\n    if (style.indexOf('COLOR-') === 0) {\n      output.color = '#' + getStyleValue(style)\n    } else if (style.indexOf('BGCOLOR-') === 0) {\n      output.backgroundColor = '#' + getStyleValue(style)\n    } else if (style.indexOf('FONTSIZE-') === 0) {\n      output.fontSize = unitExportFn(getStyleValue(style), 'font-size', 'editor')\n    } else if (style.indexOf('LINEHEIGHT-') === 0) {\n      output.lineHeight = unitExportFn(getStyleValue(style), 'line-height', 'editor')\n    } else if (style.indexOf('LETTERSPACING-') === 0) {\n      output.letterSpacing = unitExportFn(getStyleValue(style), 'letter-spacing', 'editor')\n    } else if (style.indexOf('TEXTINDENT-') === 0) {\n      output.textIndent = unitExportFn(getStyleValue(style), 'text-indent', 'editor')\n    } else if (style.indexOf('FONTFAMILY-') === 0) {\n      output.fontFamily = (fontFamilies.find(item => item.name.toUpperCase() === getStyleValue(style)) || {}).family || ''\n    }\n\n  })\n\n  return output\n\n}","import React from 'react'\n\nexport default (props) => {\n\n  const { children, entityKey, contentState } = props\n  const { href, target } = contentState.getEntity(entityKey).getData()\n\n  return (\n    <span className='bf-link-wrap'>\n      <a onClick={(event) => viewLink(event, href)} className='bf-link' href={href} target={target}>{children}</a>\n    </span>\n  )\n\n}\n\nconst viewLink = (event, link) => {\n  // 当按下Ctrl/command键时，点击打开链接文字中的url\n  if (event.getModifierState('Control') \n      || event.getModifierState('Meta')) {\n    const tempLink = document.createElement('a')\n    tempLink.href = link\n    tempLink.target = event.currentTarget.target\n    tempLink.click()\n  }\n}","import { CompositeDecorator } from 'draft-js'\nimport CombineDecorators from 'draft-js-multidecorators'\nimport Immutable from 'immutable'\nimport { getExtensionDecorators } from 'helpers/extension'\nimport Link from './Link'\n\nconst KEY_SEPARATOR = '-'\n\nCombineDecorators.prototype.getDecorations = function (block, contentState) {\n\n  const decorations = Array(block.getText().length).fill(null)\n\n  this.decorators.forEach((decorator, i) => {\n\n    decorator.getDecorations(block, contentState).forEach((key, offset) => {\n      if (!key) {\n        return\n      }\n      key = i + KEY_SEPARATOR + key\n      decorations[offset] = key\n    })\n\n  })\n\n  return Immutable.List(decorations)\n\n}\n\nconst builtinDecorators = [\n  {\n    type: 'entity',\n    decorator: {\n      key: 'LINK',\n      component: Link\n    }\n  }\n]\n\nconst createStrategy = (type) => (block, callback, contentState) => {\n\n  block.findEntityRanges((character) => {\n    const entityKey = character.getEntity()\n    return (\n      entityKey !== null &&\n      contentState.getEntity(entityKey).getType() === type\n    )\n  }, callback)\n\n}\n\nexport default (editorId) => {\n\n  const extensionDecorators = getExtensionDecorators(editorId)\n\n  const entityDecorators = [\n    ...builtinDecorators,\n    ...extensionDecorators.filter(item => item.type === 'entity')\n  ]\n\n  const strategyDecorators = extensionDecorators.filter(item => item.type === 'strategy')\n  const classDecorators = extensionDecorators.filter(item => item.type === 'class')\n\n  return new CombineDecorators([\n    // combine decorator classes\n    ...classDecorators.map(item => item.decorator),\n    // combine decorators created with strategy\n    new CompositeDecorator(strategyDecorators.map(item => item.decorator)),\n    // combine decorators for entities\n    new CompositeDecorator(entityDecorators.map(item => ({\n      strategy: createStrategy(item.decorator.key),\n      component: item.decorator.component\n    })))\n  ])\n\n}","import _getBlockRenderMap from './block/blockRenderMap'\nimport _getBlockRendererFn from './block/blockRendererFn'\nimport _getBlockStyleFn from './block/blockStyleFn'\nimport _getCustomStyleMap from './inline/inlineStyleMap'\nimport _getCustomStyleFn from './inline/inlineStyleFn'\nimport _getDecorators from './decorators'\n\nexport const getBlockRenderMap = _getBlockRenderMap\nexport const getBlockRendererFn = _getBlockRendererFn\nexport const getBlockStyleFn = _getBlockStyleFn\nexport const getCustomStyleMap = _getCustomStyleMap\nexport const getCustomStyleFn = _getCustomStyleFn\nexport const getDecorators = _getDecorators","import * as BaseUtils  from 'utils/base'\n\nlet resizeEventHandlers = []\nlet responsiveHelperInited = false\nlet debounce = false\n\nexport default {\n\n  resolve (eventHandler) {\n    let id = BaseUtils.UniqueIndex()\n    resizeEventHandlers.push({ id, eventHandler })\n    return id\n  },\n\n  unresolve (id) {\n    resizeEventHandlers = resizeEventHandlers.filter(item => item.id !== id)\n  }\n\n}\n\nif (!responsiveHelperInited && typeof window === 'object') {\n\n  window.addEventListener('resize', (event) => {\n    clearTimeout(debounce)\n    debounce = setTimeout(() => {\n      resizeEventHandlers.map((item) => {\n        typeof item.eventHandler === 'function' && item.eventHandler(event)\n      })\n      debounce = false\n    }, 100)\n  })\n\n  responsiveHelperInited = true\n\n}\n","import './style.scss'\nimport React from 'react'\nimport ResponsiveHelper from 'helpers/responsive'\n\nexport default class DropDown extends React.Component {\n\n  responsiveResolveId = null\n  dropDownHandlerElement = null\n  dropDownContentElement = null\n  state = {\n    active: false,\n    offset: 0\n  }\n\n  componentDidMount () {\n\n    if (document) {\n      document.body.addEventListener('click', this.registerClickEvent)\n      this.responsiveResolveId = ResponsiveHelper.resolve(this.fixDropDownPosition)\n    }\n\n  }\n\n  componentWillReceiveProps (next) {\n\n    if (!this.props.disabled && next.disabled) {\n      this.hide()\n    }\n\n  }\n\n  componentDidUpdate (prevState) {\n\n    if (!prevState.active && this.state.active) {\n      this.fixDropDownPosition()\n    }\n\n  }\n\n  componentWillUnmount () {\n\n    if (document) {\n      document.body.removeEventListener('click', this.registerClickEvent)\n      ResponsiveHelper.unresolve(this.responsiveResolveId)\n    }\n\n  }\n\n  render () {\n\n    let { active, offset } = this.state\n    let { caption, htmlCaption, title, disabled, showArrow, arrowActive, className, children, theme } = this.props\n\n    disabled && (active = false)\n    theme === 'light' && (className = ' light-theme ' + className)\n\n    return (\n      <div className={'bf-dropdown ' + (active ? 'active ' : '') + (disabled ? 'disabled ' : '') + className}>\n        {htmlCaption ? (\n          <button\n            type='button'\n            className='dropdown-handler'\n            data-title={title}\n            onClick={this.toggle}\n            dangerouslySetInnerHTML={htmlCaption ? {__html: htmlCaption} : null}\n            ref={(instance) => this.dropDownHandlerElement = instance}\n          ></button>\n        ) : (\n          <button\n            type='button'\n            className='dropdown-handler'\n            data-title={title}\n            onClick={this.toggle}\n            ref={(instance) => this.dropDownHandlerElement = instance}\n          >\n            <span>{caption}</span>\n            {showArrow !== false ? <i className='bfi-drop-down'></i> : null}\n          </button>\n        )}\n        <div\n          className='dropdown-content'\n          style={{marginLeft: offset }}\n          ref={(instance) => this.dropDownContentElement = instance}\n        >\n          <i\n            style={{marginLeft: offset * -1}}\n            className={'dropdown-arrow' + (arrowActive ? ' active' : '')}\n          ></i>\n          <div className='dropdown-content-inner'>\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n\n  }\n\n  fixDropDownPosition = () => {\n\n    const viewRect = this.props.getContainerNode().getBoundingClientRect()\n    const handlerRect = this.dropDownHandlerElement.getBoundingClientRect()\n    const contentRect = this.dropDownContentElement.getBoundingClientRect()\n\n    let offset = 0\n    let right = handlerRect.right - handlerRect.width / 2 + contentRect.width / 2\n    let left = handlerRect.left + handlerRect.width / 2 - contentRect.width / 2\n\n    right = viewRect.right - right\n    left = left - viewRect.left\n\n    if (right < 10) {\n      offset = right - 10\n    } else if (left < 10) {\n      offset = left * -1 + 10\n    }\n\n    if (offset !== this.state.offset) {\n      this.setState({ offset })\n    }\n\n  }\n\n  registerClickEvent = (event) => {\n\n    const { autoHide } = this.props\n    const { active } = this.state\n\n    if (this.dropDownContentElement.contains(event.target) || this.dropDownHandlerElement.contains(event.target)) {\n      return false\n    }\n\n    autoHide && active && this.hide()\n\n  }\n\n  toggle = () => {\n    this.setState({ active: !this.state.active })\n  }\n\n  show = () => {\n    this.setState({ active: true })\n  }\n\n  hide = () => {\n    this.setState({ active: false })\n  }\n\n}","import React from 'react'\n\nexport default (props) => {\n\n  if (React.Fragment) {\n    return <React.Fragment>{props.children}</React.Fragment>\n  } else {\n    return <div className=\"control-item-group\">{props.children}</div>\n  }\n\n}","import './style.scss'\nimport React from 'react'\nimport Switch from 'components/common/Switch'\nimport DropDown from 'components/common/DropDown'\nimport ControlGroup from 'components/business/ControlGroup'\nimport * as ContentUtils  from 'utils/content'\n\nexport default class LinkEditor extends React.Component {\n\n  constructor (props) {\n\n    super(props)\n\n    this.state = {\n      text: '',\n      href: '',\n      target: props.defaultLinkTarget || '',\n      textSelected: false\n    }\n\n  }\n\n  dropDownInstance = null\n\n  componentWillReceiveProps (nextProps) {\n\n    const { href, target } = ContentUtils.getSelectionEntityData(nextProps.editorState, 'LINK')\n    const textSelected = !ContentUtils.isSelectionCollapsed(this.props.editorState) && ContentUtils.getSelectionBlockType(this.props.editorState) !== 'atomic'\n\n    let selectedText = ''\n\n    if (textSelected) {\n      selectedText = ContentUtils.getSelectionText(this.props.editorState)\n    }\n\n    this.setState({\n      textSelected: textSelected,\n      text: selectedText,\n      href: href || '',\n      target: typeof target === 'undefined' ? (nextProps.defaultLinkTarget || '') : (target || '')\n    })\n\n  }\n\n  render () {\n\n    const { allowInsertLinkText } = this.props\n    const { text, href, target, textSelected } = this.state\n    const caption = <i className='bfi-link'></i>\n\n    return (\n      <ControlGroup>\n        <DropDown\n          key={0}\n          caption={caption}\n          title={this.props.language.controls.link}\n          autoHide={true}\n          getContainerNode={this.props.getContainerNode}\n          showArrow={false}\n          ref={(instance) => this.dropDownInstance = instance}\n          className={'control-item dropdown link-editor-dropdown'}\n        >\n          <div className='bf-link-editor'>\n            {allowInsertLinkText ? <div className='input-group'>\n              <input\n                type='text'\n                value={text}\n                spellCheck={false}\n                disabled={textSelected}\n                placeholder={this.props.language.linkEditor.textInputPlaceHolder}\n                onKeyDown={this.handeKeyDown}\n                onChange={this.handleTnputText}\n              />\n            </div> : null}\n            <div className='input-group'>\n              <input\n                type='text'\n                value={href}\n                spellCheck={false}\n                placeholder={this.props.language.linkEditor.linkInputPlaceHolder}\n                onKeyDown={this.handeKeyDown}\n                onChange={this.handleInputLink}\n              />\n            </div>\n            <div className='switch-group'>\n              <Switch\n                active={target === '_blank'}\n                onClick={this.setTarget}\n              />\n              <label>{this.props.language.linkEditor.openInNewWindow}</label>\n            </div>\n            <div className='buttons'>\n              <a onClick={this.handleUnlink} className='primary button-remove-link pull-left'>\n                <i className='bfi-close'></i>\n                <span>{this.props.language.linkEditor.removeLink}</span>\n              </a>\n              <button type='button' onClick={this.handleConfirm} className='primary pull-right'>{this.props.language.base.confirm}</button>\n              <button type='button' onClick={this.handleCancel} className='default pull-right'>{this.props.language.base.cancel}</button>\n            </div>\n          </div>\n        </DropDown>\n        <button\n          key={1}\n          type='button'\n          data-title={this.props.language.controls.unlink}\n          className='control-item button'\n          onClick={this.handleUnlink}\n          disabled={!textSelected || !href}\n        >\n          <i className='bfi-link-off'></i>\n        </button>\n      </ControlGroup>\n    )\n\n  }\n\n  handeKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleConfirm()\n      e.preventDefault()\n      return false\n    }\n  }\n\n  handleTnputText = (e) => {\n    this.setState({\n      text: e.currentTarget.value\n    })\n  }\n\n  handleInputLink = (e) => {\n    this.setState({\n      href: e.currentTarget.value\n    })\n  }\n\n  setTarget = () => {\n    this.setState({\n      target: this.state.target === '_blank' ? '' : '_blank'\n    })\n  }\n\n  handleCancel = () => {\n    this.dropDownInstance.hide()\n  }\n\n  handleUnlink = () => {\n    this.dropDownInstance.hide()\n    this.props.editor.setValue(ContentUtils.toggleSelectionLink(this.props.editorState, false))\n  }\n\n  handleConfirm = () => {\n\n    let { text, href, target, textSelected } = this.state\n    const hookReturns = this.props.hooks('toggle-link', { href, target })({ href, target })\n\n    this.dropDownInstance.hide()\n    this.props.editor.requestFocus()\n\n    if (hookReturns === false) {\n      return false\n    }\n\n    if (hookReturns) {\n      typeof hookReturns.href === 'string' && (href = hookReturns.href)\n      typeof hookReturns.target === 'string' && (target = hookReturns.target)\n    }\n\n    if (textSelected) {\n      if (href) {\n        this.props.editor.setValue(ContentUtils.toggleSelectionLink(this.props.editorState, href, target))\n      } else {\n        this.props.editor.setValue(ContentUtils.toggleSelectionLink(this.props.editorState, false))\n      }\n    } else {\n      this.props.editor.setValue(ContentUtils.insertText(this.props.editorState, text || href, null, {\n        type: 'LINK',\n        data: { href, target }\n      }))\n    }\n\n  }\n\n}\n","import React from 'react'\n\nexport const getHeadings = (lang) => [\n  {\n    key: 'header-one',\n    title: lang.controls.header + ' 1',\n    text: <h1>{lang.controls.header} 1</h1>,\n    type: 'block-type',\n    command: 'header-one'\n  }, {\n    key: 'header-two',\n    title: lang.controls.header + ' 2',\n    text: <h2>{lang.controls.header} 2</h2>,\n    type: 'block-type',\n    command: 'header-two'\n  }, {\n    key: 'header-three',\n    title: lang.controls.header + ' 3',\n    text: <h3>{lang.controls.header} 3</h3>,\n    type: 'block-type',\n    command: 'header-three'\n  }, {\n    key: 'header-four',\n    title: lang.controls.header + ' 4',\n    text: <h4>{lang.controls.header} 4</h4>,\n    type: 'block-type',\n    command: 'header-four'\n  }, {\n    key: 'header-five',\n    title: lang.controls.header + ' 5',\n    text: <h5>{lang.controls.header} 5</h5>,\n    type: 'block-type',\n    command: 'header-five'\n  }, {\n    key: 'header-six',\n    title: lang.controls.header + ' 6',\n    text: <h6>{lang.controls.header} 6</h6>,\n    type: 'block-type',\n    command: 'header-six'\n  }, {\n    key: 'unstyled',\n    title: lang.controls.normal,\n    text: lang.controls.normal,\n    type: 'block-type',\n    command: 'unstyled'\n  }\n]\n\nexport const blocks = {\n  'header-one': 'h1',\n  'header-two': 'h2',\n  'header-three': 'h3',\n  'header-four': 'h4',\n  'header-fiv': 'h5',\n  'header-six': 'h6',\n  'unstyled': 'p',\n  'blockquote': 'blockquote'\n}","import './style.scss'\nimport React from 'react'\nimport { getHeadings } from 'configs/maps'\nimport DropDown from 'components/common/DropDown'\n\nexport default (props) => {\n\n  let dropDownInstance = null\n\n  const headings = getHeadings(props.language).filter(item => props.headings.indexOf(item.key) !== -1)\n  const currentHeadingIndex = headings.findIndex((item) => item.command === props.current)\n  const caption = headings[currentHeadingIndex] ? headings[currentHeadingIndex].title : props.language.controls.normal\n\n  return (\n    <DropDown\n      caption={caption}\n      autoHide={true}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.headings}\n      arrowActive={currentHeadingIndex === 0}\n      ref={(instance) => dropDownInstance = instance}\n      className={'control-item dropdown headings-dropdown'}\n    >\n      <ul className='menu'>\n        {\n          headings.map((item, index) => {\n            let isActive = props.current === item.command\n            return (\n              <li\n                key={index}\n                className={'menu-item' + (isActive ? ' active' : '')}\n                onClick={() => {props.onChange(item.command, item.type),dropDownInstance.hide()}}\n              >\n                {item.text}\n              </li>\n            )\n          })\n        }\n      </ul>\n    </DropDown>\n  )\n\n}","import './style.scss'\nimport React from 'react'\n\nexport default (props) => (\n  <div className=\"bf-colors-wrap\">\n    <ul className=\"bf-colors\">\n      {props.presetColors.map((item, index) => {\n        let className = props.color && item.toLowerCase() === props.color.toLowerCase() ? 'color-item active' : 'color-item'\n        return (\n          <li\n            key={index}\n            title={item}\n            className={className}\n            style={{color: item}}\n            data-color={item.replace('#', '')}\n            onClick={(e) => {\n              props.onChange(e.currentTarget.dataset.color, true)\n            }}\n          >\n          </li>\n        )\n      })}\n    </ul>\n  </div>\n)","import './style.scss'\nimport React from 'react'\nimport DropDown from 'components/common/DropDown'\nimport BuiltinColorPicker from 'components/common/ColorPicker'\nimport * as ContentUtils  from 'utils/content'\n\nexport default class TextColor extends React.Component {\n\n  state = {\n    colorType: 'color'\n  }\n\n  render () {\n\n    let captionStyle = {}\n    let currentColor = null\n    let { colorType } = this.state\n\n    const selectionStyles = this.props.editorState.getCurrentInlineStyle().toJS()\n\n    selectionStyles.forEach(style => {\n\n      if (style.indexOf('COLOR-') === 0) {\n        captionStyle.color = '#' + style.split('-')[1]\n        colorType === 'color' && (currentColor = captionStyle.color)\n      }\n\n      if (style.indexOf('BGCOLOR-') === 0) {\n        captionStyle.backgroundColor = '#' + style.split('-')[1]\n        colorType === 'background-color' && (currentColor = captionStyle.backgroundColor)\n      }\n\n    })\n\n    const caption = (\n      <i style={captionStyle} className='bfi-text-color'>\n        <span className='path1'></span>\n        <span className='path2'></span>\n      </i>\n    )\n\n    const ColorPicker = this.props.colorPicker || BuiltinColorPicker\n\n    return (\n      <DropDown\n        caption={caption}\n        title={this.props.language.controls.color}\n        showArrow={false}\n        autoHide={this.props.autoHide}\n        theme={this.props.theme}\n        getContainerNode={this.props.getContainerNode}\n        ref={(instance) => this.dropDownInstance = instance}\n        className={'control-item dropdown text-color-dropdown'}\n      >\n        <div className='bf-text-color-picker-wrap'>\n          <div className='bf-color-switch-buttons' style={this.props.enableBackgroundColor ? {} : {display: 'none'}}>\n            <button\n              type='button'\n              data-type='color'\n              className={colorType === 'color' ? 'active' : ''}\n              onClick={this.switchColorType}\n            >{this.props.language.controls.textColor}</button>\n            <button\n              type='button'\n              data-type='background-color'\n              className={colorType === 'background-color' ? 'active' : ''}\n              onClick={this.switchColorType}\n            >{this.props.language.controls.backgroundColor}</button>\n          </div>\n          <ColorPicker\n            width={200}\n            color={currentColor}\n            disableAlpha={true}\n            presetColors={this.props.colors}\n            onChange={this.toggleColor}\n          />\n        </div>\n      </DropDown>\n    )\n\n  }\n\n  switchColorType = ({ currentTarget }) => {\n    this.setState({\n      colorType: currentTarget.dataset.type\n    })\n  }\n\n  toggleColor = (color, closePicker) => {\n\n    if (color) {\n\n      const hookReturns = this.props.hooks(`toggle-text-${this.state.colorType}`, color)(color)\n\n      if (hookReturns === false) {\n        return false\n      }\n\n      if (typeof hookReturns === 'string') {\n        color =  hookReturns\n      }\n\n      if (this.state.colorType === 'color') {\n        this.props.editor.setValue(ContentUtils.toggleSelectionColor(this.props.editorState, color))\n      } else {\n        this.props.editor.setValue(ContentUtils.toggleSelectionBackgroundColor(this.props.editorState, color))\n      }\n\n    }\n\n    if (closePicker) {\n      this.dropDownInstance.hide()\n      this.props.editor.requestFocus()\n    }\n\n  }\n\n}\n","import './style.scss'\nimport React from 'react'\nimport DropDown from 'components/common/DropDown'\nimport * as ContentUtils  from 'utils/content'\n\nconst toggleFontSize = (event, props) => {\n\n  let fontSize = event.currentTarget.dataset.size\n  const hookReturns = props.hooks('toggle-font-size', fontSize)(fontSize)\n\n  if (hookReturns === false) {\n    return false\n  }\n\n  if (!isNaN(fontSize)) {\n    fontSize = hookReturns\n  }\n\n  props.editor.setValue(ContentUtils.toggleSelectionFontSize(props.editorState, fontSize))\n  props.editor.requestFocus()\n\n}\n\nexport default (props) => {\n\n  let caption = null\n  let currentFontSize = null\n  let dropDownInstance = null\n\n  props.fontSizes.find((item) => {\n    if (ContentUtils.selectionHasInlineStyle(props.editorState, 'FONTSIZE-' + item)) {\n      caption = item\n      currentFontSize = item\n      return true\n    }\n    return false\n  })\n\n  return (\n    <DropDown\n      autoHide={true}\n      caption={caption || props.defaultCaption}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.fontSize}\n      ref={(instance) => dropDownInstance = instance}\n      className={'control-item dropdown bf-font-size-dropdown'}\n    >\n      <ul className='bf-font-sizes'>\n        {props.fontSizes.map((item, index) => {\n          return (\n            <li\n              key={index}\n              className={item === currentFontSize ? 'active' : null}\n              data-size={item}\n              onClick={(event) => {toggleFontSize(event, props),dropDownInstance.hide()}}\n            >{item}</li>\n          )\n        })}\n      </ul>\n    </DropDown>\n  )\n\n}\n","import './style.scss'\nimport React from 'react'\nimport DropDown from 'components/common/DropDown'\nimport * as ContentUtils  from 'utils/content'\n\nconst toggleLineHeight = (event, props) => {\n\n  let lineHeight = event.currentTarget.dataset.size\n  const hookReturns = props.hooks('toggle-line-height', lineHeight)(lineHeight)\n\n  if (hookReturns === false) {\n    return false\n  }\n\n  if (!isNaN(hookReturns)) {\n    lineHeight = hookReturns\n  }\n\n  props.editor.setValue(ContentUtils.toggleSelectionLineHeight(props.editorState, lineHeight))\n  props.editor.requestFocus()\n\n}\n\nexport default (props) => {\n\n  let caption = null\n  let currentLineHeight = null\n  let dropDownInstance = null\n\n  props.lineHeights.find((item) => {\n    if (ContentUtils.selectionHasInlineStyle(props.editorState, 'LINEHEIGHT-' + item)) {\n      caption = item\n      currentLineHeight = item\n      return true\n    }\n    return false\n  })\n\n  return (\n    <DropDown\n      autoHide={true}\n      caption={caption || props.defaultCaption}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.lineHeight}\n      ref={(instance) => dropDownInstance = instance}\n      className={'control-item dropdown bf-line-height-dropdown'}\n    >\n      <ul className='bf-line-heights'>\n        {props.lineHeights.map((item, index) => {\n          return (\n            <li\n              key={index}\n              className={item === currentLineHeight ? 'active' : null}\n              data-size={item}\n              onClick={(event) => {toggleLineHeight(event, props),dropDownInstance.hide()}}\n            >{item}</li>\n          )\n        })}\n      </ul>\n    </DropDown>\n  )\n\n}\n","import './style.scss'\nimport React from 'react'\nimport DropDown from 'components/common/DropDown'\nimport * as ContentUtils from 'utils/content'\n\nconst toggleFontFamily = (event, props) => {\n\n  let fontFamilyName = event.currentTarget.dataset.name\n  const hookReturns = props.hooks('toggle-font-family', fontFamilyName)(fontFamilyName, props.fontFamilies)\n\n  if (hookReturns === false) {\n    return false\n  }\n\n  if (typeof hookReturns === 'string') {\n    fontFamilyName = hookReturns\n  }\n\n  props.editor.setValue(ContentUtils.toggleSelectionFontFamily(props.editorState, fontFamilyName))\n  props.editor.requestFocus()\n\n}\n\nexport default (props) => {\n\n  let caption = null\n  let currentIndex = null\n  let dropDownInstance = null\n\n  props.fontFamilies.find((item, index) => {\n    if (ContentUtils.selectionHasInlineStyle(props.editorState, 'FONTFAMILY-' + item.name)) {\n      caption = item.name\n      currentIndex = index\n      return true\n    }\n    return false\n  })\n\n  return (\n    <DropDown\n      caption={caption || props.defaultCaption}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.fontFamily}\n      autoHide={true}\n      arrowActive={currentIndex === 0}\n      ref={(instance) => dropDownInstance = instance}\n      className={'control-item dropdown font-family-dropdown'}\n    >\n      <ul className='menu'>\n        {props.fontFamilies.map((item, index) => {\n          return (\n            <li\n              key={index}\n              className={'menu-item ' + (index === currentIndex ? 'active' : '')}\n              data-name={item.name}\n              onClick={(event) => {toggleFontFamily(event, props),dropDownInstance.hide()}}\n            >\n              <span style={{fontFamily: item.family}}>{item.name}</span>\n            </li>\n          )\n        })}\n      </ul>\n    </DropDown>\n  )\n\n}\n","import React from 'react'\nimport * as ContentUtils  from 'utils/content'\nimport ControlGroup from 'components/business/ControlGroup'\n\nexport default class TextAlign extends React.Component {\n\n  state = {\n    currentAlignment: undefined\n  }\n\n  componentWillReceiveProps (next) {\n    this.setState({\n      currentAlignment: ContentUtils.getSelectionBlockData(next.editorState, 'textAlign')\n    })\n  }\n\n  setAlignment = (event) => {\n\n    let { alignment } = event.currentTarget.dataset\n    const hookReturns = this.props.hooks('toggle-text-alignment', alignment)(alignment)\n\n    if (this.props.textAligns.indexOf(hookReturns) > -1) {\n      alignment = hookReturns\n    }\n\n    this.props.editor.setValue(ContentUtils.toggleSelectionAlignment(this.props.editorState, alignment))\n    this.props.editor.requestFocus()\n\n  }\n\n  render () {\n\n    const textAlignmentTitles = [\n      this.props.language.controls.alignLeft,\n      this.props.language.controls.alignCenter,\n      this.props.language.controls.alignRight,\n      this.props.language.controls.alignJustify\n    ]\n\n    return (\n      <ControlGroup>\n        {this.props.textAligns.map((item, index) => (\n          <button\n            type='button'\n            key={index}\n            data-title={textAlignmentTitles[index]}\n            data-alignment={item}\n            className={'control-item button ' + (item === this.state.currentAlignment ? 'active' : null)}\n            onClick={this.setAlignment}\n          >\n            <i className={'bfi-align-' + item}></i>\n          </button>\n        ))}\n      </ControlGroup>\n    )\n  }\n\n}\n","import './style.scss'\nimport React from 'react'\nimport DropDown from 'components/common/DropDown'\nimport * as ContentUtils  from 'utils/content'\n\nconst insertEmoji = (event, props) => {\n\n  let emoji = event.currentTarget.dataset.emoji\n  const hookReturns = props.hooks('insert-emoji', emoji)(emoji)\n\n  if (hookReturns === false) {\n    return false\n  }\n\n  if (typeof hookReturns === 'string') {\n    emoji = hookReturns\n  }\n\n  props.editor.setValue(ContentUtils.insertText(props.editorState, emoji))\n  props.editor.requestFocus()\n\n}\n\nexport default (props) => {\n\n  return (\n    <DropDown\n      caption={props.defaultCaption}\n      autoHide={true}\n      showArrow={false}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.emoji}\n      className={'control-item dropdown bf-emoji-dropdown'}\n    >\n      <div className='bf-emojis-wrap'>\n        <ul className='bf-emojis'>\n          {props.emojis.map((item, index) => {\n            return (\n              <li\n                key={index}\n                data-emoji={item}\n                onClick={(event) => insertEmoji(event, props)}\n              >{item}</li>\n            )\n          })}\n        </ul>\n      </div>\n    </DropDown>\n  )\n\n}\n","import './style.scss'\nimport React from 'react'\nimport DropDown from 'components/common/DropDown'\nimport * as ContentUtils  from 'utils/content'\n\nconst toggleLetterSpacing = (event, props) => {\n\n  let letterSpacing = event.currentTarget.dataset.size\n  const hookReturns = props.hooks('toggle-letter-spacing', letterSpacing)(letterSpacing)\n\n  if (hookReturns === false) {\n    return false\n  }\n\n  if (!isNaN(hookReturns)) {\n    letterSpacing = hookReturns\n  }\n\n  props.editor.setValue(ContentUtils.toggleSelectionLetterSpacing(props.editorState, letterSpacing))\n  props.editor.requestFocus()\n\n}\n\nexport default (props) => {\n\n  let caption = null\n  let currentLetterSpacing = null\n  let dropDownInstance = null\n\n  props.letterSpacings.find((item) => {\n    if (ContentUtils.selectionHasInlineStyle(props.editorState, 'LETTERSPACING-' + item)) {\n      caption = item\n      currentLetterSpacing = item\n      return true\n    }\n    return false\n  })\n\n  return (\n    <DropDown\n      autoHide={true}\n      caption={caption || props.defaultCaption}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.letterSpacing}\n      ref={(instance) => dropDownInstance = instance}\n      className={'control-item dropdown bf-letter-spacing-dropdown'}\n    >\n      <ul className='bf-letter-spacings'>\n        {props.letterSpacings.map((item, index) => {\n          return (\n            <li\n              key={index}\n              className={item === currentLetterSpacing ? 'active' : null}\n              data-size={item}\n              onClick={(event) => {toggleLetterSpacing(event, props),dropDownInstance.hide()}}\n            >{item}</li>\n          )\n        })}\n      </ul>\n    </DropDown>\n  )\n\n}\n","import React from 'react'\nimport * as ContentUtils  from 'utils/content'\nimport ControlGroup from 'components/business/ControlGroup'\n\nexport default class TextAlign extends React.Component {\n\n  state = {\n    currentIndent: 0\n  }\n\n  componentWillReceiveProps (nextProps) {\n    this.setState({\n      currentIndent: ContentUtils.getSelectionBlockData(nextProps.editorState, 'textIndent') || 0\n    })\n  }\n\n  increaseIndent = () => {\n    this.props.editor.setValue(ContentUtils.increaseSelectionIndent(this.props.editorState))\n    this.props.editor.requestFocus()\n  }\n\n  decreaseIndent = () => {\n    this.props.editor.setValue(ContentUtils.decreaseSelectionIndent(this.props.editorState))\n    this.props.editor.requestFocus()\n  }\n\n  render () {\n\n    const { currentIndent } = this.state\n    const { language } = this.props\n\n    return (\n      <ControlGroup>\n        <button\n          key={0}\n          type='button'\n          data-title={language.controls.increaseIndent}\n          disabled={currentIndent >= 6}\n          className={`control-item button button-indent-increase${currentIndent > 0 && currentIndent < 6 ? ' active' : ''}`}\n          onClick={this.increaseIndent}\n        >\n          <i className={'bfi-indent-increase'}></i>\n        </button>\n        <button\n          key={1}\n          type='button'\n          data-title={language.controls.decreaseIndent}\n          disabled={currentIndent <= 0}\n          className=\"control-item button button-indent-decrease\"\n          onClick={this.decreaseIndent}\n        >\n          <i className={'bfi-indent-decrease'}></i>\n        </button>\n      </ControlGroup>\n    )\n\n  }\n\n}\n","import './style.scss'\nimport React from 'react'\nimport getEditorControls from 'configs/controls'\nimport LinkEditor from 'components/business/LinkEditor'\nimport HeadingPicker from 'components/business/Headings'\nimport TextColorPicker from 'components/business/TextColor'\nimport FontSizePicker from 'components/business/FontSize'\nimport LineHeightPicker from 'components/business/LineHeight'\nimport FontFamilyPicker from 'components/business/FontFamily'\nimport TextAlign from 'components/business/TextAlign'\nimport EmojiPicker from 'components/business/EmojiPicker'\nimport LetterSpacingPicker from 'components/business/LetterSpacing'\nimport TextIndent from 'components/business/TextIndent'\nimport DropDown from 'components/common/DropDown'\nimport * as ContentUtils from 'utils/content'\nimport { showModal } from 'components/common/Modal'\nimport { getExtensionControls } from 'helpers/extension'\n\nconst commandHookMap = {\n  'inline-style': 'toggle-inline-style',\n  'block-type': 'change-block-type',\n  'editor-method': 'exec-editor-command'\n}\n\nconst exclusiveInlineStyles = {\n  'superscript': 'subscript',\n  'subscript': 'superscript'\n}\n\nconst mergeControls = (commonProps, builtControls, extensionControls, extendControls) => {\n\n  extensionControls = extensionControls.map(item => typeof item === 'function' ? item(commonProps) : item)\n  extendControls = extendControls.map(item => typeof item === 'function' ? item(commonProps) : item)\n\n  if (extensionControls.length === 0 && extendControls.length === 0) {\n    return builtControls\n  }\n\n  return builtControls.map(item => {\n    return extendControls.find(subItem => {\n      return subItem.replace === (item.key || item)\n    }) || extensionControls.find(subItem => {\n      return subItem.replace === (item.key || item)\n    }) || item\n  }).concat(extensionControls.length ? 'separator' : '').concat(extensionControls.filter(item => {\n    return !item.replace\n  })).concat(extendControls.filter(item => {\n    return typeof item === 'string' || !item.replace\n  }))\n\n}\n\nexport default class ControlBar extends React.Component {\n\n  allControls = []\n  mediaLibiraryModal = null\n  extendedModals = {}\n\n  componentDidUpdate () {\n\n    const { language } = this.props\n\n    this.allControls.forEach(item => {\n      if (item.type === 'modal') {\n        if (item.modal && item.modal.id && this.extendedModals[item.modal.id]) {\n          this.extendedModals[item.modal.id].update({ ...item.modal, language })\n        }\n      }\n    })\n\n  }\n\n  getControlItemClassName (data) {\n\n    let className = 'control-item button'\n    let { type, command } = data\n\n    if (type === 'inline-style' && ContentUtils.selectionHasInlineStyle(this.props.editorState, command)) {\n      className += ' active'\n    } else if (type === 'block-type' && ContentUtils.getSelectionBlockType(this.props.editorState) === command) {\n      className += ' active'\n    } else if (type === 'entity' && ContentUtils.getSelectionEntityType(this.props.editorState) === command) {\n      className += ' active'\n    }\n\n    return className\n\n  }\n\n  applyControl (command, type, data = {}) {\n\n    const hookReturns = this.props.hooks(commandHookMap[type] || type, command)(command)\n    let editorState = this.props.editorState\n\n    if (hookReturns === false) {\n      return false\n    }\n\n    if (typeof hookReturns === 'string') {\n      command = hookReturns\n    }\n\n    if (type === 'inline-style') {\n      let exclusiveInlineStyle = exclusiveInlineStyles[command]\n      if (exclusiveInlineStyle && ContentUtils.selectionHasInlineStyle(editorState, exclusiveInlineStyle)) {\n        editorState = ContentUtils.toggleSelectionInlineStyle(editorState, exclusiveInlineStyle)\n      }\n      this.props.editor.setValue(ContentUtils.toggleSelectionInlineStyle(editorState, command))\n    } else if (type === 'block-type') {\n      this.props.editor.setValue(ContentUtils.toggleSelectionBlockType(editorState, command))\n    } else if (type === 'entity') {\n      this.props.editor.setValue(ContentUtils.toggleSelectionEntity(editorState, {\n        type: command,\n        mutability: data.mutability || 'MUTABLE',\n        data: data.data || {}\n      }))\n    } else if (type === 'editor-method') {\n      this.props.editor[command] && this.props.editor[command]()\n    }\n\n  }\n\n  openBraftFinder = () => {\n\n    if (!this.props.braftFinder || !this.props.braftFinder.ReactComponent) {\n      return false\n    }\n\n    if (this.props.hooks('open-braft-finder')() === false) {\n      return false\n    }\n\n    const mediaProps = this.props.media\n    const MediaLibrary = this.props.braftFinder.ReactComponent\n\n    this.mediaLibiraryModal = showModal({\n      title: this.props.language.controls.mediaLibirary,\n      language: this.props.language,\n      width: 640,\n      showFooter: false,\n      component: (\n        <MediaLibrary\n          accepts={mediaProps.accepts}\n          onCancel={this.closeBraftFinder}\n          onInsert={this.insertMedias}\n          onChange={mediaProps.onChange}\n          externals={mediaProps.externals}\n          onBeforeSelect={this.bindBraftFinderHook('select-medias')}\n          onBeforeDeselect={this.bindBraftFinderHook('deselect-medias')}\n          onBeforeRemove={this.bindBraftFinderHook('remove-medias')}\n          onBeforeInsert={this.bindBraftFinderHook('insert-medias')}\n          onFileSelect={this.bindBraftFinderHook('select-files')}\n        />\n      )\n    })\n\n  }\n\n  bindBraftFinderHook = (hookName) => (...params) => {\n    return this.props.hooks(hookName, params[0])(...params)\n  }\n\n  insertMedias = (medias) => {\n\n    this.props.editor.setValue(ContentUtils.insertMedias(this.props.editorState, medias))\n    this.props.editor.requestFocus()\n    this.props.media.onInsert && this.props.media.onInsert(medias)\n    this.closeBraftFinder()\n\n  }\n\n  closeBraftFinder = () => {\n\n    this.props.media.onCancel && this.props.media.onCancel()\n    this.mediaLibiraryModal && this.mediaLibiraryModal.close()\n\n  }\n\n  render() {\n\n    const { editor, editorId, editorState, className, style, controls, media, extendControls, language, hooks, colors, colorPicker, colorPickerTheme, colorPickerAutoHide, headings, fontSizes, fontFamilies, emojis, getContainerNode, lineHeights, letterSpacings, textAligns, textBackgroundColor, allowInsertLinkText, defaultLinkTarget } = this.props\n    const currentBlockType = ContentUtils.getSelectionBlockType(editorState)\n    const commonProps = { editor, editorId, editorState, language, getContainerNode, hooks }\n\n    const renderedControls = []\n    const editorControls = getEditorControls(language, editor)\n    const extensionControls = getExtensionControls(editorId)\n    const allControls = mergeControls(commonProps, controls, extensionControls, extendControls)\n\n    this.allControls = allControls\n\n    return (\n      <div className={`bf-controlbar ${className || ''}`} style={style} onMouseDown={this.preventDefault}>\n        {\n          allControls.map((item, index) => {\n\n            let itemKey = typeof item === 'string' ? item : item.key\n            if (typeof itemKey !== 'string') {\n              return null\n            }\n            if (renderedControls.indexOf(itemKey) > -1) {\n              return null\n            }\n            if (itemKey.toLowerCase() === 'separator') {\n              return <span key={index} className='separator-line'></span>\n            }\n            let controlItem = editorControls.find((subItem) => {\n              return subItem.key.toLowerCase() === itemKey.toLowerCase()\n            })\n            if (typeof item !== 'string') {\n              controlItem = { ...controlItem, ...item }\n            }\n            if (!controlItem) {\n              return null\n            }\n            renderedControls.push(itemKey)\n            if (controlItem.type === 'headings') {\n              return <HeadingPicker\n                key={index}\n                headings={headings}\n                current={currentBlockType}\n                onChange={(command) => this.applyControl(command, 'block-type')}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'text-color') {\n              return <TextColorPicker\n                key={index}\n                colors={colors}\n                colorPicker={colorPicker}\n                theme={colorPickerTheme}\n                autoHide={colorPickerAutoHide}\n                enableBackgroundColor={textBackgroundColor}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'font-size') {\n              return <FontSizePicker\n                key={index}\n                fontSizes={fontSizes}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'line-height') {\n              return <LineHeightPicker\n                key={index}\n                lineHeights={lineHeights}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'letter-spacing') {\n              return <LetterSpacingPicker\n                key={index}\n                letterSpacings={letterSpacings}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'text-indent') {\n              return <TextIndent\n                key={index}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'font-family') {\n              return <FontFamilyPicker\n                key={index}\n                fontFamilies={fontFamilies}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'emoji') {\n              return <EmojiPicker\n                key={index}\n                emojis={emojis}\n                defaultCaption={controlItem.text}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'link') {\n              return <LinkEditor\n                key={index}\n                defaultLinkTarget={defaultLinkTarget}\n                allowInsertLinkText={allowInsertLinkText}\n                {...commonProps}\n              />\n            } else if (controlItem.type === 'text-align') {\n              return (\n                <TextAlign\n                  key={index}\n                  textAligns={textAligns}\n                  {...commonProps}\n                />\n              )\n            } else if (controlItem.type === 'media') {\n              if (!media.image && !media.video && !media.audio) {\n                return null\n              }\n              return (\n                <button\n                  type='button'\n                  key={index}\n                  data-title={controlItem.title}\n                  disabled={controlItem.disabled}\n                  className='control-item media button'\n                  onClick={this.openBraftFinder}\n                >\n                  {controlItem.text}\n                </button>\n              )\n            } else if (controlItem.type === 'dropdown') {\n              return (\n                <DropDown\n                  key={index}\n                  className={`control-item extend-control-item dropdown ${controlItem.className || ''}`}\n                  caption={controlItem.text}\n                  htmlCaption={controlItem.html}\n                  showArrow={controlItem.showArrow}\n                  title={controlItem.title}\n                  arrowActive={controlItem.arrowActive}\n                  theme={controlItem.theme}\n                  autoHide={controlItem.autoHide}\n                  disabled={controlItem.disabled}\n                  ref={controlItem.ref}\n                  {...commonProps}\n                >\n                  {controlItem.component}\n                </DropDown>\n              )\n            } else if (controlItem.type === 'modal') {\n              return (\n                <button\n                  type='button'\n                  key={index}\n                  data-title={controlItem.title}\n                  disabled={controlItem.disabled}\n                  className={`control-item extend-control-item button ${controlItem.className || ''}`}\n                  dangerouslySetInnerHTML={controlItem.html ? { __html: controlItem.html } : null}\n                  onClick={(event) => {\n                    if (controlItem.modal && controlItem.modal.id) {\n                      if (this.extendedModals[controlItem.modal.id]) {\n                        this.extendedModals[controlItem.modal.id].active = true\n                        this.extendedModals[controlItem.modal.id].update({ ...controlItem.modal, language })\n                      } else {\n                        this.extendedModals[controlItem.modal.id] = showModal({ ...controlItem.modal, language })\n                        controlItem.modal.onCreate && controlItem.modal.onCreate(this.extendedModals[controlItem.modal.id])\n                      }\n                    }\n                    controlItem.onClick && controlItem.onClick(event)\n                  }}\n                >\n                  {!controlItem.html ? controlItem.text : null}\n                </button>\n              )\n            } else if (controlItem.type === 'component') {\n              return (\n                <div\n                  key={index}\n                  className={`component-wrapper ${controlItem.className || ''}`}\n                >{controlItem.component}</div>\n              )\n            } else if (controlItem.type === 'button') {\n              return (\n                <button\n                  type='button'\n                  key={index}\n                  data-title={controlItem.title}\n                  disabled={controlItem.disabled}\n                  className={`control-item button ${controlItem.className || ''}`}\n                  dangerouslySetInnerHTML={controlItem.html ? { __html: controlItem.html } : null}\n                  onClick={(event) => controlItem.onClick && controlItem.onClick(event)}\n                >\n                  {!controlItem.html ? controlItem.text : null}\n                </button>\n              )\n            } else if (controlItem) {\n\n              let disabled = false\n\n              if (controlItem.command === 'undo') {\n                disabled = editorState.getUndoStack().size === 0\n              } else if (controlItem.command === 'redo') {\n                disabled = editorState.getRedoStack().size === 0\n              }\n\n              return (\n                <button\n                  type='button'\n                  key={index}\n                  disabled={disabled}\n                  data-title={controlItem.title}\n                  className={this.getControlItemClassName({\n                    type: controlItem.type,\n                    command: controlItem.command\n                  })}\n                  onClick={() => this.applyControl(controlItem.command, controlItem.type, controlItem.data)}\n                >\n                  {controlItem.text}\n                </button>\n              )\n            }\n          })\n        }\n      </div>\n    )\n\n  }\n\n  preventDefault (event) {\n\n    const tagName = event.target.tagName.toLowerCase()\n\n    if (tagName === 'input' || tagName === 'label') {\n      // ...\n    } else {\n      event.preventDefault()\n    }\n\n  }\n\n}\n","import 'draft-js/dist/Draft.css'\nimport 'assets/scss/_base.scss'\nimport React from 'react'\nimport languages from 'languages'\nimport BraftFinder from 'braft-finder'\nimport * as ColorUtils from 'utils/color'\nimport * as ContentUtils from 'utils/content'\nimport { Editor, EditorState } from 'draft-js'\nimport { Map } from 'immutable'\nimport getKeyBindingFn from 'configs/keybindings'\nimport defaultProps from 'configs/props'\nimport { keyCommandHandlers, returnHandlers, beforeInputHandlers, dropHandlers, droppedFilesHandlers, copyHandlers, pastedFilesHandlers, pastedTextHandlers, compositionStartHandler } from 'configs/handlers'\nimport { getBlockRendererFn, getBlockRenderMap, getBlockStyleFn, getCustomStyleMap, getCustomStyleFn, getDecorators } from 'renderers'\nimport { compositeStyleImportFn, compositeStyleExportFn, compositeEntityImportFn, compositeEntityExportFn, compositeBlockImportFn, compositeBlockExportFn, getPropInterceptors } from 'helpers/extension'\nimport ControlBar from 'components/business/ControlBar'\n\nconst buildHooks= (hooks) => (hookName, defaultReturns = {}) => {\n  return hooks[hookName] || (() => defaultReturns)\n}\n\nconst filterColors = (colors, colors2) => {\n  return colors.filter(item => {\n    return !colors2.find(color => color.toLowerCase() === item.toLowerCase())\n  }).filter((item, index, array) => array.indexOf(item) === index)\n}\n\nconst isControlEnabled = (props, controlName) => {\n  return [...props.controls, ...props.extendControls].find(item => item === controlName || item.key === controlName) && props.excludeControls.indexOf(controlName) === -1\n}\n\nconst getConvertOptions = (props) => {\n\n  const editorId = props.editorId || props.id\n  const convertOptions = { ...defaultProps.converts, ...props.converts, fontFamilies: props.fontFamilies }\n\n  convertOptions.styleImportFn = compositeStyleImportFn(convertOptions.styleImportFn, editorId)\n  convertOptions.styleExportFn = compositeStyleExportFn(convertOptions.styleExportFn, editorId)\n  convertOptions.entityImportFn = compositeEntityImportFn(convertOptions.entityImportFn, editorId)\n  convertOptions.entityExportFn = compositeEntityExportFn(convertOptions.entityExportFn, editorId)\n  convertOptions.blockImportFn = compositeBlockImportFn(convertOptions.blockImportFn, editorId)\n  convertOptions.blockExportFn = compositeBlockExportFn(convertOptions.blockExportFn, editorId)\n\n  return convertOptions\n\n}\n\nexport default class BraftEditor extends React.Component {\n\n  static defaultProps = defaultProps\n\n  constructor (props) {\n\n    super(props)\n\n    this.editorProps = this.getEditorProps(props)\n    this.editorDecorators = getDecorators(this.editorProps.editorId || this.editorProps.id)\n\n    this.isFocused = false\n    this.isLiving = false\n    this.braftFinder = null\n    this.valueInitialized = !!(this.props.defaultValue || this.props.value)\n\n    const defaultEditorState = (this.props.defaultValue || this.props.value) instanceof EditorState\n      ? (this.props.defaultValue || this.props.value)\n      : EditorState.createEmpty(this.editorDecorators)\n    defaultEditorState.setConvertOptions(getConvertOptions(this.editorProps))\n\n    let tempColors = []\n\n    if (ContentUtils.isEditorState(defaultEditorState)) {\n\n      const colors = ColorUtils.detectColorsFromDraftState(defaultEditorState.toRAW(true))\n      defaultEditorState.setConvertOptions(getConvertOptions(this.editorProps))\n\n      tempColors = filterColors(colors, this.editorProps.colors)\n    }\n\n    this.state = {\n      tempColors,\n      editorState: defaultEditorState,\n      isFullscreen: false,\n      draftProps: {}\n    }\n    this.containerNode = null\n  }\n\n  getEditorProps (props) {\n\n    props = props || this.props\n\n    const {value, defaultValue, onChange, ...restProps} = props// eslint-disable-line no-unused-vars\n    const propInterceptors = getPropInterceptors(restProps.editorId || restProps.id)\n\n    if (propInterceptors.length === 0) {\n      return restProps\n    }\n\n    let porpsMap = Map(restProps)\n\n    propInterceptors.forEach(interceptor => {\n      porpsMap = porpsMap.merge(Map(interceptor(porpsMap.toJS(), this) || {}))\n    })\n\n    return porpsMap.toJS()\n\n  }\n\n  componentWillMount () {\n\n    if (isControlEnabled(this.editorProps, 'media')) {\n\n      const { language, media } = this.editorProps\n      const { uploadFn, validateFn, items } = { ...defaultProps.media, ...media }\n\n      this.braftFinder = new BraftFinder({\n        items: items,\n        language: language,\n        uploader: uploadFn,\n        validator: validateFn\n      })\n\n      this.forceUpdate()\n\n    }\n\n  }\n\n  componentDidMount () {\n\n    this.isLiving = true\n\n  }\n\n  componentDidUpdate (_, prevState) {\n\n    if (prevState.editorState !== this.state.editorState) {\n      this.state.editorState.setConvertOptions(getConvertOptions(this.editorProps))\n    }\n\n  }\n\n  componentWillReceiveProps (props) {\n\n    this.editorProps = this.getEditorProps(props)\n\n    const { value: editorState } = props\n    const { media, language } = this.editorProps\n    const currentProps = this.getEditorProps()\n\n    if (!isControlEnabled(currentProps, 'media') && isControlEnabled(this.editorProps, 'media') && !this.braftFinder) {\n\n      const { uploadFn, validateFn, items } = { ...defaultProps.media, ...media }\n\n      this.braftFinder = new BraftFinder({\n        items: items,\n        language: language,\n        uploader: uploadFn,\n        validator: validateFn\n      })\n\n      this.forceUpdate()\n\n    }\n\n    if (media && media.items && this.braftFinder) {\n      this.braftFinder.setItems(media.items)\n    }\n\n    let nextEditorState\n\n    if (!this.valueInitialized && typeof this.props.defaultValue === 'undefined' && ContentUtils.isEditorState(props.defaultValue)) {\n      nextEditorState = props.defaultValue\n    } else if (ContentUtils.isEditorState(editorState)) {\n      nextEditorState = editorState\n    }\n\n    if (nextEditorState) {\n\n      if (nextEditorState && nextEditorState !== this.state.editorState) {\n\n        const tempColors = ColorUtils.detectColorsFromDraftState(nextEditorState.toRAW(true))\n        nextEditorState.setConvertOptions(getConvertOptions(this.editorProps))\n\n        this.setState({\n          tempColors: filterColors([...this.state.tempColors, ...tempColors], currentProps.colors),\n          editorState: nextEditorState\n        }, () => {\n          this.props.onChange && this.props.onChange(nextEditorState)\n        })\n\n      } else {\n        this.setState({\n          editorState: nextEditorState\n        })\n      }\n    }\n\n  }\n\n  componentWillUnmount () {\n    this.isLiving = false\n    this.controlBarInstance && this.controlBarInstance.closeBraftFinder()\n  }\n\n  onChange = (editorState, callback) => {\n\n    if (!(editorState instanceof EditorState)) {\n      editorState = EditorState.set(editorState, {\n        decorator: this.editorDecorators\n      })\n    }\n\n    if (!editorState.convertOptions) {\n      editorState.setConvertOptions(getConvertOptions(this.editorProps))\n    }\n\n    this.setState({ editorState }, () => {\n      this.props.onChange && this.props.onChange(editorState)\n      callback && callback(editorState)\n    })\n\n  }\n\n  getDraftInstance = () => {\n    return this.draftInstance\n  }\n\n  getFinderInstance = () => {\n    return this.braftFinder\n  }\n\n  getValue = () => {\n    return this.state.editorState\n  }\n\n  setValue = (editorState, callback) => {\n    return this.onChange(editorState, callback)\n  }\n\n  forceRender = () => {\n\n    const selectionState = this.state.editorState.getSelection()\n\n    this.setValue(EditorState.set(this.state.editorState, {\n      decorator: this.editorDecorators\n    }), () => {\n      this.setValue(EditorState.forceSelection(this.state.editorState, selectionState))\n    })\n\n  }\n\n  onTab = (event) => {\n\n    if (keyCommandHandlers('tab', this.state.editorState, this) === 'handled') {\n      event.preventDefault()\n    }\n\n    this.editorProps.onTab && this.editorProps.onTab(event)\n\n  }\n\n  onFocus = () => {\n    this.isFocused = true\n    this.editorProps.onFocus && this.editorProps.onFocus(this.state.editorState)\n  }\n\n  onBlur = () => {\n    this.isFocused = false\n    this.editorProps.onBlur && this.editorProps.onBlur(this.state.editorState)\n  }\n\n  requestFocus = () => {\n    setTimeout(() => this.draftInstance.focus(), 0)\n  }\n\n  handleKeyCommand = (command, editorState) => keyCommandHandlers(command, editorState, this)\n\n  handleReturn = (event, editorState) => returnHandlers(event, editorState, this)\n\n  handleBeforeInput = (chars, editorState) => beforeInputHandlers(chars, editorState, this)\n\n  handleDrop = (selectionState, dataTransfer) => dropHandlers(selectionState, dataTransfer, this)\n\n  handleDroppedFiles = (selectionState, files) => droppedFilesHandlers(selectionState, files, this)\n\n  handlePastedFiles = (files) => pastedFilesHandlers(files, this)\n\n  handleCopyContent = (event) => copyHandlers(event, this)\n\n  handlePastedText = (text, html, editorState) => pastedTextHandlers(text, html, editorState, this)\n\n  handleCompositionStart = (event) => compositionStartHandler(event, this)\n\n  undo = () => {\n    this.setValue(ContentUtils.undo(this.state.editorState))\n  }\n\n  redo = () => {\n    this.setValue(ContentUtils.redo(this.state.editorState))\n  }\n\n  removeSelectionInlineStyles = () => {\n    this.setValue(ContentUtils.removeSelectionInlineStyles(this.state.editorState))\n  }\n\n  insertHorizontalLine = () => {\n    this.setValue(ContentUtils.insertHorizontalLine(this.state.editorState))\n  }\n\n  clearEditorContent = () => {\n    this.setValue(ContentUtils.clear(this.state.editorState), (editorState) => {\n      this.setValue(ContentUtils.toggleSelectionIndent(editorState, 0))\n    })\n  }\n\n  toggleFullscreen = (fullscreen) => {\n\n    this.setState({\n      isFullscreen: typeof fullscreen !== 'undefined' ? fullscreen : !this.state.isFullscreen\n    }, () => {\n      this.editorProps.onFullscreen && this.editorProps.onFullscreen(this.state.isFullscreen)\n    })\n\n  }\n\n  lockOrUnlockEditor (editorLocked) {\n    this.setState({ editorLocked })\n  }\n\n  setEditorContainerNode = (containerNode) => {\n    this.containerNode = containerNode\n  }\n\n  render () {\n\n    let {\n      id, editorId, controls, excludeControls, extendControls, readOnly, disabled, media, language, colors, colorPicker, colorPickerTheme, colorPickerAutoHide, hooks,\n      fontSizes, fontFamilies, emojis, placeholder, fixPlaceholder, headings, imageControls, imageResizable, lineHeights, letterSpacings, textAligns, textBackgroundColor, allowInsertLinkText, defaultLinkTarget,\n      extendAtomics, className, style, controlBarClassName, controlBarStyle, contentClassName, contentStyle, stripPastedStyles, componentBelowControlBar\n    } = this.editorProps\n\n    const { isFullscreen, editorState } = this.state\n\n    editorId = editorId || id\n    hooks = buildHooks(hooks)\n    controls = controls.filter(item => excludeControls.indexOf(item) === -1)\n    language = (typeof language === 'function' ? language(languages, 'braft-editor') : languages[language]) || languages[defaultProps.language]\n\n    const externalMedias = media && media.externals ? {\n      ...defaultProps.media.externals,\n      ...media.externals\n    } : defaultProps.media.externals\n\n    const accepts = media && media.accepts ? {\n      ...defaultProps.media.accepts,\n      ...media.accepts\n    } : defaultProps.media.accepts\n\n    media = { ...defaultProps.media, ...media, externalMedias, accepts }\n\n    if (!media.uploadFn) {\n      media.video = false\n      media.audio = false\n    }\n\n    const controlBarProps = {\n      editor: this,\n      editorState: editorState,\n      braftFinder: this.braftFinder,\n      ref: instance => this.controlBarInstance = instance,\n      getContainerNode: () => this.containerNode,\n      className: controlBarClassName,\n      style: controlBarStyle,\n      colors: [...colors, ...this.state.tempColors],\n      colorPicker, colorPickerTheme, colorPickerAutoHide, hooks, editorId, media, controls, language, extendControls, headings, fontSizes, fontFamilies,\n      emojis, lineHeights, letterSpacings, textAligns, textBackgroundColor, allowInsertLinkText, defaultLinkTarget\n    }\n\n    const { unitExportFn } = editorState.convertOptions\n\n    const commonProps = {\n      editor: this, editorId, hooks,\n      editorState: editorState,\n      containerNode: this.containerNode,\n      imageControls, imageResizable, language, extendAtomics\n    }\n\n    const blockRendererFn = getBlockRendererFn(commonProps, this.editorProps.blockRendererFn)\n    const blockRenderMap = getBlockRenderMap(commonProps, this.editorProps.blockRenderMap)\n    const blockStyleFn = getBlockStyleFn(this.editorProps.blockStyleFn)\n    const customStyleMap = getCustomStyleMap(commonProps, this.editorProps.customStyleMap)\n    const customStyleFn = getCustomStyleFn(commonProps, { fontFamilies, unitExportFn, customStyleFn: this.editorProps.customStyleFn })\n\n    const keyBindingFn = getKeyBindingFn(this.editorProps.keyBindingFn)\n\n    const mixedProps = {}\n\n    if (this.state.editorLocked || this.editorProps.disabled || this.editorProps.readOnly || this.editorProps.draftProps.readOnly) {\n      mixedProps.readOnly = true\n    }\n\n    if (\n      placeholder && fixPlaceholder && editorState.isEmpty() &&\n      editorState.getCurrentContent().getFirstBlock().getType() !== 'unstyled'\n    ) {\n      placeholder = ''\n    }\n\n    const draftProps = {\n      ref: instance => { this.draftInstance = instance },\n      editorState: editorState,\n      handleKeyCommand: this.handleKeyCommand,\n      handleReturn: this.handleReturn,\n      handleBeforeInput: this.handleBeforeInput,\n      handleDrop: this.handleDrop,\n      handleDroppedFiles: this.handleDroppedFiles,\n      handlePastedText: this.handlePastedText,\n      handlePastedFiles: this.handlePastedFiles,\n      onChange: this.onChange,\n      onTab: this.onTab,\n      onFocus: this.onFocus,\n      onBlur: this.onBlur,\n      blockRenderMap, blockRendererFn, blockStyleFn,\n      customStyleMap, customStyleFn,\n      keyBindingFn, placeholder, stripPastedStyles,\n      ...this.editorProps.draftProps,\n      ...mixedProps\n    }\n\n    return (\n      <div\n        style={style}\n        ref={this.setEditorContainerNode}\n        className={`bf-container ${className}${(disabled ? ' disabled' : '')}${(readOnly ? ' read-only' : '')}${isFullscreen ? ' fullscreen' : ''}`}\n      >\n        <ControlBar {...controlBarProps} />\n        {componentBelowControlBar}\n        <div\n          onCompositionStart={this.handleCompositionStart}\n          className={`bf-content ${contentClassName}`}\n          onCopy={this.handleCopyContent}\n          style={contentStyle}\n        >\n          <Editor {...draftProps} />\n        </div>\n      </div>\n    )\n\n  }\n\n}\n\nexport { EditorState }\n","import BraftEditor, { EditorState } from './editor'\nimport covert, { convertRawToEditorState, convertHTMLToEditorState, convertEditorStateToRaw, convertEditorStateToHTML } from './covert'\nimport * as utils from './utils'\nimport { createExtensibleEditor, compositeStyleImportFn, compositeStyleExportFn, compositeEntityImportFn, compositeEntityExportFn, compositeBlockImportFn, compositeBlockExportFn } from 'helpers/extension'\nimport { getDecorators } from 'renderers'\n\nEditorState.prototype.setConvertOptions = function (options = {}) {\n  this.convertOptions = options\n}\n\nEditorState.prototype.toHTML = function (options = {}) {\n  const convertOptions = this.convertOptions || {}\n  return convertEditorStateToHTML(this, {...convertOptions, ...options})\n}\n\nEditorState.prototype.toRAW = function (noStringify) {\n  return noStringify ? convertEditorStateToRaw(this) : JSON.stringify(convertEditorStateToRaw(this))\n}\n\nEditorState.prototype.toText = function () {\n  return this.getCurrentContent().getPlainText()\n}\n\nEditorState.prototype.isEmpty = function () {\n  return !this.getCurrentContent().hasText()\n}\n\nBraftEditor.createEditorState = EditorState.createFrom = (content, options = {}) => {\n\n  options.unitExportFn = options.unitExportFn || BraftEditor.defaultProps.converts.unitExportFn\n  options.styleImportFn = compositeStyleImportFn(options.styleImportFn, options.editorId)\n  options.entityImportFn = compositeEntityImportFn(options.entityImportFn, options.editorId)\n  options.blockImportFn = compositeBlockImportFn(options.blockImportFn, options.editorId)\n\n  let editorState = null\n\n  if (content instanceof EditorState) {\n    editorState = content\n  } else if (typeof content === 'object' && content && content.blocks && content.entityMap) {\n    editorState = convertRawToEditorState(content, getDecorators(options.editorId))\n  } else if (typeof content === 'string') {\n    try {\n      if (/^(-)?\\d+$/.test(content)) {\n        editorState = convertHTMLToEditorState(content, getDecorators(options.editorId), options, 'create')\n      } else {\n        editorState = EditorState.createFrom(JSON.parse(content), options)\n      }\n    } catch (error) {\n      editorState = convertHTMLToEditorState(content, getDecorators(options.editorId), options, 'create')\n    }\n  } else if (typeof content === 'number') {\n    editorState = convertHTMLToEditorState(content.toLocaleString().replace(/,/g, ''), getDecorators(options.editorId), options, 'create')\n  } else {\n    editorState = EditorState.createEmpty(getDecorators(options.editorId))\n  }\n\n  options.styleExportFn = compositeStyleExportFn(options.styleExportFn, options.editorId)\n  options.entityExportFn = compositeEntityExportFn(options.entityExportFn, options.editorId)\n  options.blockExportFn = compositeBlockExportFn(options.blockExportFn, options.editorId)\n\n  editorState.setConvertOptions(options)\n\n  return editorState\n\n}\n\nexport default createExtensibleEditor(BraftEditor)\nexport { EditorState, getDecorators }\n\nexport { convertRawToEditorState, convertHTMLToEditorState, convertEditorStateToRaw, convertEditorStateToHTML }\n\nexport {\n  utils,\n  covert\n}\n\n// 2.1版本开发计划\n// [ ]优化选中多行文字是插入链接报错的问题\n// [ ]新增编辑器内图片删除hook\n\n// 2.2版本开发计划\n// [ ]表格功能\n// [ ]美化UI，包括图标和界面风格\n\n// 2.3版本开发计划\n// [ ]初级md快捷输入支持\n// [ ]图片裁切等简单的编辑功能\n// [ ]允许自定义快捷键\n","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin"],"sourceRoot":""}