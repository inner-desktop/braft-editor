{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///../node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///../node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///external \"draft-js\"","webpack:///../node_modules/@babel/runtime/helpers/objectSpread.js","webpack:///../node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///../node_modules/@babel/runtime/helpers/createClass.js","webpack:///../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///../node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///../node_modules/@babel/runtime/helpers/inherits.js","webpack:///../node_modules/@babel/runtime/helpers/extends.js","webpack:///external \"immutable\"","webpack:///../node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///external \"draftjs-utils\"","webpack:///../node_modules/@babel/runtime/helpers/typeof.js","webpack:///../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///external \"draft-convert\"","webpack:///external \"react-dom\"","webpack:///external \"braft-finder\"","webpack:///../node_modules/draft-js-multidecorators/index.js","webpack:///../node_modules/draft-js/lib/CharacterMetadata.js","webpack:///../node_modules/draft-js/lib/findRangesImmutable.js","webpack:///../node_modules/draft-js/lib/getFragmentFromSelection.js","webpack:///../node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///../node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///../node_modules/draft-js/lib/getContentStateFragment.js","webpack:///../node_modules/draft-js/lib/randomizeBlockMapKeys.js","webpack:///../node_modules/draft-js/lib/ContentBlockNode.js","webpack:///../node_modules/draft-js/lib/generateRandomKey.js","webpack:///../node_modules/draft-js/lib/removeEntitiesAtEdges.js","webpack:///../node_modules/fbjs/lib/invariant.js","webpack:///../node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./languages/en.js","webpack:///./languages/zh.js","webpack:///./languages/index.js","webpack:///./utils/color.js","webpack:///./covert/configs.jsx","webpack:///./covert/index.js","webpack:///./utils/content.js","webpack:///./configs/keybindings.js","webpack:///./configs/props.js","webpack:///./utils/base.js","webpack:///./utils/index.js","webpack:///./configs/handlers.js","webpack:///./helpers/extension.js","webpack:///./renderers/block/blockRenderMap.js","webpack:///./components/common/Switch/index.jsx","webpack:///./configs/controls.js","webpack:///./renderers/atomics/Image/index.jsx","webpack:///./components/common/Modal/index.jsx","webpack:///./components/business/PlayerModal/index.jsx","webpack:///./renderers/atomics/Video/index.jsx","webpack:///./renderers/atomics/Audio/index.jsx","webpack:///./renderers/atomics/Embed/index.jsx","webpack:///./renderers/atomics/Attachment/index.jsx","webpack:///./renderers/atomics/HorizontalLine/index.jsx","webpack:///./renderers/block/blockRendererFn.js","webpack:///./renderers/block/blockStyleFn.js","webpack:///./renderers/inline/inlineStyleMap.js","webpack:///./renderers/inline/inlineStyleFn.js","webpack:///./renderers/decorators/Link/index.jsx","webpack:///./renderers/decorators/index.js","webpack:///./renderers/index.js","webpack:///./helpers/responsive.js","webpack:///./components/common/DropDown/index.jsx","webpack:///./components/business/ControlGroup/index.jsx","webpack:///./components/business/LinkEditor/index.jsx","webpack:///./configs/maps.js","webpack:///./components/business/Headings/index.jsx","webpack:///./components/common/ColorPicker/index.jsx","webpack:///./components/business/TextColor/index.jsx","webpack:///./components/business/FontSize/index.jsx","webpack:///./components/business/LineHeight/index.jsx","webpack:///./components/business/FontFamily/index.jsx","webpack:///./components/business/TextAlign/index.jsx","webpack:///./components/business/EmojiPicker/index.jsx","webpack:///./components/business/LetterSpacing/index.jsx","webpack:///./components/business/TextIndent/index.jsx","webpack:///./components/business/ControlBar/index.jsx","webpack:///./editor/index.jsx","webpack:///./index.jsx","webpack:///../node_modules/draft-js/dist/Draft.css","webpack:///./assets/scss/_base.scss","webpack:///./renderers/atomics/Image/style.scss","webpack:///./components/common/Switch/style.scss","webpack:///./renderers/atomics/Video/style.scss","webpack:///./components/common/Modal/style.scss","webpack:///./components/business/PlayerModal/style.scss","webpack:///./renderers/atomics/Audio/style.scss","webpack:///./renderers/atomics/Embed/style.scss","webpack:///./renderers/atomics/Attachment/style.scss","webpack:///./renderers/atomics/HorizontalLine/style.scss","webpack:///./components/business/ControlBar/style.scss","webpack:///./components/business/LinkEditor/style.scss","webpack:///./components/common/DropDown/style.scss","webpack:///./components/business/Headings/style.scss","webpack:///./components/business/TextColor/style.scss","webpack:///./components/common/ColorPicker/style.scss","webpack:///./components/business/FontSize/style.scss","webpack:///./components/business/LineHeight/style.scss","webpack:///./components/business/FontFamily/style.scss","webpack:///./components/business/EmojiPicker/style.scss","webpack:///./components/business/LetterSpacing/style.scss"],"names":["base","remove","cancel","confirm","inert","width","height","controls","clear","undo","redo","fontSize","color","textColor","tempColors","backgroundColor","bold","lineHeight","letterSpacing","textIndent","increaseIndent","decreaseIndent","italic","underline","strikeThrough","fontFamily","textAlign","alignLeft","alignCenter","alignRight","alignJustify","floatLeft","floatRight","superScript","subScript","removeStyles","headings","header","normal","orderedList","unorderedList","blockQuote","code","link","unlink","hr","media","mediaLibirary","emoji","fullscreen","exitFullscreen","linkEditor","textInputPlaceHolder","linkInputPlaceHolder","inputWithEnterPlaceHolder","openInNewWindow","removeLink","audioPlayer","title","videoPlayer","embedTitle","image","video","audio","embed","border","en","zh","_namedColors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","_getHexColor","replace","test","namedColors","indexOf","rgbArray","split","convertedColor","length","map","x","hex","parseInt","toString","join","getHexColor","detectColorsFromHTMLString","html","match","filter","detectColorsFromDraftState","draftState","result","blocks","forEach","block","inlineStyleRanges","inlineStyle","style","push","getStyleValue","defaultUnitExportFn","unit","defaultUnitImportFn","ignoredNodeAttributes","ignoredEntityNodeAttributes","spreadNodeAttributes","attributesObject","Object","keys","reduce","attributeString","attributeName","defaultFontFamilies","name","family","unstyled","blockquote","blockTypes","blockNames","key","convertAtomicBlock","contentState","blockNodeAttributes","contentBlock","getBlockForKey","className","class","nodeAttrAsProps","entityKey","getEntityAt","entity","getEntity","mediaType","getType","toLowerCase","data","float","alignment","getData","url","link_target","meta","imageWrapStyle","styledClassName","encodeURIComponent","JSON","stringify","display","__html","fileType","fileName","fileSize","entityToHTML","options","originalText","entityExportFn","entityType","type","customOutput","nodeAttributes","href","target","styleToHTML","unitExportFn","styleExportFn","textDecoration","fontFamilies","find","item","blockToHTML","blockExportFn","blockStyle","blockType","isNaN","previousBlock","getBlockBefore","nextBlock","getBlockAfter","previousBlockType","nextBlockType","start","end","nest","htmlToStyle","source","nodeName","node","currentStyle","unitImportFn","newStyle","call","add","toUpperCase","parseFloat","styleImportFn","htmlToEntity","createEntity","entityImportFn","customInput","alt","id","autoplay","loop","poster","autoPlay","attributes","attr","value","querySelectorAll","getAttribute","parentNode","entityData","classList","contains","parse","decodeURIComponent","e","console","error","embedContent","innerHTML","outerHTML","htmlToBlock","blockImportFn","nodeStyle","blockData","Math","ceil","getToHTMLConfig","getFromHTMLConfig","defaultConvertOptions","convertRawToHTML","rawContent","convertFromRaw","convertToHTML","warn","convertHTMLToRaw","HTMLString","convertFromHTML","convertToRaw","convertEditorStateToHTML","editorState","getCurrentContent","convertHTMLToEditorState","editorDecorators","EditorState","createWithContent","createEmpty","convertEditorStateToRaw","convertRawToEditorState","strictBlockTypes","registerStrictBlockType","isEditorState","createEmptyEditorState","createEditorState","isSelectionCollapsed","getSelection","isCollapsed","selectionContainsBlockType","getSelectedBlocks","selectionContainsStrictBlock","selectBlock","blockKey","getKey","forceSelection","SelectionState","anchorKey","anchorOffset","focusKey","focusOffset","getLength","selectNextBlock","removeBlock","lastSelection","nextContentState","nextEditorState","Modifier","removeRange","setBlockType","getSelectionAfter","getSelectionBlock","getAnchorKey","updateEachCharacterOfSelection","callback","selectionState","contentBlocks","getBlockMap","selectedBlocks","startKey","getStartKey","startOffset","getStartOffset","endKey","getEndKey","endOffset","getEndOffset","nextContentBlocks","charactersList","getCharacterList","nextCharactersList","character","index","merge","characterList","blockMap","selectionBefore","selectionAfter","isSameBlock","startingBlock","setSelectionBlockData","override","newBlockData","assign","getSelectionBlockData","toJS","hasOwnProperty","undefined","setBlockData","get","getSelectionBlockType","getSelectionText","currentContentBlock","getText","slice","toggleSelectionBlockType","RichUtils","toggleBlockType","getSelectionEntityType","getSelectionEntity","getSelectionEntityData","toggleSelectionEntity","applyEntity","mutability","getLastCreatedEntityKey","set","currentContent","toggleSelectionLink","toggleLink","insertText","getSelectionInlineStyle","getCurrentInlineStyle","selectionHasInlineStyle","has","toggleSelectionInlineStyle","prefix","characterMetadata","characterStyle","CharacterMetadata","removeStyle","toggleInlineStyle","removeSelectionInlineStyles","Immutable","OrderedSet","toggleSelectionAlignment","toggleSelectionIndent","maxIndent","increaseSelectionIndent","currentIndent","decreaseSelectionIndent","toggleSelectionColor","toggleSelectionBackgroundColor","toggleSelectionFontSize","toggleSelectionLineHeight","toggleSelectionFontFamily","toggleSelectionLetterSpacing","text","currentSelectedBlockType","replaceText","insertHTML","htmlString","convertOptions","replaceWithFragment","insertAtomicBlock","immutable","contentStateWithEntity","newEditorState","AtomicBlockUtils","insertHorizontalLine","insertMedias","medias","setMediaData","mergeEntityData","removeMedia","mediaBlock","setMediaPosition","position","newPosition","firstBlock","getFirstBlock","lastBlock","getLastBlock","allSelected","hasFocus","handleKeyCommand","command","customKeyBindingFn","event","keyCode","KeyBindingUtil","hasCommandModifier","isCtrlKeyCommand","getDefaultKeyBinding","language","excludeControls","extendControls","extendAtomics","componentBelowControlBar","pasteImage","imagePasteLimit","uploadFn","validateFn","onBeforeDeselect","onDeselect","onBeforeSelect","onSelect","onBeforeRemove","onRemove","onCancel","onFileSelect","onBeforeInsert","onInsert","onChange","accepts","externals","imageControls","imageResizable","colors","colorPicker","colorPickerTheme","colorPickerAutoHide","codeTabIndents","textAligns","textBackgroundColor","allowInsertLinkText","defaultLinkTarget","letterSpacings","lineHeights","fontSizes","converts","emojis","stripPastedStyles","triggerChangeOnMount","controlBarClassName","controlBarStyle","contentClassName","contentStyle","draftProps","hooks","onFocus","onBlur","onTab","onDelete","onSave","fixPlaceholder","braftUniqueIndex","UniqueIndex","keyCommandHandlers","editor","editorProps","allowIndent","cursorStart","cursorEnd","cursorIsAtFirst","ContentUtils","setValue","repeat","returnHandlers","handleReturn","currentBlock","currentBlockType","which","getModifierState","insertSoftNewline","handleNewLine","beforeInputHandlers","chars","handleBeforeInput","compositionStartHandler","_","state","dropHandlers","dataTransfer","readOnly","disabled","window","__BRAFT_DRAGING__IMAGE__","mediaData","lockOrUnlockEditor","handleFiles","files","constructor","defaultProps","file","braftFinder","validateResult","Promise","then","uploadImage","isLiving","droppedFilesHandlers","handleDroppedFiles","pastedFilesHandlers","handlePastedFiles","copyHandlers","getFragmentFromSelection","toArray","tempContentState","ContentState","createFromBlockArray","tempEditorState","clipboardData","originalEvent","setConvertOptions","setData","toHTML","toText","preventDefault","pastedTextHandlers","handlePastedText","ColorUtils","setState","array","extensionControls","extensionDecorators","propInterceptors","extensionBlockRenderMaps","extensionBlockRendererFns","extensionInlineStyleMaps","extensionInlineStyleFns","extensionEntities","inlineStyleImporters","inlineStyleExporters","blockImporters","blockExporters","filterByEditorId","items","editorId","includeEditors","excludeEditors","getPropInterceptors","getExtensionControls","getExtensionDecorators","getExtensionBlockRenderMaps","getExtensionBlockRendererFns","getExtensionInlineStyleMap","inlineStyleMap","inlineStyleName","styleMap","getExtensionInlineStyleFns","compositeStyleImportFn","styleImporter","importer","compositeStyleExportFn","exporter","compositeEntityImportFn","entityItem","matched","compositeEntityExportFn","compositeBlockImportFn","blockImporter","compositeBlockExportFn","blockExporter","useExtension","extension","Array","control","styleFn","decorator","component","renderMap","rendererFn","strategy","getDecorations","interceptor","createExtensibleEditor","BraftEditor","use","props","blockRenderMap","customBlockRenderMap","Map","atomic","element","wrapper","DefaultDraftBlockRenderMap","active","onClick","lang","isFullscreen","imageControlItems","size","Image","toolbarVisible","toolbarOffset","linkEditorVisible","sizeEditorVisible","tempLink","tempWidth","tempHeight","reSizeType","initialLeft","screenX","initialTop","screenY","initialHeight","initialWidth","changeSize","abs","confirmImageSize","document","removeEventListener","moveImage","upImage","imageRect","imageElement","getBoundingClientRect","addEventListener","stopPropagation","unlockEditor","method","param","getValue","confirmImageLink","currentTarget","hookReturns","setImmediate","forceRender","newImageSize","lockEditor","calcToolbarOffset","imageStyles","clearFix","status","renderedControlItems","executeCommand","render","showToolbar","hideToolbar","handleDragStart","handleDragEnd","instance","mediaEmbederInstance","marginLeft","toolbarElement","handleLinkInputKeyDown","setImageLink","setImageLinkTarget","handleSizeInputKeyDown","setImageWidth","setImageHeight","repareChangeSize","getContainerNode","containerNode","container","viewRect","querySelector","toolbarRect","right","left","React","Component","Modal","rootElement","ReactDOM","unmountComponentAtNode","removeChild","tagName","closeOnCancel","close","closeOnConfirm","onConfirm","closeOnBlur","onBlue","unrenderComponent","onClose","componentId","BaseUtils","visible","renderComponent","next","activeId","clearImmediate","children","confirmable","showFooter","showCancel","showConfirm","showClose","cancelText","confirmText","bottomText","childComponent","handleMouseDown","handleMaskClick","handleTransitionEnd","handleCancel","handleConfirm","createElement","body","appendChild","showModal","hostNode","modalInstance","destroy","update","playViaModal","typeIconsMap","backgroundImage","Video","videoURL","prototype","removeVideo","Audio","removeAudio","Embed","removeEmbed","Attachment","removeAttachment","HorizontalLine","removeHorizontalLine","BlockRenderFnContext","superProps","customBlockRendererFn","blockRendererFn","mediaProps","atomics","i","blockRenderer","RegExp","renderAtomicBlock","editable","blockRenderFnContext","getRenderFn","customBlockStyleFn","blockAlignment","blockIndent","blockFloat","customStyleMap","extensionInlineStyleMap","SUPERSCRIPT","top","SUBSCRIPT","bottom","styles","output","customStyleFn","viewLink","startsWith","open","KEY_SEPARATOR","CombineDecorators","decorations","fill","decorators","offset","List","builtinDecorators","Link","createStrategy","findEntityRanges","entityDecorators","strategyDecorators","classDecorators","CompositeDecorator","getBlockRenderMap","_getBlockRenderMap","getBlockRendererFn","_getBlockRendererFn","getBlockStyleFn","_getBlockStyleFn","getCustomStyleMap","_getCustomStyleMap","getCustomStyleFn","_getCustomStyleFn","getDecorators","_getDecorators","resizeEventHandlers","responsiveHelperInited","debounce","resolve","eventHandler","unresolve","clearTimeout","setTimeout","DropDown","handlerRect","dropDownHandlerElement","contentRect","dropDownContentElement","autoHide","hide","registerClickEvent","responsiveResolveId","ResponsiveHelper","fixDropDownPosition","prevState","caption","htmlCaption","showArrow","arrowActive","theme","toggle","Fragment","LinkEditor","dropDownInstance","textSelected","requestFocus","nextProps","selectedText","handeKeyDown","handleTnputText","handleInputLink","handleUnlink","getHeadings","currentHeadingIndex","findIndex","current","isActive","presetColors","dataset","TextColor","colorType","closePicker","captionStyle","currentColor","selectionStyles","ColorPicker","BuiltinColorPicker","enableBackgroundColor","switchColorType","toggleColor","toggleFontSize","currentFontSize","defaultCaption","toggleLineHeight","currentLineHeight","toggleFontFamily","fontFamilyName","currentIndex","TextAlign","currentAlignment","textAlignmentTitles","setAlignment","insertEmoji","toggleLetterSpacing","currentLetterSpacing","commandHookMap","exclusiveInlineStyles","superscript","subscript","mergeControls","commonProps","builtControls","subItem","concat","ControlBar","ReactComponent","MediaLibrary","mediaLibiraryModal","closeBraftFinder","bindBraftFinderHook","hookName","allControls","modal","extendedModals","exclusiveInlineStyle","renderedControls","editorControls","getEditorControls","itemKey","controlItem","applyControl","openBraftFinder","ref","onCreate","getUndoStack","getRedoStack","getControlItemClassName","buildHooks","defaultReturns","filterColors","colors2","isControlEnabled","controlName","getConvertOptions","draftInstance","isFocused","focus","onFullscreen","getEditorProps","valueInitialized","defaultValue","defaultEditorState","toRAW","restProps","porpsMap","BraftFinder","uploader","validator","forceUpdate","currentProps","setItems","controlBarInstance","editorLocked","placeholder","languages","externalMedias","controlBarProps","blockStyleFn","keyBindingFn","getKeyBindingFn","mixedProps","isEmpty","handleDrop","setEditorContainerNode","handleCompositionStart","handleCopyContent","noStringify","getPlainText","hasText","createFrom","content","entityMap","toLocaleString"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;AClFA,gD;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wC;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,iC;;;;;;ACfA,gD;;;;;;ACAA,qBAAqB,mBAAO,CAAC,CAAkB;;AAE/C;AACA,iBAAiB,sBAAsB;AACvC;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA,+B;;;;;;ACrBA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;ACNA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;AChBA,cAAc,mBAAO,CAAC,EAAmB;;AAEzC,4BAA4B,mBAAO,CAAC,CAAyB;;AAE7D;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4C;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;ACPA,qBAAqB,mBAAO,CAAC,EAAkB;;AAE/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,2B;;;;;;ACjBA;AACA;AACA,mBAAmB,sBAAsB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,0B;;;;;;AClBA,iD;;;;;;ACAA,wBAAwB,mBAAO,CAAC,EAAqB;;AAErD,sBAAsB,mBAAO,CAAC,EAAmB;;AAEjD,wBAAwB,mBAAO,CAAC,EAAqB;;AAErD;AACA;AACA;;AAEA,oC;;;;;;ACVA,iD;;;;;;ACAA,wBAAwB,2EAA2E,oCAAoC,mBAAmB,GAAG,EAAE,OAAO,oCAAoC,8HAA8H,GAAG,EAAE,sBAAsB;;AAEnW;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yB;;;;;;AChBA,mCAAmC,mBAAO,CAAC,EAAgC;;AAE3E;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,0C;;;;;;ACrBA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,gBAAgB,mBAAO,CAAC,EAAW;;AAEnC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e,eAAe,mBAAO,CAAC,EAAW;AAClC;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;;AAEA;;AAEA,mC;;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,qC;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,8BAA8B,mBAAO,CAAC,EAA2B;;AAEjE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,0C;;;;;;AC3BA,qBAAqB,mBAAO,CAAC,EAAkB;;AAE/C,2BAA2B,mBAAO,CAAC,EAAwB;;AAE3D,sBAAsB,mBAAO,CAAC,EAAmB;;AAEjD;AACA;AACA;;AAEA,gC;;;;;;ACVA;AACA;AACA;AACA;AACA;;AAEA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+C;;;;;;ACfA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iC;;;;;;ACTA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;;AAEA;AACA;AACA;;AAEA,oC;;;;;;ACVA;AACA;AACA;;AAEA,kC;;;;;;ACJA;AACA;AACA;;AAEA,oC;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,4BAA4B,mBAAO,CAAC,EAAyB;AAC7D,4BAA4B,mBAAO,CAAC,EAAyB;;AAE7D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,GAAG;AACH;;AAEA,yC;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,uBAAuB,mBAAO,CAAC,EAAoB;AACnD,gBAAgB,mBAAO,CAAC,EAAW;;AAEnC,wBAAwB,mBAAO,CAAC,EAAqB;;AAErD;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,uC;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e,wBAAwB,mBAAO,CAAC,EAAqB;AACrD,gBAAgB,mBAAO,CAAC,EAAW;;AAEnC,0BAA0B,mBAAO,CAAC,EAAuB;;AAEzD;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;;AAED,kC;;;;;;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mC;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,wBAAwB,mBAAO,CAAC,EAAqB;;AAErD,0BAA0B,mBAAO,CAAC,EAAuB;AACzD,gBAAgB,mBAAO,CAAC,EAAoB;;AAE5C;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,sBAAsB;AACtB;AACA,GAAG;AACH,wCAAwC,M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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"draft-js\"), require(\"immutable\"), require(\"draftjs-utils\"), require(\"draft-convert\"), require(\"react-dom\"), require(\"braft-finder\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"draft-js\", \"immutable\", \"draftjs-utils\", \"draft-convert\", \"react-dom\", \"braft-finder\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"react\"), require(\"draft-js\"), require(\"immutable\"), require(\"draftjs-utils\"), require(\"draft-convert\"), require(\"react-dom\"), require(\"braft-finder\")) : factory(root[\"react\"], root[\"draft-js\"], root[\"immutable\"], root[\"draftjs-utils\"], root[\"draft-convert\"], root[\"react-dom\"], root[\"braft-finder\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__13__, __WEBPACK_EXTERNAL_MODULE__16__, __WEBPACK_EXTERNAL_MODULE__17__, __WEBPACK_EXTERNAL_MODULE__18__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 38);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","module.exports = __WEBPACK_EXTERNAL_MODULE__16__;","module.exports = __WEBPACK_EXTERNAL_MODULE__17__;","module.exports = __WEBPACK_EXTERNAL_MODULE__18__;","var Immutable = require('immutable');\n\nvar KEY_SEPARATOR = '-';\n\nfunction MultiDecorator(decorators) {\n    this.decorators = Immutable.List(decorators);\n}\n\n/**\n    Return list of decoration IDs per character\n\n    @param {ContentBlock}\n    @return {List<String>}\n*/\nMultiDecorator.prototype.getDecorations = function(block) {\n    var decorations = Array(block.getText().length).fill(null);\n\n    this.decorators.forEach(function(decorator, i) {\n        var _decorations = decorator.getDecorations(block);\n\n        _decorations.forEach(function(key, offset) {\n            if (!key) {\n                return;\n            }\n\n            key = i + KEY_SEPARATOR + key;\n\n            decorations[offset] = key;\n        });\n    });\n\n    return Immutable.List(decorations);\n};\n\n/**\n    Return component to render a decoration\n\n    @param {String}\n    @return {Function}\n*/\nMultiDecorator.prototype.getComponentForKey = function(key) {\n    var decorator = this.getDecoratorForKey(key);\n    return decorator.getComponentForKey(\n        this.getInnerKey(key)\n    );\n};\n\n/**\n    Return props to render a decoration\n\n    @param {String}\n    @return {Object}\n*/\nMultiDecorator.prototype.getPropsForKey = function(key) {\n    var decorator = this.getDecoratorForKey(key);\n    return decorator.getPropsForKey(\n        this.getInnerKey(key)\n    );\n};\n\n/**\n    Return a decorator for a specific key\n\n    @param {String}\n    @return {Decorator}\n*/\nMultiDecorator.prototype.getDecoratorForKey = function(key) {\n    var parts = key.split(KEY_SEPARATOR);\n    var index = Number(parts[0]);\n\n    return this.decorators.get(index);\n};\n\n/**\n    Return inner key for a decorator\n\n    @param {String}\n    @return {String}\n*/\nMultiDecorator.prototype.getInnerKey = function(key) {\n    var parts = key.split(KEY_SEPARATOR);\n    return parts.slice(1).join(KEY_SEPARATOR);\n};\n\nmodule.exports = MultiDecorator;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule CharacterMetadata\n * @format\n * \n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = require('immutable'),\n    Map = _require.Map,\n    OrderedSet = _require.OrderedSet,\n    Record = _require.Record;\n\n// Immutable.map is typed such that the value for every key in the map\n// must be the same type\n\n\nvar EMPTY_SET = OrderedSet();\n\nvar defaultRecord = {\n  style: EMPTY_SET,\n  entity: null\n};\n\nvar CharacterMetadataRecord = Record(defaultRecord);\n\nvar CharacterMetadata = function (_CharacterMetadataRec) {\n  _inherits(CharacterMetadata, _CharacterMetadataRec);\n\n  function CharacterMetadata() {\n    _classCallCheck(this, CharacterMetadata);\n\n    return _possibleConstructorReturn(this, _CharacterMetadataRec.apply(this, arguments));\n  }\n\n  CharacterMetadata.prototype.getStyle = function getStyle() {\n    return this.get('style');\n  };\n\n  CharacterMetadata.prototype.getEntity = function getEntity() {\n    return this.get('entity');\n  };\n\n  CharacterMetadata.prototype.hasStyle = function hasStyle(style) {\n    return this.getStyle().includes(style);\n  };\n\n  CharacterMetadata.applyStyle = function applyStyle(record, style) {\n    var withStyle = record.set('style', record.getStyle().add(style));\n    return CharacterMetadata.create(withStyle);\n  };\n\n  CharacterMetadata.removeStyle = function removeStyle(record, style) {\n    var withoutStyle = record.set('style', record.getStyle().remove(style));\n    return CharacterMetadata.create(withoutStyle);\n  };\n\n  CharacterMetadata.applyEntity = function applyEntity(record, entityKey) {\n    var withEntity = record.getEntity() === entityKey ? record : record.set('entity', entityKey);\n    return CharacterMetadata.create(withEntity);\n  };\n\n  /**\n   * Use this function instead of the `CharacterMetadata` constructor.\n   * Since most content generally uses only a very small number of\n   * style/entity permutations, we can reuse these objects as often as\n   * possible.\n   */\n\n\n  CharacterMetadata.create = function create(config) {\n    if (!config) {\n      return EMPTY;\n    }\n\n    var defaultConfig = {\n      style: EMPTY_SET,\n      entity: null\n    };\n\n    // Fill in unspecified properties, if necessary.\n    var configMap = Map(defaultConfig).merge(config);\n\n    var existing = pool.get(configMap);\n    if (existing) {\n      return existing;\n    }\n\n    var newCharacter = new CharacterMetadata(configMap);\n    pool = pool.set(configMap, newCharacter);\n    return newCharacter;\n  };\n\n  return CharacterMetadata;\n}(CharacterMetadataRecord);\n\nvar EMPTY = new CharacterMetadata();\nvar pool = Map([[Map(defaultRecord), EMPTY]]);\n\nCharacterMetadata.EMPTY = EMPTY;\n\nmodule.exports = CharacterMetadata;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule findRangesImmutable\n * @format\n * \n */\n\n'use strict';\n\n/**\n * Search through an array to find contiguous stretches of elements that\n * match a specified filter function.\n *\n * When ranges are found, execute a specified `found` function to supply\n * the values to the caller.\n */\nfunction findRangesImmutable(haystack, areEqualFn, filterFn, foundFn) {\n  if (!haystack.size) {\n    return;\n  }\n\n  var cursor = 0;\n\n  haystack.reduce(function (value, nextValue, nextIndex) {\n    if (!areEqualFn(value, nextValue)) {\n      if (filterFn(value)) {\n        foundFn(cursor, nextIndex);\n      }\n      cursor = nextIndex;\n    }\n    return nextValue;\n  });\n\n  filterFn(haystack.last()) && foundFn(cursor, haystack.count());\n}\n\nmodule.exports = findRangesImmutable;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule getFragmentFromSelection\n * @format\n * \n */\n\n'use strict';\n\nvar getContentStateFragment = require('./getContentStateFragment');\n\nfunction getFragmentFromSelection(editorState) {\n  var selectionState = editorState.getSelection();\n\n  if (selectionState.isCollapsed()) {\n    return null;\n  }\n\n  return getContentStateFragment(editorState.getCurrentContent(), selectionState);\n}\n\nmodule.exports = getFragmentFromSelection;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule getContentStateFragment\n * @format\n * \n */\n\n'use strict';\n\nvar randomizeBlockMapKeys = require('./randomizeBlockMapKeys');\nvar removeEntitiesAtEdges = require('./removeEntitiesAtEdges');\n\nvar getContentStateFragment = function getContentStateFragment(contentState, selectionState) {\n  var startKey = selectionState.getStartKey();\n  var startOffset = selectionState.getStartOffset();\n  var endKey = selectionState.getEndKey();\n  var endOffset = selectionState.getEndOffset();\n\n  // Edge entities should be stripped to ensure that we don't preserve\n  // invalid partial entities when the fragment is reused. We do, however,\n  // preserve entities that are entirely within the selection range.\n  var contentWithoutEdgeEntities = removeEntitiesAtEdges(contentState, selectionState);\n\n  var blockMap = contentWithoutEdgeEntities.getBlockMap();\n  var blockKeys = blockMap.keySeq();\n  var startIndex = blockKeys.indexOf(startKey);\n  var endIndex = blockKeys.indexOf(endKey) + 1;\n\n  return randomizeBlockMapKeys(blockMap.slice(startIndex, endIndex).map(function (block, blockKey) {\n    var text = block.getText();\n    var chars = block.getCharacterList();\n\n    if (startKey === endKey) {\n      return block.merge({\n        text: text.slice(startOffset, endOffset),\n        characterList: chars.slice(startOffset, endOffset)\n      });\n    }\n\n    if (blockKey === startKey) {\n      return block.merge({\n        text: text.slice(startOffset),\n        characterList: chars.slice(startOffset)\n      });\n    }\n\n    if (blockKey === endKey) {\n      return block.merge({\n        text: text.slice(0, endOffset),\n        characterList: chars.slice(0, endOffset)\n      });\n    }\n\n    return block;\n  }));\n};\n\nmodule.exports = getContentStateFragment;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule randomizeBlockMapKeys\n * @format\n * \n */\n\n'use strict';\n\nvar ContentBlockNode = require('./ContentBlockNode');\nvar Immutable = require('immutable');\n\nvar generateRandomKey = require('./generateRandomKey');\n\nvar OrderedMap = Immutable.OrderedMap;\n\n\nvar randomizeContentBlockNodeKeys = function randomizeContentBlockNodeKeys(blockMap) {\n  var newKeysRef = {};\n\n  // we keep track of root blocks in order to update subsequent sibling links\n  var lastRootBlock = void 0;\n\n  return OrderedMap(blockMap.withMutations(function (blockMapState) {\n    blockMapState.forEach(function (block, index) {\n      var oldKey = block.getKey();\n      var nextKey = block.getNextSiblingKey();\n      var prevKey = block.getPrevSiblingKey();\n      var childrenKeys = block.getChildKeys();\n      var parentKey = block.getParentKey();\n\n      // new key that we will use to build linking\n      var key = generateRandomKey();\n\n      // we will add it here to re-use it later\n      newKeysRef[oldKey] = key;\n\n      if (nextKey) {\n        var nextBlock = blockMapState.get(nextKey);\n        if (nextBlock) {\n          blockMapState.setIn([nextKey, 'prevSibling'], key);\n        } else {\n          // this can happen when generating random keys for fragments\n          blockMapState.setIn([oldKey, 'nextSibling'], null);\n        }\n      }\n\n      if (prevKey) {\n        var prevBlock = blockMapState.get(prevKey);\n        if (prevBlock) {\n          blockMapState.setIn([prevKey, 'nextSibling'], key);\n        } else {\n          // this can happen when generating random keys for fragments\n          blockMapState.setIn([oldKey, 'prevSibling'], null);\n        }\n      }\n\n      if (parentKey && blockMapState.get(parentKey)) {\n        var parentBlock = blockMapState.get(parentKey);\n        var parentChildrenList = parentBlock.getChildKeys();\n        blockMapState.setIn([parentKey, 'children'], parentChildrenList.set(parentChildrenList.indexOf(block.getKey()), key));\n      } else {\n        // blocks will then be treated as root block nodes\n        blockMapState.setIn([oldKey, 'parent'], null);\n\n        if (lastRootBlock) {\n          blockMapState.setIn([lastRootBlock.getKey(), 'nextSibling'], key);\n          blockMapState.setIn([oldKey, 'prevSibling'], newKeysRef[lastRootBlock.getKey()]);\n        }\n\n        lastRootBlock = blockMapState.get(oldKey);\n      }\n\n      childrenKeys.forEach(function (childKey) {\n        var childBlock = blockMapState.get(childKey);\n        if (childBlock) {\n          blockMapState.setIn([childKey, 'parent'], key);\n        } else {\n          blockMapState.setIn([oldKey, 'children'], block.getChildKeys().filter(function (child) {\n            return child !== childKey;\n          }));\n        }\n      });\n    });\n  }).toArray().map(function (block) {\n    return [newKeysRef[block.getKey()], block.set('key', newKeysRef[block.getKey()])];\n  }));\n};\n\nvar randomizeContentBlockKeys = function randomizeContentBlockKeys(blockMap) {\n  return OrderedMap(blockMap.toArray().map(function (block) {\n    var key = generateRandomKey();\n    return [key, block.set('key', key)];\n  }));\n};\n\nvar randomizeBlockMapKeys = function randomizeBlockMapKeys(blockMap) {\n  var isTreeBasedBlockMap = blockMap.first() instanceof ContentBlockNode;\n\n  if (!isTreeBasedBlockMap) {\n    return randomizeContentBlockKeys(blockMap);\n  }\n\n  return randomizeContentBlockNodeKeys(blockMap);\n};\n\nmodule.exports = randomizeBlockMapKeys;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ContentBlockNode\n * @format\n * \n *\n * This file is a fork of ContentBlock adding support for nesting references by\n * providing links to children, parent, prevSibling, and nextSibling.\n *\n * This is unstable and not part of the public API and should not be used by\n * production systems. This file may be update/removed without notice.\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CharacterMetadata = require('./CharacterMetadata');\nvar Immutable = require('immutable');\n\nvar findRangesImmutable = require('./findRangesImmutable');\n\nvar List = Immutable.List,\n    Map = Immutable.Map,\n    OrderedSet = Immutable.OrderedSet,\n    Record = Immutable.Record,\n    Repeat = Immutable.Repeat;\n\n\nvar EMPTY_SET = OrderedSet();\n\nvar defaultRecord = {\n  parent: null,\n  characterList: List(),\n  data: Map(),\n  depth: 0,\n  key: '',\n  text: '',\n  type: 'unstyled',\n  children: List(),\n  prevSibling: null,\n  nextSibling: null\n};\n\nvar haveEqualStyle = function haveEqualStyle(charA, charB) {\n  return charA.getStyle() === charB.getStyle();\n};\n\nvar haveEqualEntity = function haveEqualEntity(charA, charB) {\n  return charA.getEntity() === charB.getEntity();\n};\n\nvar decorateCharacterList = function decorateCharacterList(config) {\n  if (!config) {\n    return config;\n  }\n\n  var characterList = config.characterList,\n      text = config.text;\n\n\n  if (text && !characterList) {\n    config.characterList = List(Repeat(CharacterMetadata.EMPTY, text.length));\n  }\n\n  return config;\n};\n\nvar ContentBlockNode = function (_Record) {\n  _inherits(ContentBlockNode, _Record);\n\n  function ContentBlockNode() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultRecord;\n\n    _classCallCheck(this, ContentBlockNode);\n\n    return _possibleConstructorReturn(this, _Record.call(this, decorateCharacterList(props)));\n  }\n\n  ContentBlockNode.prototype.getKey = function getKey() {\n    return this.get('key');\n  };\n\n  ContentBlockNode.prototype.getType = function getType() {\n    return this.get('type');\n  };\n\n  ContentBlockNode.prototype.getText = function getText() {\n    return this.get('text');\n  };\n\n  ContentBlockNode.prototype.getCharacterList = function getCharacterList() {\n    return this.get('characterList');\n  };\n\n  ContentBlockNode.prototype.getLength = function getLength() {\n    return this.getText().length;\n  };\n\n  ContentBlockNode.prototype.getDepth = function getDepth() {\n    return this.get('depth');\n  };\n\n  ContentBlockNode.prototype.getData = function getData() {\n    return this.get('data');\n  };\n\n  ContentBlockNode.prototype.getInlineStyleAt = function getInlineStyleAt(offset) {\n    var character = this.getCharacterList().get(offset);\n    return character ? character.getStyle() : EMPTY_SET;\n  };\n\n  ContentBlockNode.prototype.getEntityAt = function getEntityAt(offset) {\n    var character = this.getCharacterList().get(offset);\n    return character ? character.getEntity() : null;\n  };\n\n  ContentBlockNode.prototype.getChildKeys = function getChildKeys() {\n    return this.get('children');\n  };\n\n  ContentBlockNode.prototype.getParentKey = function getParentKey() {\n    return this.get('parent');\n  };\n\n  ContentBlockNode.prototype.getPrevSiblingKey = function getPrevSiblingKey() {\n    return this.get('prevSibling');\n  };\n\n  ContentBlockNode.prototype.getNextSiblingKey = function getNextSiblingKey() {\n    return this.get('nextSibling');\n  };\n\n  ContentBlockNode.prototype.findStyleRanges = function findStyleRanges(filterFn, callback) {\n    findRangesImmutable(this.getCharacterList(), haveEqualStyle, filterFn, callback);\n  };\n\n  ContentBlockNode.prototype.findEntityRanges = function findEntityRanges(filterFn, callback) {\n    findRangesImmutable(this.getCharacterList(), haveEqualEntity, filterFn, callback);\n  };\n\n  return ContentBlockNode;\n}(Record(defaultRecord));\n\nmodule.exports = ContentBlockNode;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule generateRandomKey\n * @format\n * \n */\n\n'use strict';\n\nvar seenKeys = {};\nvar MULTIPLIER = Math.pow(2, 24);\n\nfunction generateRandomKey() {\n  var key = void 0;\n  while (key === undefined || seenKeys.hasOwnProperty(key) || !isNaN(+key)) {\n    key = Math.floor(Math.random() * MULTIPLIER).toString(32);\n  }\n  seenKeys[key] = true;\n  return key;\n}\n\nmodule.exports = generateRandomKey;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule removeEntitiesAtEdges\n * @format\n * \n */\n\n'use strict';\n\nvar CharacterMetadata = require('./CharacterMetadata');\n\nvar findRangesImmutable = require('./findRangesImmutable');\nvar invariant = require('fbjs/lib/invariant');\n\nfunction removeEntitiesAtEdges(contentState, selectionState) {\n  var blockMap = contentState.getBlockMap();\n  var entityMap = contentState.getEntityMap();\n\n  var updatedBlocks = {};\n\n  var startKey = selectionState.getStartKey();\n  var startOffset = selectionState.getStartOffset();\n  var startBlock = blockMap.get(startKey);\n  var updatedStart = removeForBlock(entityMap, startBlock, startOffset);\n\n  if (updatedStart !== startBlock) {\n    updatedBlocks[startKey] = updatedStart;\n  }\n\n  var endKey = selectionState.getEndKey();\n  var endOffset = selectionState.getEndOffset();\n  var endBlock = blockMap.get(endKey);\n  if (startKey === endKey) {\n    endBlock = updatedStart;\n  }\n\n  var updatedEnd = removeForBlock(entityMap, endBlock, endOffset);\n\n  if (updatedEnd !== endBlock) {\n    updatedBlocks[endKey] = updatedEnd;\n  }\n\n  if (!Object.keys(updatedBlocks).length) {\n    return contentState.set('selectionAfter', selectionState);\n  }\n\n  return contentState.merge({\n    blockMap: blockMap.merge(updatedBlocks),\n    selectionAfter: selectionState\n  });\n}\n\nfunction getRemovalRange(characters, key, offset) {\n  var removalRange;\n  findRangesImmutable(characters, function (a, b) {\n    return a.getEntity() === b.getEntity();\n  }, function (element) {\n    return element.getEntity() === key;\n  }, function (start, end) {\n    if (start <= offset && end >= offset) {\n      removalRange = { start: start, end: end };\n    }\n  });\n  !(typeof removalRange === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Removal range must exist within character list.') : invariant(false) : void 0;\n  return removalRange;\n}\n\nfunction removeForBlock(entityMap, block, offset) {\n  var chars = block.getCharacterList();\n  var charBefore = offset > 0 ? chars.get(offset - 1) : undefined;\n  var charAfter = offset < chars.count() ? chars.get(offset) : undefined;\n  var entityBeforeCursor = charBefore ? charBefore.getEntity() : undefined;\n  var entityAfterCursor = charAfter ? charAfter.getEntity() : undefined;\n\n  if (entityAfterCursor && entityAfterCursor === entityBeforeCursor) {\n    var entity = entityMap.__get(entityAfterCursor);\n    if (entity.getMutability() !== 'MUTABLE') {\n      var _getRemovalRange = getRemovalRange(chars, entityAfterCursor, offset),\n          start = _getRemovalRange.start,\n          end = _getRemovalRange.end;\n\n      var current;\n      while (start < end) {\n        current = chars.get(start);\n        chars = chars.set(start, CharacterMetadata.applyEntity(current, null));\n        start++;\n      }\n      return block.set('characterList', chars);\n    }\n  }\n\n  return block;\n}\n\nmodule.exports = removeEntitiesAtEdges;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","export default {\n  base: {\n    remove: 'Remove',\n    cancel: 'Cancel',\n    confirm: 'Confirm',\n    inert: 'Insert',\n    width: 'Width',\n    height: 'Height',\n  },\n  controls: {\n    clear: 'Clear',\n    undo: 'Undo',\n    redo: 'Redo',\n    fontSize: 'Font Size',\n    color: 'Color',\n    textColor: 'Text',\n    tempColors: 'Temp Colors',\n    backgroundColor: 'Background',\n    bold: 'Bold',\n    lineHeight: 'Line Height',\n    letterSpacing: 'Letter Spacing',\n    textIndent: 'Text Indent',\n    increaseIndent: 'Increase Indent',\n    decreaseIndent: 'Decrease Indent',\n    italic: 'Italic',\n    underline: 'Underline',\n    strikeThrough: 'Strike Through',\n    fontFamily: 'Font Family',\n    textAlign: 'Text Alignment',\n    alignLeft: 'Left Alignment',\n    alignCenter: 'Center Alignment',\n    alignRight: 'Right Alignment',\n    alignJustify: 'Justify Alignment',\n    floatLeft: 'Left Float',\n    floatRight: 'Right Float',\n    superScript: 'Super Script',\n    subScript: 'Sub Script',\n    removeStyles: 'Remove Styles',\n    headings: 'Headings',\n    header: 'Header',\n    normal: 'Normal',\n    orderedList: 'Ordered List',\n    unorderedList: 'Unordered List',\n    blockQuote: 'Quote',\n    code: 'Code',\n    link: 'Link',\n    unlink: 'Unlink',\n    hr: 'Horizontal Line',\n    media: 'Media',\n    mediaLibirary: 'Media Library',\n    emoji: 'Emoji',\n    fullscreen: 'Fullscreen',\n    exitFullscreen: 'Exit Fullscreen',\n  },\n  linkEditor: {\n    textInputPlaceHolder: 'Input link text',\n    linkInputPlaceHolder: 'Input link URL',\n    inputWithEnterPlaceHolder: 'Input link URL and press Enter',\n    openInNewWindow: 'Open in new window',\n    removeLink: 'Remove Link',\n  },\n  audioPlayer: {\n    title: 'Play Audio',\n  },\n  videoPlayer: {\n    title: 'Play Video',\n    embedTitle: 'Embed Media',\n  },\n  media: {\n    image: 'Image',\n    video: 'Video',\n    audio: 'Audio',\n    embed: 'Embed',\n  },\n};\n","export default {\n  base: {\n    remove: '删除',\n    cancel: '取消',\n    confirm: '确定',\n    inert: '插入',\n    width: '宽度',\n    height: '高度',\n  },\n  controls: {\n    clear: '清除内容',\n    undo: '撤销',\n    redo: '重做',\n    fontSize: '字号',\n    lineHeight: '行高',\n    letterSpacing: '字间距',\n    textIndent: '段落缩进',\n    increaseIndent: '增加缩进',\n    decreaseIndent: '减少缩进',\n    border: '边框',\n    color: '颜色',\n    textColor: '文字颜色',\n    backgroundColor: '背景颜色',\n    tempColors: '临时颜色',\n    bold: '加粗',\n    italic: '斜体',\n    underline: '下划线',\n    strikeThrough: '删除线',\n    fontFamily: '字体',\n    textAlign: '文本对齐',\n    alignLeft: '居左',\n    alignCenter: '居中',\n    alignRight: '居右',\n    alignJustify: '两端',\n    floatLeft: '左浮动',\n    floatRight: '右浮动',\n    superScript: '上标',\n    subScript: '下标',\n    removeStyles: '清除样式',\n    headings: '标题',\n    header: '标题',\n    normal: '常规',\n    orderedList: '有序列表',\n    unorderedList: '无序列表',\n    blockQuote: '引用',\n    code: '代码',\n    link: '链接',\n    unlink: '清除链接',\n    hr: '水平线',\n    media: '媒体',\n    mediaLibirary: '媒体库',\n    emoji: '小表情',\n    fullscreen: '全屏',\n    exitFullscreen: '退出全屏',\n  },\n  linkEditor: {\n    textInputPlaceHolder: '输入链接文字',\n    linkInputPlaceHolder: '输入链接地址',\n    inputWithEnterPlaceHolder: '输入链接地址并回车',\n    openInNewWindow: '在新窗口打开',\n    removeLink: '移除链接',\n  },\n  audioPlayer: {\n    title: '播放音频文件',\n  },\n  videoPlayer: {\n    title: '播放视频文件',\n    embedTitle: '嵌入式媒体',\n  },\n  media: {\n    image: '图像',\n    video: '视频',\n    audio: '音频',\n    embed: '嵌入式媒体',\n  },\n};\n","import en from './en';\nimport zh from './zh';\n\nexport default {\n  en: en,\n  zh: zh,\n};\n","const _namedColors = {\n  aliceblue: '#f0f8ff',\n  antiquewhite: '#faebd7',\n  aqua: '#00ffff',\n  aquamarine: '#7fffd4',\n  azure: '#f0ffff',\n  beige: '#f5f5dc',\n  bisque: '#ffe4c4',\n  black: '#000000',\n  blanchedalmond: '#ffebcd',\n  blue: '#0000ff',\n  blueviolet: '#8a2be2',\n  brown: '#a52a2a',\n  burlywood: '#deb887',\n  cadetblue: '#5f9ea0',\n  chartreuse: '#7fff00',\n  chocolate: '#d2691e',\n  coral: '#ff7f50',\n  cornflowerblue: '#6495ed',\n  cornsilk: '#fff8dc',\n  crimson: '#dc143c',\n  cyan: '#00ffff',\n  darkblue: '#00008b',\n  darkcyan: '#008b8b',\n  darkgoldenrod: '#b8860b',\n  darkgray: '#a9a9a9',\n  darkgreen: '#006400',\n  darkkhaki: '#bdb76b',\n  darkmagenta: '#8b008b',\n  darkolivegreen: '#556b2f',\n  darkorange: '#ff8c00',\n  darkorchid: '#9932cc',\n  darkred: '#8b0000',\n  darksalmon: '#e9967a',\n  darkseagreen: '#8fbc8f',\n  darkslateblue: '#483d8b',\n  darkslategray: '#2f4f4f',\n  darkturquoise: '#00ced1',\n  darkviolet: '#9400d3',\n  deeppink: '#ff1493',\n  deepskyblue: '#00bfff',\n  dimgray: '#696969',\n  dodgerblue: '#1e90ff',\n  firebrick: '#b22222',\n  floralwhite: '#fffaf0',\n  forestgreen: '#228b22',\n  fuchsia: '#ff00ff',\n  gainsboro: '#dcdcdc',\n  ghostwhite: '#f8f8ff',\n  gold: '#ffd700',\n  goldenrod: '#daa520',\n  gray: '#808080',\n  green: '#008000',\n  greenyellow: '#adff2f',\n  honeydew: '#f0fff0',\n  hotpink: '#ff69b4',\n  'indianred ': '#cd5c5c',\n  indigo: '#4b0082',\n  ivory: '#fffff0',\n  khaki: '#f0e68c',\n  lavender: '#e6e6fa',\n  lavenderblush: '#fff0f5',\n  lawngreen: '#7cfc00',\n  lemonchiffon: '#fffacd',\n  lightblue: '#add8e6',\n  lightcoral: '#f08080',\n  lightcyan: '#e0ffff',\n  lightgoldenrodyellow: '#fafad2',\n  lightgrey: '#d3d3d3',\n  lightgreen: '#90ee90',\n  lightpink: '#ffb6c1',\n  lightsalmon: '#ffa07a',\n  lightseagreen: '#20b2aa',\n  lightskyblue: '#87cefa',\n  lightslategray: '#778899',\n  lightsteelblue: '#b0c4de',\n  lightyellow: '#ffffe0',\n  lime: '#00ff00',\n  limegreen: '#32cd32',\n  linen: '#faf0e6',\n  magenta: '#ff00ff',\n  maroon: '#800000',\n  mediumaquamarine: '#66cdaa',\n  mediumblue: '#0000cd',\n  mediumorchid: '#ba55d3',\n  mediumpurple: '#9370d8',\n  mediumseagreen: '#3cb371',\n  mediumslateblue: '#7b68ee',\n  mediumspringgreen: '#00fa9a',\n  mediumturquoise: '#48d1cc',\n  mediumvioletred: '#c71585',\n  midnightblue: '#191970',\n  mintcream: '#f5fffa',\n  mistyrose: '#ffe4e1',\n  moccasin: '#ffe4b5',\n  navajowhite: '#ffdead',\n  navy: '#000080',\n  oldlace: '#fdf5e6',\n  olive: '#808000',\n  olivedrab: '#6b8e23',\n  orange: '#ffa500',\n  orangered: '#ff4500',\n  orchid: '#da70d6',\n  palegoldenrod: '#eee8aa',\n  palegreen: '#98fb98',\n  paleturquoise: '#afeeee',\n  palevioletred: '#d87093',\n  papayawhip: '#ffefd5',\n  peachpuff: '#ffdab9',\n  peru: '#cd853f',\n  pink: '#ffc0cb',\n  plum: '#dda0dd',\n  powderblue: '#b0e0e6',\n  purple: '#800080',\n  rebeccapurple: '#663399',\n  red: '#ff0000',\n  rosybrown: '#bc8f8f',\n  royalblue: '#4169e1',\n  saddlebrown: '#8b4513',\n  salmon: '#fa8072',\n  sandybrown: '#f4a460',\n  seagreen: '#2e8b57',\n  seashell: '#fff5ee',\n  sienna: '#a0522d',\n  silver: '#c0c0c0',\n  skyblue: '#87ceeb',\n  slateblue: '#6a5acd',\n  slategray: '#708090',\n  snow: '#fffafa',\n  springgreen: '#00ff7f',\n  steelblue: '#4682b4',\n  tan: '#d2b48c',\n  teal: '#008080',\n  thistle: '#d8bfd8',\n  tomato: '#ff6347',\n  turquoise: '#40e0d0',\n  violet: '#ee82ee',\n  wheat: '#f5deb3',\n  white: '#ffffff',\n  whitesmoke: '#f5f5f5',\n  yellow: '#ffff00',\n  yellowgreen: '#9acd32',\n};\n\nconst _getHexColor = (color) => {\n  color = color.replace('color:', '').replace(';', '').replace(' ', '');\n\n  if (/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(color)) {\n    return color;\n  } else if (namedColors[color]) {\n    return namedColors[color];\n  } else if (color.indexOf('rgb') === 0) {\n    let rgbArray = color.split(',');\n    let convertedColor =\n      rgbArray.length < 3\n        ? null\n        : '#' +\n          [rgbArray[0], rgbArray[1], rgbArray[2]]\n            .map((x) => {\n              const hex = parseInt(x.replace(/\\D/g, ''), 10).toString(16);\n              return hex.length === 1 ? '0' + hex : hex;\n            })\n            .join('');\n\n    return /^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(convertedColor)\n      ? convertedColor\n      : null;\n  } else {\n    return null;\n  }\n};\n\nexport const namedColors = _namedColors;\nexport const getHexColor = _getHexColor;\n\nexport const detectColorsFromHTMLString = (html) => {\n  return typeof html !== 'string'\n    ? []\n    : (html.match(/color:[^;]{3,24};/g) || [])\n        .map(getHexColor)\n        .filter((color) => color);\n};\n\nexport const detectColorsFromDraftState = (draftState) => {\n  let result = [];\n\n  if (!draftState || !draftState.blocks || !draftState.blocks.length) {\n    return result;\n  }\n\n  draftState.blocks.forEach((block) => {\n    if (block && block.inlineStyleRanges && block.inlineStyleRanges.length) {\n      block.inlineStyleRanges.forEach((inlineStyle) => {\n        if (inlineStyle.style && inlineStyle.style.indexOf('COLOR-') >= 0) {\n          result.push('#' + inlineStyle.style.split('COLOR-')[1]);\n        }\n      });\n    }\n  });\n\n  return result.filter((color) => color);\n};\n","import React from 'react';\nimport { namedColors } from '../utils/color';\n\nconst getStyleValue = (style) => style.split('-')[1];\nconst defaultUnitExportFn = (unit) => unit + 'px';\nconst defaultUnitImportFn = (unit) => unit.replace('px', '');\n\nconst ignoredNodeAttributes = ['style'];\nconst ignoredEntityNodeAttributes = [\n  'style',\n  'href',\n  'target',\n  'alt',\n  'title',\n  'id',\n  'controls',\n  'autoplay',\n  'loop',\n  'poster',\n];\n\nconst spreadNodeAttributes = (attributesObject) => {\n  return Object.keys(attributesObject)\n    .reduce((attributeString, attributeName) => {\n      return `${attributeString} ${attributeName}=\"${attributesObject[attributeName]}\"`;\n    }, '')\n    .replace(/^\\s$/, '');\n};\n\nexport const defaultFontFamilies = [\n  {\n    name: 'Araial',\n    family: 'Arial, Helvetica, sans-serif',\n  },\n  {\n    name: 'Georgia',\n    family: 'Georgia, serif',\n  },\n  {\n    name: 'Impact',\n    family: 'Impact, serif',\n  },\n  {\n    name: 'Monospace',\n    family: '\"Courier New\", Courier, monospace',\n  },\n  {\n    name: 'Tahoma',\n    family: \"tahoma, arial, 'Hiragino Sans GB', 宋体, sans-serif\",\n  },\n];\n\nexport const getHexColor = (color) => {\n  color = color.replace('color:', '').replace(';', '').replace(' ', '');\n\n  if (/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(color)) {\n    return color;\n  } else if (namedColors[color]) {\n    return namedColors[color];\n  } else if (color.indexOf('rgb') === 0) {\n    let rgbArray = color.split(',');\n    let convertedColor =\n      rgbArray.length < 3\n        ? null\n        : '#' +\n          [rgbArray[0], rgbArray[1], rgbArray[2]]\n            .map((x) => {\n              const hex = parseInt(x.replace(/\\D/g, ''), 10).toString(16);\n              return hex.length === 1 ? '0' + hex : hex;\n            })\n            .join('');\n\n    return /^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(convertedColor)\n      ? convertedColor\n      : null;\n  } else {\n    return null;\n  }\n};\n\nexport const blocks = {\n  'header-one': 'h1',\n  'header-two': 'h2',\n  'header-three': 'h3',\n  'header-four': 'h4',\n  'header-five': 'h5',\n  'header-six': 'h6',\n  unstyled: 'p',\n  blockquote: 'blockquote',\n};\n\nconst blockTypes = Object.keys(blocks);\nconst blockNames = blockTypes.map((key) => blocks[key]);\n\nconst convertAtomicBlock = (block, contentState, blockNodeAttributes) => {\n  if (!block || !block.key) {\n    return <p />;\n  }\n\n  const contentBlock = contentState.getBlockForKey(block.key);\n\n  let { class: className, ...nodeAttrAsProps } = blockNodeAttributes;\n  nodeAttrAsProps.className = className;\n\n  if (!contentBlock) {\n    return <p />;\n  }\n\n  const entityKey = contentBlock.getEntityAt(0);\n\n  if (!entityKey) {\n    return <p />;\n  }\n\n  const entity = contentState.getEntity(entityKey);\n  const mediaType = entity.getType().toLowerCase();\n\n  let { float, alignment } = block.data;\n  let { url, link, link_target, width, height, meta = {} } = entity.getData();\n\n  if (mediaType === 'image') {\n    let imageWrapStyle = {};\n    let styledClassName = '';\n\n    if (float) {\n      imageWrapStyle.float = float;\n      styledClassName += ' float-' + float;\n    } else if (alignment) {\n      imageWrapStyle.textAlign = alignment;\n      styledClassName += ' align-' + alignment;\n    }\n\n    if (link) {\n      return (\n        <div\n          className={'media-wrap image-wrap' + styledClassName}\n          style={imageWrapStyle}\n          data-card-type=\"image\"\n          data-card-url={url}\n          data-card-meta={encodeURIComponent(JSON.stringify(meta))}\n        >\n          <a\n            style={{ display: 'inline-block' }}\n            href={link}\n            target={link_target}\n          >\n            <img\n              {...nodeAttrAsProps}\n              {...meta}\n              src={url}\n              width={width}\n              height={height}\n              style={{ width, height }}\n            />\n          </a>\n        </div>\n      );\n    } else {\n      return (\n        <div\n          className={'media-wrap image-wrap' + styledClassName}\n          style={imageWrapStyle}\n          data-card-type=\"image\"\n          data-card-url={url}\n          data-card-meta={encodeURIComponent(JSON.stringify(meta))}\n        >\n          <img\n            {...nodeAttrAsProps}\n            {...meta}\n            src={url}\n            width={width}\n            height={height}\n            style={{ width, height }}\n          />\n        </div>\n      );\n    }\n  } else if (mediaType === 'audio') {\n    return (\n      <div className=\"media-wrap audio-wrap\">\n        <audio controls {...nodeAttrAsProps} {...meta} src={url} />\n      </div>\n    );\n  } else if (mediaType === 'video') {\n    return (\n      <div\n        className=\"media-wrap video-wrap\"\n        data-card-type=\"video\"\n        data-card-url={url}\n        data-card-meta={encodeURIComponent(JSON.stringify(meta))}\n      >\n        <video\n          controls\n          {...nodeAttrAsProps}\n          {...meta}\n          src={url}\n          width={width}\n          height={height}\n        />\n      </div>\n    );\n  } else if (mediaType === 'embed') {\n    return (\n      <div className=\"media-wrap embed-wrap\">\n        <div dangerouslySetInnerHTML={{ __html: url }} />\n      </div>\n    );\n  } else if (mediaType === 'hr') {\n    return <hr />;\n  } else if (mediaType === 'attachment') {\n    return (\n      <div\n        className=\"media-wrap attachment-wrap\"\n        data-card-type=\"attachment\"\n        data-card-url={url}\n        data-card-meta={encodeURIComponent(JSON.stringify(meta))}\n      >\n        <div\n          className={`attachment-icon attachment-icon-${meta.fileType.toLowerCase()}`}\n        >\n          {meta.fileType}\n        </div>\n        <div className=\"attachment-content\">\n          <div className=\"attachment-content-title\">{meta.fileName}</div>\n          <div className=\"attachment-content-desc\">{meta.fileSize}</div>\n        </div>\n      </div>\n    );\n  } else {\n    return <p />;\n  }\n};\n\nconst entityToHTML = (options) => (entity, originalText) => {\n  const { entityExportFn } = options;\n  const entityType = entity.type.toLowerCase();\n\n  if (entityExportFn) {\n    const customOutput = entityExportFn(entity, originalText);\n    if (customOutput) {\n      return customOutput;\n    }\n  }\n\n  if (entityType === 'link') {\n    let { class: className, ...nodeAttrAsProps } =\n      entity.data.nodeAttributes || {};\n    nodeAttrAsProps.className = className;\n    return (\n      <a\n        href={entity.data.href}\n        target={entity.data.target}\n        {...nodeAttrAsProps}\n      />\n    );\n  }\n};\n\nconst styleToHTML = (options) => (style) => {\n  const unitExportFn = options.unitExportFn || defaultUnitExportFn;\n\n  if (options.styleExportFn) {\n    const customOutput = options.styleExportFn(style, options);\n    if (customOutput) {\n      return customOutput;\n    }\n  }\n\n  style = style.toLowerCase();\n\n  if (style === 'strikethrough') {\n    return <span style={{ textDecoration: 'line-through' }} />;\n  } else if (style === 'superscript') {\n    return <sup />;\n  } else if (style === 'subscript') {\n    return <sub />;\n  } else if (style.indexOf('color-') === 0) {\n    return <span style={{ color: '#' + getStyleValue(style) }} />;\n  } else if (style.indexOf('bgcolor-') === 0) {\n    return <span style={{ backgroundColor: '#' + getStyleValue(style) }} />;\n  } else if (style.indexOf('fontsize-') === 0) {\n    return (\n      <span\n        style={{\n          fontSize: unitExportFn(getStyleValue(style), 'font-size', 'html'),\n        }}\n      />\n    );\n  } else if (style.indexOf('lineheight-') === 0) {\n    return (\n      <span\n        style={{\n          lineHeight: unitExportFn(getStyleValue(style), 'line-height', 'html'),\n        }}\n      />\n    );\n  } else if (style.indexOf('letterspacing-') === 0) {\n    return (\n      <span\n        style={{\n          letterSpacing: unitExportFn(\n            getStyleValue(style),\n            'letter-spacing',\n            'html',\n          ),\n        }}\n      />\n    );\n  } else if (style.indexOf('fontfamily-') === 0) {\n    let fontFamily = options.fontFamilies.find(\n      (item) => item.name.toLowerCase() === getStyleValue(style),\n    );\n    if (!fontFamily) return;\n    return <span style={{ fontFamily: fontFamily.family }} />;\n  }\n};\n\nconst blockToHTML = (options) => (block) => {\n  const { blockExportFn, contentState } = options;\n\n  if (blockExportFn) {\n    const customOutput = blockExportFn(contentState, block);\n    if (customOutput) {\n      return customOutput;\n    }\n  }\n\n  let blockStyle = '';\n\n  const blockType = block.type.toLowerCase();\n  const { textAlign, textIndent, nodeAttributes = {} } = block.data;\n  const attributeString = spreadNodeAttributes(nodeAttributes);\n\n  if (textAlign || textIndent) {\n    blockStyle = ' style=\"';\n\n    if (textAlign) {\n      blockStyle += `text-align:${textAlign};`;\n    }\n\n    if (textIndent && !isNaN(textIndent) && textIndent > 0) {\n      blockStyle += `text-indent:${textIndent * 2}em;`;\n    }\n\n    blockStyle += '\"';\n  }\n\n  if (blockType === 'atomic') {\n    return convertAtomicBlock(block, contentState, nodeAttributes);\n  } else if (blockType === 'code-block') {\n    const previousBlock = contentState.getBlockBefore(block.key);\n    const nextBlock = contentState.getBlockAfter(block.key);\n    const previousBlockType = previousBlock && previousBlock.getType();\n    const nextBlockType = nextBlock && nextBlock.getType();\n\n    let start = '';\n    let end = '';\n\n    if (previousBlockType !== 'code-block') {\n      start = `<pre${attributeString}><code>`;\n    } else {\n      start = '';\n    }\n\n    if (nextBlockType !== 'code-block') {\n      end = '</code></pre>';\n    } else {\n      end = '<br/>';\n    }\n\n    return { start, end };\n  } else if (blocks[blockType]) {\n    return {\n      start: `<${blocks[blockType]}${blockStyle}${attributeString}>`,\n      end: `</${blocks[blockType]}>`,\n    };\n  } else if (blockType === 'unordered-list-item') {\n    return {\n      start: `<li${blockStyle}${attributeString}>`,\n      end: '</li>',\n      nest: <ul />,\n    };\n  } else if (blockType === 'ordered-list-item') {\n    return {\n      start: `<li${blockStyle}${attributeString}>`,\n      end: '</li>',\n      nest: <ol />,\n    };\n  }\n};\n\nconst htmlToStyle = (options, source) => (nodeName, node, currentStyle) => {\n  if (!node || !node.style) {\n    return currentStyle;\n  }\n\n  const unitImportFn = options.unitImportFn || defaultUnitImportFn;\n  let newStyle = currentStyle;\n\n  [].forEach.call(node.style, (style) => {\n    if (nodeName === 'span' && style === 'color') {\n      let color = getHexColor(node.style.color);\n      newStyle = color\n        ? newStyle.add('COLOR-' + color.replace('#', '').toUpperCase())\n        : newStyle;\n    } else if (nodeName === 'span' && style === 'background-color') {\n      let color = getHexColor(node.style.backgroundColor);\n      newStyle = color\n        ? newStyle.add('BGCOLOR-' + color.replace('#', '').toUpperCase())\n        : newStyle;\n    } else if (nodeName === 'span' && style === 'font-size') {\n      newStyle = newStyle.add(\n        'FONTSIZE-' + unitImportFn(node.style.fontSize, 'font-size', source),\n      );\n    } else if (\n      nodeName === 'span' &&\n      style === 'line-height' &&\n      !isNaN(parseFloat(node.style.lineHeight, 10))\n    ) {\n      newStyle = newStyle.add(\n        'LINEHEIGHT-' +\n          unitImportFn(node.style.lineHeight, 'line-height', source),\n      );\n    } else if (\n      nodeName === 'span' &&\n      style === 'letter-spacing' &&\n      !isNaN(parseFloat(node.style.letterSpacing, 10))\n    ) {\n      newStyle = newStyle.add(\n        'LETTERSPACING-' +\n          unitImportFn(node.style.letterSpacing, 'letter-spacing', source),\n      );\n    } else if (nodeName === 'span' && style === 'text-decoration') {\n      if (node.style.textDecoration === 'line-through') {\n        newStyle = newStyle.add('STRIKETHROUGH');\n      } else if (node.style.textDecoration === 'underline') {\n        newStyle = newStyle.add('UNDERLINE');\n      }\n    } else if (nodeName === 'span' && style === 'font-family') {\n      let fontFamily = options.fontFamilies.find(\n        (item) =>\n          item.family.toLowerCase() === node.style.fontFamily.toLowerCase(),\n      );\n      if (!fontFamily) return;\n      newStyle = newStyle.add('FONTFAMILY-' + fontFamily.name.toUpperCase());\n    }\n  });\n\n  if (nodeName === 'sup') {\n    newStyle = newStyle.add('SUPERSCRIPT');\n  } else if (nodeName === 'sub') {\n    newStyle = newStyle.add('SUBSCRIPT');\n  }\n\n  options.styleImportFn &&\n    (newStyle =\n      options.styleImportFn(nodeName, node, newStyle, source) || newStyle);\n  return newStyle;\n};\n\nconst htmlToEntity = (options, source) => (nodeName, node, createEntity) => {\n  if (options && options.entityImportFn) {\n    const customInput = options.entityImportFn(\n      nodeName,\n      node,\n      createEntity,\n      source,\n    );\n    if (customInput) {\n      return customInput;\n    }\n  }\n\n  nodeName = nodeName.toLowerCase();\n\n  const { alt, title, id, controls, autoplay, loop, poster } = node;\n  let meta = {};\n  let nodeAttributes = {};\n\n  id && (meta.id = id);\n  alt && (meta.alt = alt);\n  title && (meta.title = title);\n  controls && (meta.controls = controls);\n  autoplay && (meta.autoPlay = autoplay);\n  loop && (meta.loop = loop);\n  poster && (meta.poster = poster);\n\n  node.attributes &&\n    Object.keys(node.attributes).forEach((key) => {\n      let attr = node.attributes[key];\n      ignoredEntityNodeAttributes.indexOf(attr.name) === -1 &&\n        (nodeAttributes[attr.name] = attr.value);\n    });\n\n  if (nodeName === 'a' && !node.querySelectorAll('img').length) {\n    let href = node.getAttribute('href');\n    let target = node.getAttribute('target');\n    return createEntity('LINK', 'MUTABLE', { href, target, nodeAttributes });\n  } else if (nodeName === 'audio') {\n    return createEntity('AUDIO', 'IMMUTABLE', {\n      url: node.getAttribute('src'),\n      meta,\n      nodeAttributes,\n    });\n  } else if (nodeName === 'video') {\n    return createEntity('VIDEO', 'IMMUTABLE', {\n      url: node.getAttribute('src'),\n      meta,\n      nodeAttributes,\n    });\n  } else if (nodeName === 'img') {\n    let parentNode = node.parentNode;\n    let entityData = { meta };\n    let { width, height } = node.style;\n\n    entityData.url = node.getAttribute('src');\n    width && (entityData.width = width);\n    height && (entityData.height = height);\n\n    if (parentNode.nodeName.toLowerCase() === 'a') {\n      entityData.link = parentNode.getAttribute('href');\n      entityData.link_target = parentNode.getAttribute('target');\n    }\n\n    return createEntity('IMAGE', 'IMMUTABLE', entityData);\n  } else if (nodeName === 'hr') {\n    return createEntity('HR', 'IMMUTABLE', {});\n  } else if (\n    node &&\n    node.classList &&\n    node.classList.contains('attachment-wrap')\n  ) {\n    let entityData = {\n      url: node.getAttribute('data-card-url') || '',\n    };\n\n    try {\n      entityData.meta = JSON.parse(\n        decodeURIComponent(node.getAttribute('data-card-meta') || ''),\n      );\n    } catch (e) {\n      console.error(e);\n      entityData.meta = {};\n    }\n    return createEntity('ATTACHMENT', 'IMMUTABLE', entityData);\n  } else if (\n    node.parentNode &&\n    node.parentNode.classList.contains('embed-wrap')\n  ) {\n    const embedContent = node.innerHTML || node.outerHTML;\n\n    if (embedContent) {\n      return createEntity('EMBED', 'IMMUTABLE', {\n        url: embedContent,\n      });\n    }\n  }\n};\n\nconst htmlToBlock = (options, source) => (nodeName, node) => {\n  if (options && options.blockImportFn) {\n    const customInput = options.blockImportFn(nodeName, node, source);\n    if (customInput) {\n      return customInput;\n    }\n  }\n\n  let nodeAttributes = {};\n  let nodeStyle = node.style || {};\n\n  node.attributes &&\n    Object.keys(node.attributes).forEach((key) => {\n      let attr = node.attributes[key];\n      ignoredNodeAttributes.indexOf(attr.name) === -1 &&\n        (nodeAttributes[attr.name] = attr.value);\n    });\n\n  if (node.classList && node.classList.contains('media-wrap')) {\n    if (node.classList.contains('attachment-wrap')) {\n      node.innerHTML = '';\n    }\n\n    return {\n      type: 'atomic',\n      data: {\n        nodeAttributes: nodeAttributes,\n        float: nodeStyle.float,\n        alignment: nodeStyle.textAlign,\n      },\n    };\n  } else if (nodeName === 'img') {\n    return {\n      type: 'atomic',\n      data: {\n        nodeAttributes: nodeAttributes,\n        float: nodeStyle.float,\n        alignment: nodeStyle.textAlign,\n      },\n    };\n  } else if (nodeName === 'hr') {\n    return {\n      type: 'atomic',\n      data: { nodeAttributes },\n    };\n  } else if (nodeName === 'pre') {\n    node.innerHTML = node.innerHTML\n      .replace(/<code(.*?)>/g, '')\n      .replace(/<\\/code>/g, '');\n\n    return {\n      type: 'code-block',\n      data: { nodeAttributes },\n    };\n  } else if (blockNames.indexOf(nodeName) !== -1) {\n    const blockData = { nodeAttributes };\n\n    if (nodeStyle.textAlign) {\n      blockData.textAlign = nodeStyle.textAlign;\n    }\n\n    if (nodeStyle.textIndent) {\n      blockData.textIndent = /^\\d+em$/.test(nodeStyle.textIndent)\n        ? Math.ceil(parseInt(nodeStyle.textIndent, 10) / 2)\n        : 1;\n    }\n\n    return {\n      type: blockTypes[blockNames.indexOf(nodeName)],\n      data: blockData,\n    };\n  }\n};\n\nexport const getToHTMLConfig = (options) => {\n  return {\n    styleToHTML: styleToHTML(options),\n    entityToHTML: entityToHTML(options),\n    blockToHTML: blockToHTML(options),\n  };\n};\n\nexport const getFromHTMLConfig = (options, source = 'unknow') => {\n  return {\n    htmlToStyle: htmlToStyle(options, source),\n    htmlToEntity: htmlToEntity(options, source),\n    htmlToBlock: htmlToBlock(options, source),\n  };\n};\n","import { convertToHTML, convertFromHTML } from 'draft-convert';\nimport {\n  getToHTMLConfig,\n  getFromHTMLConfig,\n  defaultFontFamilies,\n} from './configs';\nimport { convertFromRaw, convertToRaw, EditorState } from 'draft-js';\n\nconst defaultConvertOptions = {\n  fontFamilies: defaultFontFamilies,\n};\n\nexport const convertRawToHTML = (rawContent, options) => {\n  options = { ...defaultConvertOptions, ...options };\n\n  try {\n    const contentState = convertFromRaw(rawContent);\n    options.contentState = contentState;\n    return convertToHTML(getToHTMLConfig(options))(contentState);\n  } catch (error) {\n    console.warn(error);\n    return '';\n  }\n};\n\nexport const convertHTMLToRaw = (HTMLString, options, source) => {\n  options = { ...defaultConvertOptions, ...options };\n\n  try {\n    const contentState = convertFromHTML(getFromHTMLConfig(options, source))(\n      HTMLString,\n    );\n    return convertToRaw(contentState);\n  } catch (error) {\n    console.warn(error);\n    return {};\n  }\n};\n\nexport const convertEditorStateToHTML = (editorState, options) => {\n  options = { ...defaultConvertOptions, ...options };\n\n  try {\n    const contentState = editorState.getCurrentContent();\n    options.contentState = contentState;\n    return convertToHTML(getToHTMLConfig(options))(contentState);\n  } catch (error) {\n    console.warn(error);\n    return '';\n  }\n};\n\nexport const convertHTMLToEditorState = (\n  HTMLString,\n  editorDecorators,\n  options,\n  source,\n) => {\n  options = { ...defaultConvertOptions, ...options };\n\n  try {\n    return EditorState.createWithContent(\n      convertFromHTML(getFromHTMLConfig(options, source))(HTMLString),\n      editorDecorators,\n    );\n  } catch (error) {\n    console.warn(error);\n    return EditorState.createEmpty(editorDecorators);\n  }\n};\n\nexport const convertEditorStateToRaw = (editorState) => {\n  return convertToRaw(editorState.getCurrentContent());\n};\n\nexport const convertRawToEditorState = (rawContent, editorDecorators) => {\n  try {\n    return EditorState.createWithContent(\n      convertFromRaw(rawContent),\n      editorDecorators,\n    );\n  } catch (error) {\n    console.warn(error);\n    return EditorState.createEmpty(editorDecorators);\n  }\n};\n\nexport default {\n  convertRawToHTML,\n  convertHTMLToRaw,\n\n  convertEditorStateToHTML,\n  convertHTMLToEditorState,\n  convertEditorStateToRaw,\n  convertRawToEditorState,\n};\n","import {\n  Modifier,\n  EditorState,\n  SelectionState,\n  RichUtils,\n  CharacterMetadata,\n  AtomicBlockUtils,\n  convertFromRaw,\n} from 'draft-js';\nimport { setBlockData, getSelectionEntity } from 'draftjs-utils';\nimport { convertHTMLToRaw } from '../covert';\nimport Immutable from 'immutable';\n\nconst strictBlockTypes = ['atomic'];\n\nexport const registerStrictBlockType = (blockType) => {\n  strictBlockTypes.indexOf(blockType) === -1 &&\n    strictBlockTypes.push(blockType);\n};\n\nexport const isEditorState = (editorState) => {\n  return editorState instanceof EditorState;\n};\n\nexport const createEmptyEditorState = (editorDecorators) => {\n  return EditorState.createEmpty(editorDecorators);\n};\n\nexport const createEditorState = (contentState, editorDecorators) => {\n  return EditorState.createWithContent(contentState, editorDecorators);\n};\n\nexport const isSelectionCollapsed = (editorState) => {\n  return editorState.getSelection().isCollapsed();\n};\n\nexport const selectionContainsBlockType = (editorState, blockType) => {\n  return getSelectedBlocks(editorState).find(\n    (block) => block.getType() === blockType,\n  );\n};\n\nexport const selectionContainsStrictBlock = (editorState) => {\n  return getSelectedBlocks(editorState).find(\n    (block) => ~strictBlockTypes.indexOf(block.getType()),\n  );\n};\n\nexport const selectBlock = (editorState, block) => {\n  const blockKey = block.getKey();\n\n  return EditorState.forceSelection(\n    editorState,\n    new SelectionState({\n      anchorKey: blockKey,\n      anchorOffset: 0,\n      focusKey: blockKey,\n      focusOffset: block.getLength(),\n    }),\n  );\n};\n\nexport const selectNextBlock = (editorState, block) => {\n  const nextBlock = editorState\n    .getCurrentContent()\n    .getBlockAfter(block.getKey());\n  return nextBlock ? selectBlock(editorState, nextBlock) : editorState;\n};\n\nexport const removeBlock = (editorState, block, lastSelection = null) => {\n  let nextContentState, nextEditorState;\n  const blockKey = block.getKey();\n\n  nextContentState = Modifier.removeRange(\n    editorState.getCurrentContent(),\n    new SelectionState({\n      anchorKey: blockKey,\n      anchorOffset: 0,\n      focusKey: blockKey,\n      focusOffset: block.getLength(),\n    }),\n    'backward',\n  );\n\n  nextContentState = Modifier.setBlockType(\n    nextContentState,\n    nextContentState.getSelectionAfter(),\n    'unstyled',\n  );\n  nextEditorState = EditorState.push(\n    editorState,\n    nextContentState,\n    'remove-range',\n  );\n  return EditorState.forceSelection(\n    nextEditorState,\n    lastSelection || nextContentState.getSelectionAfter(),\n  );\n};\n\nexport const getSelectionBlock = (editorState) => {\n  return editorState\n    .getCurrentContent()\n    .getBlockForKey(editorState.getSelection().getAnchorKey());\n};\n\nexport const updateEachCharacterOfSelection = (editorState, callback) => {\n  const selectionState = editorState.getSelection();\n  const contentState = editorState.getCurrentContent();\n  const contentBlocks = contentState.getBlockMap();\n  const selectedBlocks = getSelectedBlocks(editorState);\n\n  if (selectedBlocks.length === 0) {\n    return editorState;\n  }\n\n  const startKey = selectionState.getStartKey();\n  const startOffset = selectionState.getStartOffset();\n  const endKey = selectionState.getEndKey();\n  const endOffset = selectionState.getEndOffset();\n\n  const nextContentBlocks = contentBlocks.map((block) => {\n    if (selectedBlocks.indexOf(block) === -1) {\n      return block;\n    }\n\n    const blockKey = block.getKey();\n    const charactersList = block.getCharacterList();\n    let nextCharactersList = null;\n\n    if (blockKey === startKey && blockKey === endKey) {\n      nextCharactersList = charactersList.map((character, index) => {\n        if (index >= startOffset && index < endOffset) {\n          return callback(character);\n        }\n        return character;\n      });\n    } else if (blockKey === startKey) {\n      nextCharactersList = charactersList.map((character, index) => {\n        if (index >= startOffset) {\n          return callback(character);\n        }\n        return character;\n      });\n    } else if (blockKey === endKey) {\n      nextCharactersList = charactersList.map((character, index) => {\n        if (index < endOffset) {\n          return callback(character);\n        }\n        return character;\n      });\n    } else {\n      nextCharactersList = charactersList.map((character) => {\n        return callback(character);\n      });\n    }\n\n    return block.merge({\n      characterList: nextCharactersList,\n    });\n  });\n\n  return EditorState.push(\n    editorState,\n    contentState.merge({\n      blockMap: nextContentBlocks,\n      selectionBefore: selectionState,\n      selectionAfter: selectionState,\n    }),\n    'update-selection-character-list',\n  );\n};\n\nexport const getSelectedBlocks = (editorState) => {\n  const selectionState = editorState.getSelection();\n  const contentState = editorState.getCurrentContent();\n\n  const startKey = selectionState.getStartKey();\n  const endKey = selectionState.getEndKey();\n  const isSameBlock = startKey === endKey;\n  const startingBlock = contentState.getBlockForKey(startKey);\n  const selectedBlocks = [startingBlock];\n\n  if (!isSameBlock) {\n    let blockKey = startKey;\n\n    while (blockKey !== endKey) {\n      const nextBlock = contentState.getBlockAfter(blockKey);\n      selectedBlocks.push(nextBlock);\n      blockKey = nextBlock.getKey();\n    }\n  }\n\n  return selectedBlocks;\n};\n\nexport const setSelectionBlockData = (editorState, blockData, override) => {\n  let newBlockData = override\n    ? blockData\n    : Object.assign({}, getSelectionBlockData(editorState).toJS(), blockData);\n\n  Object.keys(newBlockData).forEach((key) => {\n    if (newBlockData.hasOwnProperty(key) && newBlockData[key] === undefined) {\n      delete newBlockData[key];\n    }\n  });\n\n  return setBlockData(editorState, newBlockData);\n};\n\nexport const getSelectionBlockData = (editorState, name) => {\n  const blockData = getSelectionBlock(editorState).getData();\n  return name ? blockData.get(name) : blockData;\n};\n\nexport const getSelectionBlockType = (editorState) => {\n  return getSelectionBlock(editorState).getType();\n};\n\nexport const getSelectionText = (editorState) => {\n  const selectionState = editorState.getSelection();\n  const contentState = editorState.getCurrentContent();\n\n  if (\n    selectionState.isCollapsed() ||\n    getSelectionBlockType(editorState) === 'atomic'\n  ) {\n    return '';\n  }\n\n  const anchorKey = selectionState.getAnchorKey();\n  const currentContentBlock = contentState.getBlockForKey(anchorKey);\n  const start = selectionState.getStartOffset();\n  const end = selectionState.getEndOffset();\n\n  return currentContentBlock.getText().slice(start, end);\n};\n\nexport const toggleSelectionBlockType = (editorState, blockType) => {\n  if (selectionContainsStrictBlock(editorState)) {\n    return editorState;\n  }\n\n  return RichUtils.toggleBlockType(editorState, blockType);\n};\n\nexport const getSelectionEntityType = (editorState) => {\n  const entityKey = getSelectionEntity(editorState);\n\n  if (entityKey) {\n    const entity = editorState.getCurrentContent().getEntity(entityKey);\n    return entity ? entity.get('type') : null;\n  }\n\n  return null;\n};\n\nexport const getSelectionEntityData = (editorState, type) => {\n  const entityKey = getSelectionEntity(editorState);\n\n  if (entityKey) {\n    const entity = editorState.getCurrentContent().getEntity(entityKey);\n    if (entity && entity.get('type') === type) {\n      return entity.getData();\n    } else {\n      return {};\n    }\n  } else {\n    return {};\n  }\n};\n\nexport const toggleSelectionEntity = (editorState, entity) => {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n\n  if (\n    selectionState.isCollapsed() ||\n    getSelectionBlockType(editorState) === 'atomic'\n  ) {\n    return editorState;\n  }\n\n  if (\n    !entity ||\n    !entity.type ||\n    getSelectionEntityType(editorState) === entity.type\n  ) {\n    return EditorState.push(\n      editorState,\n      Modifier.applyEntity(contentState, selectionState, null),\n      'apply-entity',\n    );\n  }\n\n  try {\n    const nextContentState = contentState.createEntity(\n      entity.type,\n      entity.mutability,\n      entity.data,\n    );\n    const entityKey = nextContentState.getLastCreatedEntityKey();\n\n    let nextEditorState = EditorState.set(editorState, {\n      currentContent: nextContentState,\n    });\n\n    return EditorState.push(\n      nextEditorState,\n      Modifier.applyEntity(nextContentState, selectionState, entityKey),\n      'apply-entity',\n    );\n  } catch (error) {\n    console.warn(error);\n    return editorState;\n  }\n};\n\nexport const toggleSelectionLink = (editorState, href, target) => {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n\n  let entityData = { href, target };\n\n  if (\n    selectionState.isCollapsed() ||\n    getSelectionBlockType(editorState) === 'atomic'\n  ) {\n    return editorState;\n  }\n\n  if (href === false) {\n    return RichUtils.toggleLink(editorState, selectionState, null);\n  }\n\n  if (href === null) {\n    delete entityData.href;\n  }\n\n  try {\n    const nextContentState = contentState.createEntity(\n      'LINK',\n      'MUTABLE',\n      entityData,\n    );\n    const entityKey = nextContentState.getLastCreatedEntityKey();\n\n    let nextEditorState = EditorState.set(editorState, {\n      currentContent: nextContentState,\n    });\n\n    nextEditorState = RichUtils.toggleLink(\n      nextEditorState,\n      selectionState,\n      entityKey,\n    );\n    nextEditorState = EditorState.forceSelection(\n      nextEditorState,\n      selectionState.merge({\n        anchorOffset: selectionState.getEndOffset(),\n        focusOffset: selectionState.getEndOffset(),\n      }),\n    );\n\n    nextEditorState = EditorState.push(\n      nextEditorState,\n      Modifier.insertText(\n        nextEditorState.getCurrentContent(),\n        nextEditorState.getSelection(),\n        '',\n      ),\n      'insert-text',\n    );\n\n    return nextEditorState;\n  } catch (error) {\n    console.warn(error);\n    return editorState;\n  }\n};\n\nexport const getSelectionInlineStyle = (editorState) => {\n  return editorState.getCurrentInlineStyle();\n};\n\nexport const selectionHasInlineStyle = (editorState, style) => {\n  return getSelectionInlineStyle(editorState).has(style.toUpperCase());\n};\n\nexport const toggleSelectionInlineStyle = (editorState, style, prefix = '') => {\n  let nextEditorState = editorState;\n  style = prefix + style.toUpperCase();\n\n  if (prefix) {\n    nextEditorState = updateEachCharacterOfSelection(\n      nextEditorState,\n      (characterMetadata) => {\n        return characterMetadata\n          .toJS()\n          .style.reduce((characterMetadata, characterStyle) => {\n            if (\n              characterStyle.indexOf(prefix) === 0 &&\n              style !== characterStyle\n            ) {\n              return CharacterMetadata.removeStyle(\n                characterMetadata,\n                characterStyle,\n              );\n            } else {\n              return characterMetadata;\n            }\n          }, characterMetadata);\n      },\n    );\n  }\n\n  return RichUtils.toggleInlineStyle(nextEditorState, style);\n};\n\nexport const removeSelectionInlineStyles = (editorState) => {\n  return updateEachCharacterOfSelection(editorState, (characterMetadata) => {\n    return characterMetadata.merge({\n      style: Immutable.OrderedSet([]),\n    });\n  });\n};\n\nexport const toggleSelectionAlignment = (editorState, alignment) => {\n  return setSelectionBlockData(editorState, {\n    textAlign:\n      getSelectionBlockData(editorState, 'textAlign') !== alignment\n        ? alignment\n        : undefined,\n  });\n};\n\nexport const toggleSelectionIndent = (\n  editorState,\n  textIndent,\n  maxIndent = 6,\n) => {\n  return textIndent < 0 || textIndent > maxIndent || isNaN(textIndent)\n    ? editorState\n    : setSelectionBlockData(editorState, {\n        textIndent: textIndent || undefined,\n      });\n};\n\nexport const increaseSelectionIndent = (editorState, maxIndent = 6) => {\n  const currentIndent = getSelectionBlockData(editorState, 'textIndent') || 0;\n  return toggleSelectionIndent(editorState, currentIndent + 1, maxIndent);\n};\n\nexport const decreaseSelectionIndent = (editorState, maxIndent) => {\n  const currentIndent = getSelectionBlockData(editorState, 'textIndent') || 0;\n  return toggleSelectionIndent(editorState, currentIndent - 1, maxIndent);\n};\n\nexport const toggleSelectionColor = (editorState, color) => {\n  return toggleSelectionInlineStyle(\n    editorState,\n    color.replace('#', ''),\n    'COLOR-',\n  );\n};\n\nexport const toggleSelectionBackgroundColor = (editorState, color) => {\n  return toggleSelectionInlineStyle(\n    editorState,\n    color.replace('#', ''),\n    'BGCOLOR-',\n  );\n};\n\nexport const toggleSelectionFontSize = (editorState, fontSize) => {\n  return toggleSelectionInlineStyle(editorState, fontSize, 'FONTSIZE-');\n};\n\nexport const toggleSelectionLineHeight = (editorState, lineHeight) => {\n  return toggleSelectionInlineStyle(editorState, lineHeight, 'LINEHEIGHT-');\n};\n\nexport const toggleSelectionFontFamily = (editorState, fontFamily) => {\n  return toggleSelectionInlineStyle(editorState, fontFamily, 'FONTFAMILY-');\n};\n\nexport const toggleSelectionLetterSpacing = (editorState, letterSpacing) => {\n  return toggleSelectionInlineStyle(\n    editorState,\n    letterSpacing,\n    'LETTERSPACING-',\n  );\n};\n\nexport const insertText = (editorState, text, inlineStyle, entity) => {\n  const selectionState = editorState.getSelection();\n  const currentSelectedBlockType = getSelectionBlockType(editorState);\n\n  if (currentSelectedBlockType === 'atomic') {\n    return editorState;\n  }\n\n  let entityKey;\n  let contentState = editorState.getCurrentContent();\n\n  if (entity && entity.type) {\n    contentState = contentState.createEntity(\n      entity.type,\n      entity.mutability || 'MUTABLE',\n      entity.data,\n    );\n    entityKey = contentState.getLastCreatedEntityKey();\n  }\n\n  if (!selectionState.isCollapsed()) {\n    return EditorState.push(\n      editorState,\n      Modifier.replaceText(\n        contentState,\n        selectionState,\n        text,\n        inlineStyle,\n        entityKey,\n      ),\n      'replace-text',\n    );\n  } else {\n    return EditorState.push(\n      editorState,\n      Modifier.insertText(\n        contentState,\n        selectionState,\n        text,\n        inlineStyle,\n        entityKey,\n      ),\n      'insert-text',\n    );\n  }\n};\n\nexport const insertHTML = (editorState, htmlString, source) => {\n  if (!htmlString) {\n    return editorState;\n  }\n\n  const selectionState = editorState.getSelection();\n  const contentState = editorState.getCurrentContent();\n  const options = editorState.convertOptions || {};\n\n  try {\n    const { blockMap } = convertFromRaw(\n      convertHTMLToRaw(htmlString, options, source),\n    );\n\n    return EditorState.push(\n      editorState,\n      Modifier.replaceWithFragment(contentState, selectionState, blockMap),\n      'insert-fragment',\n    );\n  } catch (error) {\n    console.warn(error);\n    return editorState;\n  }\n};\n\nexport const insertAtomicBlock = (\n  editorState,\n  type,\n  immutable = true,\n  data = {},\n) => {\n  if (selectionContainsStrictBlock(editorState)) {\n    return insertAtomicBlock(\n      selectNextBlock(editorState, getSelectionBlock(editorState)),\n      type,\n      immutable,\n      data,\n    );\n  }\n\n  const selectionState = editorState.getSelection();\n  const contentState = editorState.getCurrentContent();\n\n  if (\n    !selectionState.isCollapsed() ||\n    getSelectionBlockType(editorState) === 'atomic'\n  ) {\n    return editorState;\n  }\n\n  const contentStateWithEntity = contentState.createEntity(\n    type,\n    immutable ? 'IMMUTABLE' : 'MUTABLE',\n    data,\n  );\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n  const newEditorState = AtomicBlockUtils.insertAtomicBlock(\n    editorState,\n    entityKey,\n    ' ',\n  );\n\n  return newEditorState;\n};\n\nexport const insertHorizontalLine = (editorState) => {\n  return insertAtomicBlock(editorState, 'HR');\n};\n\nexport const insertMedias = (editorState, medias = []) => {\n  if (!medias.length) {\n    return editorState;\n  }\n\n  return medias.reduce((editorState, media) => {\n    const { url, link, link_target, name, type, width, height, meta } = media;\n    return insertAtomicBlock(editorState, type, true, {\n      url,\n      link,\n      link_target,\n      name,\n      type,\n      width,\n      height,\n      meta,\n    });\n  }, editorState);\n};\n\nexport const setMediaData = (editorState, entityKey, data) => {\n  return EditorState.push(\n    editorState,\n    editorState.getCurrentContent().mergeEntityData(entityKey, data),\n    'change-block-data',\n  );\n};\n\nexport const removeMedia = (editorState, mediaBlock) => {\n  return removeBlock(editorState, mediaBlock);\n};\n\nexport const setMediaPosition = (editorState, mediaBlock, position) => {\n  let newPosition = {};\n  const { float, alignment } = position;\n\n  if (typeof float !== 'undefined') {\n    newPosition.float =\n      mediaBlock.getData().get('float') === float ? null : float;\n  }\n\n  if (typeof alignment !== 'undefined') {\n    newPosition.alignment =\n      mediaBlock.getData().get('alignment') === alignment ? null : alignment;\n  }\n\n  return setSelectionBlockData(\n    selectBlock(editorState, mediaBlock),\n    newPosition,\n  );\n};\n\nexport const clear = (editorState) => {\n  const contentState = editorState.getCurrentContent();\n\n  const firstBlock = contentState.getFirstBlock();\n  const lastBlock = contentState.getLastBlock();\n\n  const allSelected = new SelectionState({\n    anchorKey: firstBlock.getKey(),\n    anchorOffset: 0,\n    focusKey: lastBlock.getKey(),\n    focusOffset: lastBlock.getLength(),\n    hasFocus: true,\n  });\n\n  return RichUtils.toggleBlockType(\n    EditorState.push(\n      editorState,\n      Modifier.removeRange(contentState, allSelected, 'backward'),\n      'remove-range',\n    ),\n    'unstyled',\n  );\n};\n\nexport const handleKeyCommand = (editorState, command) => {\n  return RichUtils.handleKeyCommand(editorState, command);\n};\n\nexport const undo = (editorState) => {\n  return EditorState.undo(editorState);\n};\n\nexport const redo = (editorState) => {\n  return EditorState.redo(editorState);\n};\n","import { getDefaultKeyBinding, KeyBindingUtil } from 'draft-js';\n\n// TODO\n// 允许自定义的快捷键设置\n\nexport default (customKeyBindingFn) => (event) => {\n  if (\n    event.keyCode === 83 &&\n    (KeyBindingUtil.hasCommandModifier(event) ||\n      KeyBindingUtil.isCtrlKeyCommand(event))\n  ) {\n    return 'braft-save';\n  }\n\n  if (customKeyBindingFn) {\n    return customKeyBindingFn(event) || getDefaultKeyBinding(event);\n  }\n\n  return getDefaultKeyBinding(event);\n};\n","export default {\n  language: 'zh',\n  controls: [\n    'undo',\n    'redo',\n    'separator',\n    'font-size',\n    'line-height',\n    'letter-spacing',\n    'separator',\n    'text-color',\n    'bold',\n    'italic',\n    'underline',\n    'strike-through',\n    'separator',\n    'superscript',\n    'subscript',\n    'remove-styles',\n    'emoji',\n    'separator',\n    'text-indent',\n    'text-align',\n    'separator',\n    'headings',\n    'list-ul',\n    'list-ol',\n    'blockquote',\n    'code',\n    'separator',\n    'media',\n    'link',\n    'table',\n    'split',\n    'hr',\n    'separator',\n    'clear',\n    'separator',\n    'fullscreen',\n  ],\n  excludeControls: [],\n  extendControls: [],\n  extendAtomics: [],\n  componentBelowControlBar: null,\n  media: {\n    pasteImage: true,\n    imagePasteLimit: 5,\n    image: true,\n    video: true,\n    audio: true,\n    uploadFn: null,\n    validateFn: null,\n    onBeforeDeselect: null,\n    onDeselect: null,\n    onBeforeSelect: null,\n    onSelect: null,\n    onBeforeRemove: null,\n    onRemove: null,\n    onCancel: null,\n    onFileSelect: null,\n    onBeforeInsert: null,\n    onInsert: null,\n    onChange: null,\n    accepts: {\n      image: 'image/png,image/jpeg,image/gif,image/webp,image/apng,image/svg',\n      video: 'video/mp4',\n      audio: 'audio/mp3',\n    },\n    externals: {\n      audio: true,\n      video: true,\n      image: true,\n      embed: true,\n    },\n  },\n  imageControls: [\n    'float-left',\n    'float-right',\n    'align-left',\n    'align-center',\n    'align-right',\n    'link',\n    'size',\n    'remove',\n  ],\n  imageResizable: true,\n  colors: [\n    '#000000',\n    '#333333',\n    '#666666',\n    '#999999',\n    '#cccccc',\n    '#ffffff',\n    '#61a951',\n    '#16a085',\n    '#07a9fe',\n    '#003ba5',\n    '#8e44ad',\n    '#f32784',\n    '#c0392b',\n    '#d35400',\n    '#f39c12',\n    '#fdda00',\n  ],\n  colorPicker: null,\n  colorPickerTheme: 'dark',\n  colorPickerAutoHide: true,\n  codeTabIndents: 2,\n  headings: [\n    'header-one',\n    'header-two',\n    'header-three',\n    'header-four',\n    'header-five',\n    'header-six',\n    'unstyled',\n  ],\n  textAligns: ['left', 'center', 'right', 'justify'],\n  textBackgroundColor: true,\n  allowInsertLinkText: false,\n  defaultLinkTarget: '',\n  letterSpacings: [0, 1, 2, 3, 4, 5, 6],\n  lineHeights: [1, 1.2, 1.5, 1.75, 2, 2.5, 3, 4],\n  fontSizes: [\n    12,\n    14,\n    16,\n    18,\n    20,\n    24,\n    28,\n    30,\n    32,\n    36,\n    40,\n    48,\n    56,\n    64,\n    72,\n    96,\n    120,\n    144,\n  ],\n  fontFamilies: [\n    {\n      name: 'Arial',\n      family: 'Arial, Helvetica, sans-serif',\n    },\n    {\n      name: 'Georgia',\n      family: 'Georgia, serif',\n    },\n    {\n      name: 'Impact',\n      family: 'Impact, serif',\n    },\n    {\n      name: 'Monospace',\n      family: '\"Courier New\", Courier, monospace',\n    },\n    {\n      name: 'Tahoma',\n      family: 'tahoma, arial, \"Hiragino Sans GB\", 宋体, sans-serif',\n    },\n  ],\n  converts: {\n    unitExportFn: (value, type) =>\n      type === 'line-height' ? value : `${value}px`,\n  },\n  emojis: [\n    '🤣',\n    '🙌',\n    '💚',\n    '💛',\n    '👏',\n    '😉',\n    '💯',\n    '💕',\n    '💞',\n    '💘',\n    '💙',\n    '💝',\n    '🖤',\n    '💜',\n    '❤️',\n    '😍',\n    '😻',\n    '💓',\n    '💗',\n    '😋',\n    '😇',\n    '😂',\n    '😹',\n    '😘',\n    '💖',\n    '😁',\n    '😀',\n    '🤞',\n    '😲',\n    '😄',\n    '😊',\n    '👍',\n    '😌',\n    '😃',\n    '😅',\n    '✌️',\n    '🤗',\n    '💋',\n    '😗',\n    '😽',\n    '😚',\n    '🤠',\n    '😙',\n    '😺',\n    '👄',\n    '😸',\n    '😏',\n    '😼',\n    '👌',\n    '😎',\n    '😆',\n    '😛',\n    '🙏',\n    '🤝',\n    '🙂',\n    '🤑',\n    '😝',\n    '😐',\n    '😑',\n    '🤤',\n    '😤',\n    '🙃',\n    '🤡',\n    '😶',\n    '😪',\n    '😴',\n    '😵',\n    '😓',\n    '👊',\n    '😦',\n    '😷',\n    '🤐',\n    '😜',\n    '🤓',\n    '👻',\n    '😥',\n    '🙄',\n    '🤔',\n    '🤒',\n    '🙁',\n    '😔',\n    '😯',\n    '☹️',\n    '☠️',\n    '😰',\n    '😩',\n    '😖',\n    '😕',\n    '😒',\n    '😣',\n    '😢',\n    '😮',\n    '😿',\n    '🤧',\n    '😫',\n    '🤥',\n    '😞',\n    '😬',\n    '👎',\n    '💀',\n    '😳',\n    '😨',\n    '🤕',\n    '🤢',\n    '😱',\n    '😭',\n    '😠',\n    '😈',\n    '😧',\n    '💔',\n    '😟',\n    '🙀',\n    '💩',\n    '👿',\n    '😡',\n    '😾',\n    '🖕',\n  ],\n  stripPastedStyles: false,\n  triggerChangeOnMount: true,\n  className: '',\n  style: {},\n  controlBarClassName: '',\n  controlBarStyle: {},\n  contentClassName: '',\n  contentStyle: {},\n  draftProps: {},\n  hooks: {},\n  onChange: null,\n  onFocus: null,\n  onBlur: null,\n  onTab: null,\n  onDelete: null,\n  onSave: null,\n  fixPlaceholder: false,\n};\n","let braftUniqueIndex = 0;\n\nexport const UniqueIndex = () => (braftUniqueIndex += 1);\n","import * as ContentUtils from './content';\nimport * as BaseUtils from './base';\nimport * as ColorUtils from './color';\n\nexport { ContentUtils, BaseUtils, ColorUtils };\n","import { ContentUtils, ColorUtils } from 'utils';\nimport { RichUtils, Modifier, EditorState, ContentState } from 'draft-js';\nimport getFragmentFromSelection from 'draft-js/lib/getFragmentFromSelection';\nimport { handleNewLine } from 'draftjs-utils';\n\nexport const keyCommandHandlers = (command, editorState, editor) => {\n  if (\n    editor.editorProps.handleKeyCommand &&\n    editor.editorProps.handleKeyCommand(command, editorState, editor) ===\n      'handled'\n  ) {\n    return 'handled';\n  }\n\n  if (command === 'braft-save') {\n    editor.editorProps.onSave && editor.editorProps.onSave(editorState);\n    return 'handled';\n  }\n\n  const { controls, excludeControls } = editor.editorProps;\n  const allowIndent =\n    (controls.indexOf('text-indent') !== 0 ||\n      controls.find((item) => item.key === 'text-indent')) &&\n    excludeControls.indexOf('text-indent') === -1;\n  const cursorStart = editorState.getSelection().getStartOffset();\n  const cursorEnd = editorState.getSelection().getEndOffset();\n  const cursorIsAtFirst = cursorStart === 0 && cursorEnd === 0;\n\n  if (command === 'backspace') {\n    if (\n      editor.editorProps.onDelete &&\n      editor.editorProps.onDelete(editorState) === false\n    ) {\n      return 'handled';\n    }\n\n    const blockType = ContentUtils.getSelectionBlockType(editorState);\n\n    if (allowIndent && cursorIsAtFirst && blockType !== 'code-block') {\n      editor.setValue(ContentUtils.decreaseSelectionIndent(editorState));\n    }\n  }\n\n  if (command === 'tab') {\n    const blockType = ContentUtils.getSelectionBlockType(editorState);\n\n    if (blockType === 'code-block') {\n      editor.setValue(\n        ContentUtils.insertText(\n          editorState,\n          ' '.repeat(editor.editorProps.codeTabIndents),\n        ),\n      );\n      return 'handled';\n    } else if (\n      blockType === 'ordered-list-item' ||\n      blockType === 'unordered-list-item'\n    ) {\n      const newEditorState = RichUtils.onTab(event, editorState, 4);\n      if (newEditorState !== editorState) {\n        editor.setValue(newEditorState);\n      }\n      return 'handled';\n    } else if (blockType !== 'atomic' && allowIndent && cursorIsAtFirst) {\n      editor.setValue(ContentUtils.increaseSelectionIndent(editorState));\n      return 'handled';\n    }\n  }\n\n  const nextEditorState = ContentUtils.handleKeyCommand(editorState, command);\n\n  if (nextEditorState) {\n    editor.setValue(nextEditorState);\n    return 'handled';\n  }\n\n  return 'not-handled';\n};\n\nexport const returnHandlers = (event, editorState, editor) => {\n  if (\n    editor.editorProps.handleReturn &&\n    editor.editorProps.handleReturn(event, editorState, editor) === 'handled'\n  ) {\n    return 'handled';\n  }\n\n  const currentBlock = ContentUtils.getSelectionBlock(editorState);\n  const currentBlockType = currentBlock.getType();\n\n  if (\n    currentBlockType === 'unordered-list-item' ||\n    currentBlockType === 'ordered-list-item'\n  ) {\n    if (currentBlock.getLength() === 0) {\n      editor.setValue(\n        ContentUtils.toggleSelectionBlockType(editorState, 'unstyled'),\n      );\n      return 'handled';\n    }\n\n    return 'not-handled';\n  } else if (currentBlockType === 'code-block') {\n    if (\n      event.which === 13 &&\n      (event.getModifierState('Shift') ||\n        event.getModifierState('Alt') ||\n        event.getModifierState('Control'))\n    ) {\n      editor.setValue(\n        ContentUtils.toggleSelectionBlockType(editorState, 'unstyled'),\n      );\n      return 'handled';\n    }\n\n    return 'not-handled';\n  } else if (currentBlockType === 'blockquote') {\n    if (event.which === 13) {\n      if (\n        event.getModifierState('Shift') ||\n        event.getModifierState('Alt') ||\n        event.getModifierState('Control')\n      ) {\n        event.which = 0;\n      } else {\n        editor.setValue(RichUtils.insertSoftNewline(editorState));\n        return 'handled';\n      }\n    }\n  }\n\n  const nextEditorState = handleNewLine(editorState, event);\n\n  if (nextEditorState) {\n    editor.setValue(nextEditorState);\n    return 'handled';\n  }\n\n  return 'not-handled';\n};\n\nexport const beforeInputHandlers = (chars, editorState, editor) => {\n  if (\n    editor.editorProps.handleBeforeInput &&\n    editor.editorProps.handleBeforeInput(chars, editorState, editor) ===\n      'handled'\n  ) {\n    return 'handled';\n  }\n\n  return 'not-handled';\n};\n\nexport const compositionStartHandler = (_, editor) => {\n  const { editorState } = editor.state;\n  const selectedBlocks = ContentUtils.getSelectedBlocks(editorState);\n\n  if (selectedBlocks && selectedBlocks.length > 1) {\n    const nextEditorState = EditorState.push(\n      editorState,\n      Modifier.removeRange(\n        editorState.getCurrentContent(),\n        editorState.getSelection(),\n        'backward',\n      ),\n      'remove-range',\n    );\n\n    editor.setValue(nextEditorState);\n  }\n};\n\nexport const dropHandlers = (selectionState, dataTransfer, editor) => {\n  if (editor.editorProps.readOnly || editor.editorProps.disabled) {\n    return 'handled';\n  }\n\n  if (window && window.__BRAFT_DRAGING__IMAGE__) {\n    let nextEditorState = EditorState.forceSelection(\n      editor.state.editorState,\n      selectionState,\n    );\n    nextEditorState = ContentUtils.insertMedias(nextEditorState, [\n      window.__BRAFT_DRAGING__IMAGE__.mediaData,\n    ]);\n    nextEditorState = ContentUtils.removeBlock(\n      nextEditorState,\n      window.__BRAFT_DRAGING__IMAGE__.block,\n      nextEditorState.getSelection(),\n    );\n\n    window.__BRAFT_DRAGING__IMAGE__ = null;\n\n    editor.lockOrUnlockEditor(true);\n    editor.setValue(nextEditorState);\n\n    return 'handled';\n  } else if (!dataTransfer || !dataTransfer.getText()) {\n    return 'handled';\n  }\n\n  return 'not-handled';\n};\n\nexport const handleFiles = (files, editor) => {\n  const { pasteImage, validateFn, imagePasteLimit } = {\n    ...editor.constructor.defaultProps.media,\n    ...editor.editorProps.media,\n  };\n\n  pasteImage &&\n    files.slice(0, imagePasteLimit).forEach((file) => {\n      if (file && file.type.indexOf('image') > -1 && editor.braftFinder) {\n        let validateResult = validateFn ? validateFn(file) : true;\n        if (validateResult instanceof Promise) {\n          validateResult.then(() => {\n            editor.braftFinder.uploadImage(file, (image) => {\n              editor.isLiving &&\n                editor.setValue(\n                  ContentUtils.insertMedias(editor.state.editorState, [image]),\n                );\n            });\n          });\n        } else if (validateResult) {\n          editor.braftFinder.uploadImage(file, (image) => {\n            editor.isLiving &&\n              editor.setValue(\n                ContentUtils.insertMedias(editor.state.editorState, [image]),\n              );\n          });\n        }\n      }\n    });\n\n  if (files[0] && files[0].type.indexOf('image') > -1 && pasteImage) {\n    return 'handled';\n  }\n\n  return 'not-handled';\n};\n\nexport const droppedFilesHandlers = (selectionState, files, editor) => {\n  if (\n    editor.editorProps.handleDroppedFiles &&\n    editor.editorProps.handleDroppedFiles(selectionState, files, editor) ===\n      'handled'\n  ) {\n    return 'handled';\n  }\n\n  return handleFiles(files, editor);\n};\n\nexport const pastedFilesHandlers = (files, editor) => {\n  if (\n    editor.editorProps.handlePastedFiles &&\n    editor.editorProps.handlePastedFiles(files, editor) === 'handled'\n  ) {\n    return 'handled';\n  }\n\n  return handleFiles(files, editor);\n};\n\nexport const copyHandlers = (event, editor) => {\n  const blockMap = getFragmentFromSelection(editor.state.editorState);\n\n  if (blockMap && blockMap.toArray) {\n    try {\n      const tempContentState = ContentState.createFromBlockArray(\n        blockMap.toArray(),\n      );\n      const tempEditorState = EditorState.createWithContent(tempContentState);\n      const clipboardData =\n        event.clipboardData ||\n        window.clipboardData ||\n        event.originalEvent.clipboardData;\n\n      tempEditorState.setConvertOptions(\n        editor.state.editorState.convertOptions,\n      );\n\n      clipboardData.setData('text/html', tempEditorState.toHTML());\n      clipboardData.setData('text/plain', tempEditorState.toText());\n\n      event.preventDefault();\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n};\n\nexport const pastedTextHandlers = (text, html, editorState, editor) => {\n  if (\n    editor.editorProps.handlePastedText &&\n    editor.editorProps.handlePastedText(text, html, editorState, editor) ===\n      'handled'\n  ) {\n    return 'handled';\n  }\n\n  if (!html || editor.editorProps.stripPastedStyles) {\n    return false;\n  }\n\n  const tempColors = ColorUtils.detectColorsFromHTMLString(html);\n\n  editor.setState(\n    {\n      tempColors: [...editor.state.tempColors, ...tempColors]\n        .filter((item) => editor.editorProps.colors.indexOf(item) === -1)\n        .filter((item, index, array) => array.indexOf(item) === index),\n    },\n    () => {\n      editor.setValue(ContentUtils.insertHTML(editorState, html, 'paste'));\n    },\n  );\n\n  return 'handled';\n};\n","// TODO\n// - block-style和atomic类型的扩展支持\n\nimport React from 'react';\n\nconst extensionControls = [];\nconst extensionDecorators = [];\n\nconst propInterceptors = [];\n\nconst extensionBlockRenderMaps = [];\nconst extensionBlockRendererFns = [];\n\nconst extensionInlineStyleMaps = [];\nconst extensionInlineStyleFns = [];\n\nconst extensionEntities = [];\n\nconst inlineStyleImporters = [];\nconst inlineStyleExporters = [];\nconst blockImporters = [];\nconst blockExporters = [];\n\nconst filterByEditorId = (items, editorId) => {\n  if (!editorId) {\n    return items\n      .filter((item) => !item.includeEditors)\n      .map((item) => item.data);\n  }\n\n  return items\n    .map((item) => {\n      if (!item.includeEditors && !item.excludeEditors) {\n        return item.data;\n      }\n\n      if (item.includeEditors) {\n        return item.includeEditors.indexOf(editorId) !== -1 ? item.data : false;\n      }\n\n      if (item.excludeEditors) {\n        return item.excludeEditors.indexOf(editorId) !== -1 ? false : item.data;\n      }\n\n      return false;\n    })\n    .filter((item) => item);\n};\n\nexport const getPropInterceptors = (editorId) =>\n  filterByEditorId(propInterceptors, editorId);\n\nexport const getExtensionControls = (editorId) =>\n  filterByEditorId(extensionControls, editorId);\n\nexport const getExtensionDecorators = (editorId) =>\n  filterByEditorId(extensionDecorators, editorId, 'decorators');\n\nexport const getExtensionBlockRenderMaps = (editorId) =>\n  filterByEditorId(extensionBlockRenderMaps, editorId);\n\nexport const getExtensionBlockRendererFns = (editorId) =>\n  filterByEditorId(extensionBlockRendererFns, editorId);\n\nexport const getExtensionInlineStyleMap = (editorId) => {\n  let inlineStyleMap = {};\n\n  filterByEditorId(extensionInlineStyleMaps, editorId).forEach((item) => {\n    inlineStyleMap[item.inlineStyleName] = item.styleMap;\n  });\n\n  return inlineStyleMap;\n};\n\nexport const getExtensionInlineStyleFns = (editorId) =>\n  filterByEditorId(extensionInlineStyleFns, editorId);\n\nexport const compositeStyleImportFn = (styleImportFn, editorId) => (\n  nodeName,\n  node,\n  style,\n) => {\n  filterByEditorId(inlineStyleImporters, editorId).forEach((styleImporter) => {\n    if (styleImporter.importer && styleImporter.importer(nodeName, node)) {\n      style = style.add(styleImporter.inlineStyleName);\n    }\n  });\n\n  return styleImportFn ? styleImportFn(nodeName, node, style) : style;\n};\n\nexport const compositeStyleExportFn = (styleExportFn, editorId) => (style) => {\n  style = style.toUpperCase();\n  let result = styleExportFn ? styleExportFn(style) : undefined;\n\n  if (result) {\n    return result;\n  }\n\n  filterByEditorId(inlineStyleExporters, editorId).find((item) => {\n    if (item.inlineStyleName === style) {\n      result = item.exporter;\n      return true;\n    }\n  });\n\n  return result;\n};\n\nexport const compositeEntityImportFn = (entityImportFn, editorId) => (\n  nodeName,\n  node,\n  createEntity,\n  source,\n) => {\n  let result = entityImportFn\n    ? entityImportFn(nodeName, node, createEntity, source)\n    : null;\n\n  if (result) {\n    return result;\n  }\n\n  filterByEditorId(extensionEntities, editorId).find((entityItem) => {\n    const matched = entityItem.importer\n      ? entityItem.importer(nodeName, node, source)\n      : null;\n    matched &&\n      (result = createEntity(\n        entityItem.entityType,\n        matched.mutability || 'MUTABLE',\n        matched.data || {},\n      ));\n    return !!matched;\n  });\n\n  return result;\n};\n\nexport const compositeEntityExportFn = (entityExportFn, editorId) => (\n  entity,\n  originalText,\n) => {\n  let result = entityExportFn\n    ? entityExportFn(entity, originalText)\n    : undefined;\n\n  if (result) {\n    return result;\n  }\n\n  const entityType = entity.type.toUpperCase();\n\n  filterByEditorId(extensionEntities, editorId).find((entityItem) => {\n    if (entityItem.entityType === entityType) {\n      result = entityItem.exporter\n        ? entityItem.exporter(entity, originalText)\n        : undefined;\n      return true;\n    }\n  });\n\n  return result;\n};\n\nexport const compositeBlockImportFn = (blockImportFn, editorId) => (\n  nodeName,\n  node,\n  source,\n) => {\n  let result = blockImportFn ? blockImportFn(nodeName, node, source) : null;\n\n  if (result) {\n    return result;\n  }\n\n  filterByEditorId(blockImporters, editorId).find((blockImporter) => {\n    const matched = blockImporter.importer\n      ? blockImporter.importer(nodeName, node, source)\n      : undefined;\n    matched && (result = matched);\n    return !!matched;\n  });\n\n  return result;\n};\n\nexport const compositeBlockExportFn = (blockExportFn, editorId) => (\n  contentState,\n  block,\n) => {\n  let result = blockExportFn ? blockExportFn(contentState, block) : null;\n\n  if (result) {\n    return result;\n  }\n\n  filterByEditorId(blockExporters, editorId).find((blockExporter) => {\n    const matched = blockExporter.exporter\n      ? blockExporter.exporter(contentState, block)\n      : undefined;\n    matched && (result = matched);\n    return !!matched;\n  });\n\n  return result;\n};\n\nconst useExtension = (extension) => {\n  if (extension instanceof Array) {\n    extension.forEach(useExtension);\n    return false;\n  }\n\n  if (!extension || !extension.type || typeof extension.type !== 'string') {\n    return false;\n  }\n\n  const { includeEditors, excludeEditors } = extension;\n\n  if (extension.type === 'control') {\n    extensionControls.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: extension.control,\n    });\n  } else if (extension.type === 'inline-style') {\n    const inlineStyleName = extension.name.toUpperCase();\n\n    if (extension.control) {\n      extensionControls.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          key: inlineStyleName,\n          type: 'inline-style',\n          command: inlineStyleName,\n          ...extension.control,\n        },\n      });\n    }\n\n    if (extension.style) {\n      extensionInlineStyleMaps.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          inlineStyleName: inlineStyleName,\n          styleMap: extension.style,\n        },\n      });\n    }\n\n    if (extension.styleFn) {\n      extensionInlineStyleFns.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          inlineStyleName: inlineStyleName,\n          styleFn: extension.styleFn,\n        },\n      });\n    }\n\n    if (extension.importer) {\n      inlineStyleImporters.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          inlineStyleName: inlineStyleName,\n          importer: extension.importer,\n        },\n      });\n    }\n\n    inlineStyleExporters.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: {\n        inlineStyleName: inlineStyleName,\n        exporter: extension.exporter ? (\n          extension.exporter(extension)\n        ) : (\n          <span style={extension.style} />\n        ),\n      },\n    });\n  } else if (extension.type === 'block-style') {\n    // TODO\n  } else if (extension.type === 'entity') {\n    const entityType = extension.name.toUpperCase();\n\n    if (extension.control) {\n      extensionControls.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data:\n          typeof extension.control === 'function'\n            ? extension.control\n            : {\n                key: entityType,\n                type: 'entity',\n                command: entityType,\n                data: {\n                  mutability: extension.mutability || 'MUTABLE',\n                  data: extension.data || {},\n                },\n                ...extension.control,\n              },\n      });\n    }\n\n    extensionEntities.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: {\n        entityType: entityType,\n        importer: extension.importer,\n        exporter: extension.exporter,\n      },\n    });\n\n    extensionDecorators.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: {\n        type: 'entity',\n        decorator: {\n          key: entityType,\n          component: extension.component,\n        },\n      },\n    });\n  } else if (extension.type === 'block') {\n    const blockType = extension.name;\n\n    if (extension.renderMap) {\n      extensionBlockRenderMaps.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          blockType: blockType,\n          renderMap: extension.renderMap,\n        },\n      });\n    }\n\n    if (extension.rendererFn) {\n      extensionBlockRendererFns.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          blockType: blockType,\n          rendererFn: extension.rendererFn,\n        },\n      });\n    }\n\n    if (extension.importer) {\n      blockImporters.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          blockType: blockType,\n          importer: extension.importer,\n        },\n      });\n    }\n\n    if (extension.exporter) {\n      blockExporters.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          blockType: blockType,\n          exporter: extension.exporter,\n        },\n      });\n    }\n  } else if (extension.type === 'atomic') {\n    // TODO\n  } else if (extension.type === 'decorator') {\n    const { decorator } = extension;\n\n    if (decorator && decorator.strategy && decorator.component) {\n      extensionDecorators.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          type: 'strategy',\n          decorator: decorator,\n        },\n      });\n    } else if (decorator && decorator.getDecorations) {\n      extensionDecorators.push({\n        includeEditors: includeEditors,\n        excludeEditors: excludeEditors,\n        data: {\n          type: 'class',\n          decorator: decorator,\n        },\n      });\n    }\n  } else if (extension.type === 'prop-interception') {\n    propInterceptors.push({\n      includeEditors: includeEditors,\n      excludeEditors: excludeEditors,\n      data: extension.interceptor,\n    });\n  }\n};\n\nexport const createExtensibleEditor = (BraftEditor) => {\n  BraftEditor.use = useExtension;\n\n  return BraftEditor;\n};\n","import React from 'react';\nimport { Map } from 'immutable';\nimport { DefaultDraftBlockRenderMap } from 'draft-js';\nimport { getExtensionBlockRenderMaps } from 'helpers/extension';\n\nexport default (props, blockRenderMap) => {\n  let customBlockRenderMap = Map({\n    atomic: {\n      element: '',\n    },\n    'code-block': {\n      element: 'code',\n      wrapper: <pre className=\"braft-code-block\" />,\n    },\n  });\n\n  try {\n    const extensionBlockRenderMaps = getExtensionBlockRenderMaps(\n      props.editorId,\n    );\n\n    customBlockRenderMap = extensionBlockRenderMaps.reduce(\n      (customBlockRenderMap, item) => {\n        return customBlockRenderMap.merge(\n          typeof item.renderMap === 'function'\n            ? item.renderMap(props)\n            : item.renderMap,\n        );\n      },\n      customBlockRenderMap,\n    );\n\n    if (blockRenderMap) {\n      if (typeof blockRenderMap === 'function') {\n        customBlockRenderMap = customBlockRenderMap.merge(\n          blockRenderMap(props),\n        );\n      } else {\n        customBlockRenderMap = customBlockRenderMap.merge(blockRenderMap);\n      }\n    }\n\n    customBlockRenderMap = DefaultDraftBlockRenderMap.merge(\n      customBlockRenderMap,\n    );\n  } catch (error) {\n    console.warn(error);\n  }\n\n  return customBlockRenderMap;\n};\n","import './style.scss';\nimport React from 'react';\n\nexport default (props) => {\n  const { active, onClick, className } = props;\n\n  return (\n    <div\n      onClick={() => onClick()}\n      className={'bf-switch ' + className + (active ? ' active' : '')}\n    ></div>\n  );\n};\n","import React from 'react';\n\nexport default (lang, editor) => [\n  {\n    key: 'undo',\n    title: lang.controls.undo,\n    text: <i className=\"bfi-undo\"></i>,\n    type: 'editor-method',\n    command: 'undo',\n  },\n  {\n    key: 'redo',\n    title: lang.controls.redo,\n    text: <i className=\"bfi-redo\"></i>,\n    type: 'editor-method',\n    command: 'redo',\n  },\n  {\n    key: 'remove-styles',\n    title: lang.controls.removeStyles,\n    text: <i className=\"bfi-format_clear\"></i>,\n    type: 'editor-method',\n    command: 'removeSelectionInlineStyles',\n  },\n  {\n    key: 'hr',\n    title: lang.controls.hr,\n    text: <i className=\"bfi-hr\"></i>,\n    type: 'editor-method',\n    command: 'insertHorizontalLine',\n  },\n  {\n    key: 'bold',\n    title: lang.controls.bold,\n    text: <i className=\"bfi-bold\"></i>,\n    type: 'inline-style',\n    command: 'bold',\n  },\n  {\n    key: 'italic',\n    title: lang.controls.italic,\n    text: <i className=\"bfi-italic\"></i>,\n    type: 'inline-style',\n    command: 'italic',\n  },\n  {\n    key: 'underline',\n    title: lang.controls.underline,\n    text: <i className=\"bfi-underlined\"></i>,\n    type: 'inline-style',\n    command: 'underline',\n  },\n  {\n    key: 'strike-through',\n    title: lang.controls.strikeThrough,\n    text: <i className=\"bfi-strikethrough\"></i>,\n    type: 'inline-style',\n    command: 'strikethrough',\n  },\n  {\n    key: 'superscript',\n    title: lang.controls.superScript,\n    text: <i className=\"bfi-superscript\"></i>,\n    type: 'inline-style',\n    command: 'superscript',\n  },\n  {\n    key: 'subscript',\n    title: lang.controls.subScript,\n    text: <i className=\"bfi-subscript\"></i>,\n    type: 'inline-style',\n    command: 'subscript',\n  },\n  {\n    key: 'headings',\n    title: lang.controls.headings,\n    type: 'headings',\n  },\n  {\n    key: 'blockquote',\n    title: lang.controls.blockQuote,\n    text: <i className=\"bfi-quote\"></i>,\n    type: 'block-type',\n    command: 'blockquote',\n  },\n  {\n    key: 'code',\n    title: lang.controls.code,\n    text: <i className=\"bfi-code\"></i>,\n    type: 'block-type',\n    command: 'code-block',\n  },\n  {\n    key: 'list-ul',\n    title: lang.controls.unorderedList,\n    text: <i className=\"bfi-list\"></i>,\n    type: 'block-type',\n    command: 'unordered-list-item',\n  },\n  {\n    key: 'list-ol',\n    title: lang.controls.orderedList,\n    text: <i className=\"bfi-list-numbered\"></i>,\n    type: 'block-type',\n    command: 'ordered-list-item',\n  },\n  {\n    key: 'link',\n    title: lang.controls.link,\n    type: 'link',\n  },\n  {\n    key: 'text-color',\n    title: lang.controls.color,\n    type: 'text-color',\n  },\n  {\n    key: 'line-height',\n    title: lang.controls.lineHeight,\n    type: 'line-height',\n  },\n  {\n    key: 'letter-spacing',\n    title: lang.controls.letterSpacing,\n    type: 'letter-spacing',\n  },\n  {\n    key: 'text-indent',\n    title: lang.controls.textIndent,\n    type: 'text-indent',\n  },\n  {\n    key: 'font-size',\n    title: lang.controls.fontSize,\n    type: 'font-size',\n  },\n  {\n    key: 'font-family',\n    title: lang.controls.fontFamily,\n    type: 'font-family',\n  },\n  {\n    key: 'text-align',\n    title: lang.controls.textAlign,\n    type: 'text-align',\n  },\n  {\n    key: 'media',\n    title: lang.controls.media,\n    text: <i className=\"bfi-media\"></i>,\n    type: 'media',\n  },\n  {\n    key: 'emoji',\n    title: lang.controls.emoji,\n    text: <i className=\"bfi-emoji\"></i>,\n    type: 'emoji',\n  },\n  {\n    key: 'clear',\n    title: lang.controls.clear,\n    text: <i className=\"bfi-clear_all\"></i>,\n    type: 'editor-method',\n    command: 'clearEditorContent',\n  },\n  {\n    key: 'fullscreen',\n    title: editor.state.isFullscreen\n      ? lang.controls.exitFullscreen\n      : lang.controls.fullscreen,\n    text: (\n      <i\n        className={\n          editor.state.isFullscreen ? 'bfi-fullscreen-exit' : 'bfi-fullscreen'\n        }\n      ></i>\n    ),\n    type: 'editor-method',\n    command: 'toggleFullscreen',\n  },\n  {\n    key: 'modal',\n    type: 'modal',\n  },\n  {\n    key: 'button',\n    type: 'button',\n  },\n  {\n    key: 'dropdown',\n    type: 'dropdown',\n  },\n  {\n    key: 'component',\n    type: 'component',\n  },\n];\n\nexport const imageControlItems = {\n  'float-left': {\n    text: <span data-float=\"left\">&#xe91e;</span>,\n    command: 'setImageFloat|left',\n  },\n  'float-right': {\n    text: <span data-float=\"right\">&#xe914;</span>,\n    command: 'setImageFloat|right',\n  },\n  'align-left': {\n    text: <span data-align=\"left\">&#xe027;</span>,\n    command: 'setImageAlignment|left',\n  },\n  'align-center': {\n    text: <span data-align=\"center\">&#xe028;</span>,\n    command: 'setImageAlignment|center',\n  },\n  'align-right': {\n    text: <span data-align=\"right\">&#xe029;</span>,\n    command: 'setImageAlignment|right',\n  },\n  size: {\n    text: <span>&#xe3c2;</span>,\n    command: 'toggleSizeEditor',\n  },\n  link: {\n    text: <span>&#xe91a;</span>,\n    command: 'toggleLinkEditor',\n  },\n  remove: {\n    text: <span>&#xe9ac;</span>,\n    command: 'removeImage',\n  },\n};\n","import './style.scss';\nimport React from 'react';\nimport * as ContentUtils from 'utils/content';\nimport Switch from 'components/common/Switch';\nimport { imageControlItems } from 'configs/controls';\n\n// uploadFileStatus = 'error' | 'success' | 'done' | 'uploading' | 'removed';\n\nexport default class Image extends React.Component {\n  state = {\n    toolbarVisible: false,\n    toolbarOffset: 0,\n    linkEditorVisible: false,\n    sizeEditorVisible: false,\n    tempLink: null,\n    tempWidth: null,\n    tempHeight: null,\n  };\n  initialLeft;\n  initialTop;\n  initialWidth;\n  initialHeight;\n  reSizeType;\n\n  changeSize = (e) => {\n    let type = this.reSizeType;\n    if (!this.initialLeft) {\n      this.initialLeft = e.screenX;\n      this.initialTop = e.screenY;\n    }\n    if (type === 'rightbottom') {\n      this.initialHeight += e.screenY - this.initialTop;\n      this.initialWidth += e.screenX - this.initialLeft;\n    }\n    if (type === 'leftbottom') {\n      this.initialHeight += e.screenY - this.initialTop;\n      this.initialWidth += -e.screenX + this.initialLeft;\n    }\n\n    this.initialLeft = e.screenX;\n    this.initialTop = e.screenY;\n  };\n\n  moveImage = (e) => {\n    this.changeSize(e);\n\n    this.setState({\n      tempWidth: Math.abs(this.initialWidth),\n      tempHeight: Math.abs(this.initialHeight),\n    });\n  };\n\n  upImage = () => {\n    this.confirmImageSize();\n    document.removeEventListener('mousemove', this.moveImage);\n    document.removeEventListener('mouseup', this.upImage);\n  };\n\n  repareChangeSize = (type) => (e) => {\n    this.reSizeType = type;\n    const imageRect = this.imageElement.getBoundingClientRect();\n    this.initialLeft = this.initialTop = 0;\n    this.initialWidth = imageRect.width;\n    this.initialHeight = imageRect.height;\n    e.preventDefault();\n    document.addEventListener('mousemove', this.moveImage);\n    document.addEventListener('mouseup', this.upImage);\n  };\n\n  render() {\n    const { mediaData, language, imageControls, imageResizable } = this.props;\n    const {\n      toolbarVisible,\n      toolbarOffset,\n      linkEditorVisible,\n      sizeEditorVisible,\n      tempWidth,\n      tempHeight,\n    } = this.state;\n    const blockData = this.props.block.getData();\n\n    let float = blockData.get('float');\n    let alignment = blockData.get('alignment');\n    let { url, link, link_target, width, height, meta } = mediaData;\n    let imageStyles = {};\n    let clearFix = false;\n    let status = meta.status ? meta.status : 'done';\n\n    if (float) {\n      alignment = null;\n    } else if (alignment === 'left') {\n      imageStyles.float = 'left';\n      clearFix = true;\n    } else if (alignment === 'right') {\n      imageStyles.float = 'right';\n      clearFix = true;\n    } else if (alignment === 'center') {\n      imageStyles.textAlign = 'center';\n    } else {\n      imageStyles.float = 'left';\n      clearFix = true;\n    }\n\n    const renderedControlItems = imageControls.map((item, index) => {\n      if (typeof item === 'string' && imageControlItems[item]) {\n        return (\n          <a\n            className={item === 'link' && link ? 'active' : ''}\n            key={index}\n            onClick={() => this.executeCommand(imageControlItems[item].command)}\n          >\n            {imageControlItems[item].text}\n          </a>\n        );\n      } else if (item && (item.render || item.text)) {\n        return item.render ? (\n          item.render(mediaData, this.props.block)\n        ) : (\n          <a\n            key={index}\n            onClick={() => item.onClick && this.executeCommand(item.onClick)}\n          >\n            {item.text}\n          </a>\n        );\n      } else {\n        return null;\n      }\n    });\n\n    return (\n      <div className=\"bf-media\">\n        <div\n          style={imageStyles}\n          draggable={true}\n          onMouseEnter={this.showToolbar}\n          onMouseMove={this.showToolbar}\n          onMouseLeave={this.hideToolbar}\n          onDragStart={this.handleDragStart}\n          onDragEnd={this.handleDragEnd}\n          ref={(instance) => (this.mediaEmbederInstance = instance)}\n          className=\"bf-image\"\n        >\n          {toolbarVisible ? (\n            <div\n              style={{ marginLeft: toolbarOffset }}\n              ref={(instance) => (this.toolbarElement = instance)}\n              data-float={float}\n              data-align={alignment}\n              className=\"bf-media-toolbar\"\n            >\n              {linkEditorVisible ? (\n                <div className=\"bf-image-link-editor\">\n                  <div className=\"editor-input-group\">\n                    <input\n                      type=\"text\"\n                      placeholder={\n                        language.linkEditor.inputWithEnterPlaceHolder\n                      }\n                      onKeyDown={this.handleLinkInputKeyDown}\n                      onChange={this.setImageLink}\n                      defaultValue={link}\n                    />\n                    <button type=\"button\" onClick={this.confirmImageLink}>\n                      {language.base.confirm}\n                    </button>\n                  </div>\n                  <div className=\"switch-group\">\n                    <Switch\n                      active={link_target === '_blank'}\n                      onClick={() => this.setImageLinkTarget(link_target)}\n                    />\n                    <label>{language.linkEditor.openInNewWindow}</label>\n                  </div>\n                </div>\n              ) : null}\n              {sizeEditorVisible ? (\n                <div className=\"bf-image-size-editor\">\n                  <div className=\"editor-input-group\">\n                    <input\n                      type=\"text\"\n                      placeholder={language.base.width}\n                      onKeyDown={this.handleSizeInputKeyDown}\n                      onChange={this.setImageWidth}\n                      defaultValue={width}\n                    />\n                    <input\n                      type=\"text\"\n                      placeholder={language.base.height}\n                      onKeyDown={this.handleSizeInputKeyDown}\n                      onChange={this.setImageHeight}\n                      defaultValue={height}\n                    />\n                    <button type=\"button\" onClick={this.confirmImageSize}>\n                      {language.base.confirm}\n                    </button>\n                  </div>\n                </div>\n              ) : null}\n              {renderedControlItems}\n              <i\n                style={{ marginLeft: toolbarOffset * -1 }}\n                className=\"bf-media-toolbar-arrow\"\n              ></i>\n            </div>\n          ) : null}\n          <div\n            style={{\n              position: 'relative',\n              width: `${width}px`,\n              height: `${height}px`,\n              display: 'inline-block',\n            }}\n          >\n            <img\n              ref={(instance) => (this.imageElement = instance)}\n              src={url}\n              width={width}\n              height={height}\n              {...meta}\n            />\n            {toolbarVisible && imageResizable ? (\n              <div\n                className=\"bf-csize-icon right-bottom\"\n                onMouseDown={this.repareChangeSize('rightbottom')}\n              />\n            ) : null}\n            {toolbarVisible && imageResizable ? (\n              <div\n                className=\"bf-csize-icon left-bottom\"\n                onMouseDown={this.repareChangeSize('leftbottom')}\n              />\n            ) : null}\n            <div\n              className={`bf-pre-csize ${this.reSizeType}`}\n              style={{ width: `${tempWidth}px`, height: `${tempHeight}px` }}\n            />\n          </div>\n        </div>\n        {clearFix && (\n          <div\n            className=\"clearfix\"\n            style={{ clear: 'both', height: 0, lineHeight: 0, float: 'none' }}\n          ></div>\n        )}\n      </div>\n    );\n  }\n\n  lockEditor() {\n    this.props.editor.lockOrUnlockEditor(true);\n  }\n\n  unlockEditor() {\n    this.props.editor.lockOrUnlockEditor(false);\n  }\n\n  calcToolbarOffset() {\n    const { getContainerNode, containerNode } = this.props;\n    const container = getContainerNode ? getContainerNode() : containerNode;\n\n    if (!container) {\n      return 0;\n    }\n\n    const viewRect = container\n      .querySelector('.bf-content')\n      .getBoundingClientRect();\n    const toolbarRect = this.toolbarElement.getBoundingClientRect();\n    const imageRect = this.imageElement.getBoundingClientRect();\n\n    const right =\n      viewRect.right -\n      (imageRect.right - imageRect.width / 2 + toolbarRect.width / 2);\n    const left =\n      imageRect.left +\n      imageRect.width / 2 -\n      toolbarRect.width / 2 -\n      viewRect.left;\n\n    if (right < 10) {\n      return right - 10;\n    } else if (left < 10) {\n      return left * -1 + 10;\n    } else {\n      return 0;\n    }\n  }\n\n  preventDragEvent = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  handleDragStart = () => {\n    if (\n      this.props.editor.editorProps.readOnly ||\n      this.props.editor.editorProps.disabled\n    ) {\n      return false;\n    }\n\n    window.__BRAFT_DRAGING__IMAGE__ = {\n      block: this.props.block,\n      mediaData: {\n        type: 'IMAGE',\n        ...this.props.mediaData,\n      },\n    };\n\n    this.setState(\n      {\n        toolbarVisible: false,\n      },\n      () => {\n        this.unlockEditor();\n      },\n    );\n\n    return true;\n  };\n\n  handleDragEnd = () => {\n    window.__BRAFT_DRAGING__IMAGE__ = null;\n    return false;\n  };\n\n  executeCommand = (command) => {\n    if (typeof command === 'string') {\n      const [method, param] = command.split('|');\n      this[method] && this[method](param);\n    } else if (typeof command === 'function') {\n      command(\n        this.props.block,\n        this.props.mediaData,\n        this.props.editor.getValue(),\n      );\n    }\n  };\n\n  removeImage = () => {\n    this.props.editor.setValue(\n      ContentUtils.removeBlock(this.props.editor.getValue(), this.props.block),\n    );\n    this.unlockEditor();\n  };\n\n  toggleLinkEditor = () => {\n    this.setState({\n      linkEditorVisible: !this.state.linkEditorVisible,\n      sizeEditorVisible: false,\n    });\n  };\n\n  toggleSizeEditor = () => {\n    this.setState({\n      linkEditorVisible: false,\n      sizeEditorVisible: !this.state.sizeEditorVisible,\n    });\n  };\n\n  handleLinkInputKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.confirmImageLink();\n    } else {\n      return;\n    }\n  };\n\n  setImageLink = (e) => {\n    this.setState({ tempLink: e.currentTarget.value });\n    return;\n  };\n\n  setImageLinkTarget(link_target) {\n    const hookReturns = this.props.hooks(\n      'set-image-link-target',\n      link_target,\n    )(link_target);\n\n    if (hookReturns === false) {\n      return false;\n    }\n\n    if (typeof hookReturns === 'string') {\n      link_target = hookReturns;\n    }\n\n    link_target = link_target === '_blank' ? '' : '_blank';\n    this.props.editor.setValue(\n      ContentUtils.setMediaData(\n        this.props.editor.getValue(),\n        this.props.entityKey,\n        { link_target },\n      ),\n    );\n    window.setImmediate(this.props.editor.forceRender);\n  }\n\n  confirmImageLink = () => {\n    let { tempLink: link } = this.state;\n    const hookReturns = this.props.hooks('set-image-link', link)(link);\n\n    if (hookReturns === false) {\n      return false;\n    }\n\n    if (typeof hookReturns === 'string') {\n      link = hookReturns;\n    }\n\n    if (link !== null) {\n      this.props.editor.setValue(\n        ContentUtils.setMediaData(\n          this.props.editor.getValue(),\n          this.props.entityKey,\n          { link },\n        ),\n      );\n      window.setImmediate(this.props.editor.forceRender);\n    }\n  };\n\n  handleSizeInputKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.confirmImageSize();\n    } else {\n      return;\n    }\n  };\n\n  setImageWidth = ({ currentTarget }) => {\n    let { value } = currentTarget;\n\n    value && !isNaN(value) && (value = value + 'px');\n\n    this.setState({\n      tempWidth: value,\n    });\n\n    return;\n  };\n\n  setImageHeight = ({ currentTarget }) => {\n    let { value } = currentTarget;\n\n    value && !isNaN(value) && (value = value + 'px');\n\n    this.setState({\n      tempHeight: value,\n    });\n\n    return;\n  };\n\n  confirmImageSize = () => {\n    const { tempWidth: width, tempHeight: height } = this.state;\n    let newImageSize = {};\n\n    width !== null && (newImageSize.width = width);\n    height !== null && (newImageSize.height = height);\n\n    const hookReturns = this.props.hooks(\n      'set-image-size',\n      newImageSize,\n    )(newImageSize);\n\n    if (hookReturns === false) {\n      return false;\n    }\n\n    if (hookReturns && (hookReturns.width || hookReturns.height)) {\n      newImageSize = hookReturns;\n    }\n\n    this.props.editor.setValue(\n      ContentUtils.setMediaData(\n        this.props.editor.getValue(),\n        this.props.entityKey,\n        newImageSize,\n      ),\n    );\n    window.setImmediate(this.props.editor.forceRender);\n  };\n\n  setImageFloat = (float) => {\n    const hookReturns = this.props.hooks('set-image-float', float)(float);\n\n    if (hookReturns === false) {\n      return false;\n    }\n\n    if (typeof hookReturns === 'string') {\n      float = hookReturns;\n    }\n\n    this.props.editor.setValue(\n      ContentUtils.setMediaPosition(\n        this.props.editor.getValue(),\n        this.props.block,\n        { float },\n      ),\n    );\n    this.unlockEditor();\n  };\n\n  setImageAlignment = (alignment) => {\n    const hookReturns = this.props.hooks(\n      'set-image-alignment',\n      alignment,\n    )(alignment);\n\n    if (hookReturns === false) {\n      return false;\n    }\n\n    if (typeof hookReturns === 'string') {\n      alignment = hookReturns;\n    }\n\n    this.props.editor.setValue(\n      ContentUtils.setMediaPosition(\n        this.props.editor.getValue(),\n        this.props.block,\n        { alignment },\n      ),\n    );\n    this.unlockEditor();\n  };\n\n  showToolbar = (event) => {\n    if (\n      this.props.editor.editorProps.readOnly ||\n      this.props.editor.editorProps.disabled\n    ) {\n      return false;\n    }\n\n    event.preventDefault();\n\n    if (!this.state.toolbarVisible) {\n      this.setState(\n        {\n          toolbarVisible: true,\n        },\n        () => {\n          this.lockEditor();\n          this.setState({ toolbarOffset: this.calcToolbarOffset() });\n        },\n      );\n    }\n  };\n\n  hideToolbar = (event) => {\n    event.preventDefault();\n\n    this.setState(\n      {\n        toolbarVisible: false,\n      },\n      () => {\n        this.unlockEditor();\n        // this.props.editor.requestFocus()\n      },\n    );\n  };\n}\n","import './style.scss';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as BaseUtils from 'utils/base';\n\nexport default class Modal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.active = false;\n    this.componentId = 'BRAFT-MODAL-' + BaseUtils.UniqueIndex();\n  }\n\n  static defaultProps = {\n    showFooter: true,\n    closeOnBlur: true,\n  };\n\n  componentDidMount() {\n    if (this.props.visible) {\n      this.active = true;\n      this.renderComponent(this.props);\n    }\n  }\n\n  componentWillReceiveProps(next) {\n    if (this.props.visible && !next.visible) {\n      this.unrenderComponent();\n    } else if (this.props.visible || next.visible) {\n      this.active = true;\n      this.renderComponent(next);\n    }\n  }\n\n  render() {\n    return null;\n  }\n\n  handleTransitionEnd = () => {\n    if (!this.rootElement || !this.rootElement.classList) {\n      return false;\n    }\n\n    if (!this.rootElement.classList.contains('active')) {\n      ReactDOM.unmountComponentAtNode(this.rootElement) &&\n        this.rootElement.parentNode.removeChild(this.rootElement);\n    }\n  };\n\n  unrenderComponent() {\n    this.active = false;\n    this.activeId && window.clearImmediate(this.activeId);\n    if (this.rootElement && this.rootElement.classList) {\n      this.rootElement.classList.remove('active');\n    }\n  }\n\n  renderComponent(props) {\n    if (!this.active) {\n      return false;\n    }\n\n    let {\n      title,\n      className,\n      width,\n      height,\n      children,\n      component,\n      confirmable,\n      showFooter,\n      showCancel,\n      showConfirm,\n      showClose,\n      cancelText,\n      confirmText,\n      bottomText,\n      language,\n    } = props;\n\n    typeof showCancel === 'undefined' && (showCancel = true);\n    typeof showClose === 'undefined' && (showClose = true);\n    typeof showConfirm === 'undefined' && (showConfirm = true);\n    typeof showFooter === 'undefined' && (showFooter = true);\n\n    const childComponent = (\n      <div\n        onMouseDown={this.handleMouseDown}\n        className={'bf-modal ' + (className || '')}\n      >\n        <div className=\"bf-modal-mask\" onClick={this.handleMaskClick}></div>\n        <div\n          onTransitionEnd={this.handleTransitionEnd}\n          style={{ width, height }}\n          className=\"bf-modal-content\"\n        >\n          <div className=\"bf-modal-header\">\n            <h3 className=\"bf-modal-caption\">{title}</h3>\n            {showClose && (\n              <button\n                type=\"button\"\n                onClick={this.close}\n                className=\"bf-modal-close-button\"\n              >\n                <i className=\"bfi-close\"></i>\n              </button>\n            )}\n          </div>\n          <div className=\"bf-modal-body\">{children || component}</div>\n          {showFooter ? (\n            <div className=\"bf-modal-footer\">\n              <div className=\"bf-modal-addon-text\">{bottomText}</div>\n              <div className=\"bf-modal-buttons\">\n                {showCancel && (\n                  <button\n                    type=\"button\"\n                    onClick={this.handleCancel}\n                    className=\"bf-modal-cancel\"\n                  >\n                    {cancelText || language.base.cancel}\n                  </button>\n                )}\n                {showConfirm && (\n                  <button\n                    type=\"button\"\n                    onClick={this.handleConfirm}\n                    className={\n                      'bf-modal-confirm ' + (!confirmable ? 'disabled' : '')\n                    }\n                  >\n                    {confirmText || language.base.confirm}\n                  </button>\n                )}\n              </div>\n            </div>\n          ) : null}\n        </div>\n      </div>\n    );\n\n    this.rootElement = document.querySelector('#' + this.componentId);\n\n    if (!this.rootElement) {\n      this.rootElement = document.createElement('div');\n      this.rootElement.id = this.componentId;\n      this.rootElement.className = 'bf-modal-root';\n      document.body.appendChild(this.rootElement);\n    }\n\n    ReactDOM.render(childComponent, this.rootElement);\n\n    this.activeId = window.setImmediate(() => {\n      this.rootElement.classList.add('active');\n    });\n  }\n\n  handleMouseDown = (event) => {\n    const tagName = event.target.tagName.toLowerCase();\n\n    if (tagName === 'input' || tagName === 'textarea') {\n      return false;\n    }\n\n    event.preventDefault();\n  };\n\n  handleCancel = () => {\n    this.props.closeOnCancel && this.close();\n    this.props.onCancel && this.props.onCancel();\n  };\n\n  handleConfirm = () => {\n    this.props.closeOnConfirm && this.close();\n    this.props.onConfirm && this.props.onConfirm();\n  };\n\n  handleMaskClick = () => {\n    this.props.closeOnBlur && this.close();\n    this.props.onBlue && this.props.onBlue();\n  };\n\n  close = () => {\n    this.unrenderComponent();\n    this.props.onClose && this.props.onClose();\n  };\n}\n\nexport const showModal = (props) => {\n  const hostNode = document.createElement('div');\n\n  hostNode.style.display = 'none';\n  document.body.appendChild(hostNode);\n\n  props = {\n    visible: true,\n    closeOnConfirm: true,\n    closeOnCancel: true,\n    ...props,\n  };\n\n  const close = () => {\n    ReactDOM.unmountComponentAtNode(hostNode) &&\n      hostNode.parentNode.removeChild(hostNode);\n  };\n\n  const onConfirm = () => {\n    props.onConfirm && props.onConfirm();\n  };\n\n  const onCancel = () => {\n    props.onCancel && props.onCancel();\n  };\n\n  const onClose = () => {\n    close();\n    props.onClose && props.onClose();\n  };\n\n  const modalInstance = ReactDOM.render(\n    <Modal\n      {...props}\n      onConfirm={onConfirm}\n      onCancel={onCancel}\n      onClose={onClose}\n    />,\n    hostNode,\n  );\n  modalInstance.destroy = close;\n  modalInstance.update = modalInstance.renderComponent;\n\n  return modalInstance;\n};\n","import React from 'react';\nimport { showModal } from 'components/common/Modal';\nimport './style.scss';\n\nconst playViaModal = (title, component, language) =>\n  showModal({\n    title: title,\n    component: component,\n    language: language,\n    showFooter: false,\n  });\n\nconst typeIconsMap = {\n  video: 'bfi-film',\n  audio: 'bfi-music',\n  embed: 'bfi-code',\n};\n\nexport default ({\n  title,\n  type,\n  language,\n  name,\n  poster,\n  children,\n  onRemove,\n}) => {\n  return (\n    <div className={`bf-player-holder ${type}`}>\n      <div className=\"icon-badge\">\n        <i className={typeIconsMap[type]}></i>\n        <span className=\"text\">{language.media[type]}</span>\n      </div>\n      <button onMouseDown={onRemove} className=\"button-remove\">\n        <i className=\"bfi-close\"></i>\n      </button>\n      <button\n        onMouseDown={() =>\n          playViaModal(name ? `${title}:${name}` : title, children, language)\n        }\n        className=\"button-play\"\n      >\n        <i className=\"bfi-play_arrow\"></i>\n      </button>\n      {name ? <h5 className=\"bf-name\">{name}</h5> : null}\n      {poster ? (\n        <div\n          className=\"bf-poster\"\n          style={{ backgroundImage: `url(${poster})` }}\n        ></div>\n      ) : null}\n    </div>\n  );\n};\n","import './style.scss';\nimport React from 'react';\nimport PlayerModal from 'components/business/PlayerModal';\nimport * as ContentUtils from 'utils/content';\n\nexport default class Video extends React.Component {\n  state = {\n    videoURL: '',\n  };\n\n  componentDidMount() {\n    const hookReturns = this.props.hooks(\n      'insert-video',\n      this.props.mediaData,\n    )(this.props.mediaData);\n\n    if (hookReturns === false) {\n      return false;\n    }\n\n    if (Object.prototype.toString.call(hookReturns) === '[object Promise]') {\n      hookReturns.then((url) => {\n        this.setState({ videoURL: url });\n      });\n    }\n  }\n\n  render() {\n    const { mediaData, language } = this.props;\n    const { url, name, meta } = mediaData;\n\n    return (\n      <div className=\"bf-video-wrap\">\n        <PlayerModal\n          type=\"video\"\n          onRemove={this.removeVideo}\n          poster={meta ? meta.poster || '' : ''}\n          language={language}\n          url={url}\n          name={name}\n          title={language.videoPlayer.title}\n        >\n          <div className=\"bf-video-player\">\n            <video controls poster={meta ? meta.poster || '' : ''}>\n              <source src={this.state.videoURL ? this.state.videoURL : url} />\n            </video>\n          </div>\n        </PlayerModal>\n      </div>\n    );\n  }\n\n  removeVideo = () => {\n    this.props.editor.setValue(\n      ContentUtils.removeBlock(this.props.editorState, this.props.block),\n    );\n  };\n}\n","import './style.scss';\nimport React from 'react';\nimport PlayerModal from 'components/business/PlayerModal';\nimport * as ContentUtils from 'utils/content';\n\nexport default class Audio extends React.Component {\n  render() {\n    const { mediaData, language } = this.props;\n    const { url, name, meta } = mediaData;\n\n    return (\n      <div className=\"bf-audio-wrap\">\n        <PlayerModal\n          type=\"audio\"\n          onRemove={this.removeAudio}\n          poster={meta ? meta.poster || '' : ''}\n          language={language}\n          url={url}\n          name={name}\n          title={language.audioPlayer.title}\n        >\n          <div className=\"bf-audio-player\">\n            <audio controls src={url} />\n          </div>\n        </PlayerModal>\n      </div>\n    );\n  }\n\n  removeAudio = () => {\n    this.props.editor.setValue(\n      ContentUtils.removeBlock(this.props.editorState, this.props.block),\n    );\n  };\n}\n","import './style.scss';\nimport React from 'react';\nimport PlayerModal from 'components/business/PlayerModal';\nimport * as ContentUtils from 'utils/content';\n\nexport default class Embed extends React.Component {\n  render() {\n    const { mediaData, language } = this.props;\n    const { name, url, meta } = mediaData;\n\n    return (\n      <div className=\"bf-embed-wrap\">\n        <PlayerModal\n          type=\"embed\"\n          onRemove={this.removeEmbed}\n          poster={meta ? meta.poster || '' : ''}\n          language={language}\n          url={url}\n          name={name}\n          title={language.videoPlayer.embedTitle}\n        >\n          <div\n            className=\"bf-embed-player\"\n            dangerouslySetInnerHTML={{ __html: url }}\n          ></div>\n        </PlayerModal>\n      </div>\n    );\n  }\n\n  removeEmbed = () => {\n    this.props.editor.setValue(\n      ContentUtils.removeBlock(this.props.editorState, this.props.block),\n    );\n  };\n}\n","import React from 'react';\nimport * as ContentUtils from 'utils/content';\nimport './style.scss';\n\nexport default class Attachment extends React.Component {\n  render() {\n    const { mediaData } = this.props;\n    const {\n      meta: { fileSize, fileType, fileName },\n    } = mediaData;\n\n    return (\n      <div className=\"bf-attachment\">\n        <button onMouseDown={this.removeAttachment} className=\"button-remove\">\n          <i className=\"bfi-close\" />\n        </button>\n        <div\n          className={`bf-attachment-icon bf-attachment-icon-${fileType.toLowerCase()}`}\n        >\n          {fileType}\n        </div>\n        <div className=\"bf-attachment-content\">\n          <div className=\"bf-attachment-content-title\">{fileName}</div>\n          <div className=\"bf-attachment-content-desc\">{fileSize}</div>\n        </div>\n      </div>\n    );\n  }\n\n  removeAttachment = () => {\n    this.props.editor.setValue(\n      ContentUtils.removeBlock(this.props.editorState, this.props.block),\n    );\n  };\n}\n","import React from 'react';\nimport * as ContentUtils from 'utils/content';\nimport './style.scss';\n\nexport default class HorizontalLine extends React.Component {\n  render() {\n    return (\n      <div className=\"bf-hr\">\n        <div className=\"bf-media-toolbar\">\n          <a onClick={this.removeHorizontalLine}>&#xe9ac;</a>\n        </div>\n      </div>\n    );\n  }\n\n  removeHorizontalLine = () => {\n    this.props.editor.setValue(\n      ContentUtils.removeBlock(this.props.editorState, this.props.block),\n    );\n  };\n}\n","import React from 'react';\nimport Image from 'renderers/atomics/Image';\nimport Video from 'renderers/atomics/Video';\nimport Audio from 'renderers/atomics/Audio';\nimport Embed from 'renderers/atomics/Embed';\nimport Attachment from 'renderers/atomics/Attachment';\nimport HorizontalLine from 'renderers/atomics/HorizontalLine';\n\nimport { getExtensionBlockRendererFns } from 'helpers/extension';\n\nclass BlockRenderFnContext {\n  superProps;\n  customBlockRendererFn;\n\n  getRenderFn = (superProps, customBlockRendererFn) => {\n    this.superProps = superProps;\n    this.customBlockRendererFn = customBlockRendererFn;\n\n    return this.blockRendererFn;\n  };\n\n  renderAtomicBlock = (props) => {\n    const { superProps } = this;\n\n    const entityKey = props.block.getEntityAt(0);\n\n    if (!entityKey) {\n      return null;\n    }\n\n    const entity = props.contentState.getEntity(entityKey);\n    const mediaData = entity.getData();\n    const mediaType = entity.getType();\n\n    const mediaProps = {\n      ...superProps,\n      block: props.block,\n      mediaData,\n      entityKey,\n    };\n\n    if (mediaType === 'IMAGE') {\n      return <Image {...mediaProps} />;\n    } else if (mediaType === 'AUDIO') {\n      return <Audio {...mediaProps} />;\n    } else if (mediaType === 'VIDEO') {\n      return <Video {...mediaProps} />;\n    } else if (mediaType === 'EMBED') {\n      return <Embed {...mediaProps} />;\n    } else if (mediaType === 'HR') {\n      return <HorizontalLine {...mediaProps} />;\n    } else if (mediaType === 'ATTACHMENT') {\n      return <Attachment {...mediaProps} />;\n    }\n\n    if (superProps.extendAtomics) {\n      const atomics = superProps.extendAtomics;\n      for (let i = 0; i < atomics.length; i++) {\n        if (mediaType === atomics[i].type) {\n          const Component = atomics[i].component;\n          return <Component {...mediaProps} />;\n        }\n      }\n    }\n\n    return null;\n  };\n\n  blockRendererFn = (block) => {\n    const { customBlockRendererFn, superProps } = this;\n\n    const blockType = block.getType();\n    let blockRenderer = null;\n\n    if (customBlockRendererFn) {\n      blockRenderer = customBlockRendererFn(block, superProps) || null;\n    }\n\n    if (blockRenderer) {\n      return blockRenderer;\n    }\n\n    const extensionBlockRendererFns = getExtensionBlockRendererFns(\n      superProps.editorId,\n    );\n\n    extensionBlockRendererFns.find((item) => {\n      if (\n        item.blockType === blockType ||\n        (item.blockType instanceof RegExp && item.blockType.test(blockType))\n      ) {\n        blockRenderer = item.rendererFn ? item.rendererFn(superProps) : null;\n        return true;\n      }\n    });\n\n    if (blockRenderer) {\n      return blockRenderer;\n    }\n\n    if (blockType === 'atomic') {\n      blockRenderer = {\n        component: this.renderAtomicBlock,\n        editable: false,\n      };\n    }\n\n    return blockRenderer;\n  };\n}\n\nconst blockRenderFnContext = new BlockRenderFnContext();\nexport default blockRenderFnContext.getRenderFn;\n","export default (customBlockStyleFn) => (block) => {\n  const blockAlignment = block.getData() && block.getData().get('textAlign');\n  const blockIndent = block.getData() && block.getData().get('textIndent');\n  const blockFloat = block.getData() && block.getData().get('float');\n\n  let result = '';\n\n  if (blockAlignment) {\n    result = `bfa-${blockAlignment}`;\n  }\n\n  if (blockIndent && blockIndent !== 0) {\n    result += ` bftd-${blockIndent}`;\n  }\n\n  if (blockFloat) {\n    result += ` bff-${blockFloat}`;\n  }\n\n  if (customBlockStyleFn) {\n    result += customBlockStyleFn(block) || '';\n  }\n\n  return result;\n};\n","import { getExtensionInlineStyleMap } from 'helpers/extension';\n\nexport default (props, customStyleMap = {}) => {\n  const extensionInlineStyleMap = getExtensionInlineStyleMap(props.editorId);\n\n  return {\n    SUPERSCRIPT: {\n      position: 'relative',\n      top: '-8px',\n      fontSize: '11px',\n    },\n    SUBSCRIPT: {\n      position: 'relative',\n      bottom: '-8px',\n      fontSize: '11px',\n    },\n    ...extensionInlineStyleMap,\n    ...customStyleMap,\n  };\n};\n","import { getExtensionInlineStyleFns } from 'helpers/extension';\n\nconst getStyleValue = (style) => style.split('-')[1];\n\nexport default (props, options) => (styles, block) => {\n  let output = {};\n  const { fontFamilies, unitExportFn, customStyleFn } = options;\n\n  const extensionInlineStyleFns = getExtensionInlineStyleFns(props.editorId);\n\n  extensionInlineStyleFns.forEach((item) => {\n    output = item.styleFn ? item.styleFn(styles, block, output) : output;\n  });\n\n  output = customStyleFn ? customStyleFn(styles, block, output) : {};\n\n  styles.forEach((style) => {\n    if (style.indexOf('COLOR-') === 0) {\n      output.color = '#' + getStyleValue(style);\n    } else if (style.indexOf('BGCOLOR-') === 0) {\n      output.backgroundColor = '#' + getStyleValue(style);\n    } else if (style.indexOf('FONTSIZE-') === 0) {\n      output.fontSize = unitExportFn(\n        getStyleValue(style),\n        'font-size',\n        'editor',\n      );\n    } else if (style.indexOf('LINEHEIGHT-') === 0) {\n      output.lineHeight = unitExportFn(\n        getStyleValue(style),\n        'line-height',\n        'editor',\n      );\n    } else if (style.indexOf('LETTERSPACING-') === 0) {\n      output.letterSpacing = unitExportFn(\n        getStyleValue(style),\n        'letter-spacing',\n        'editor',\n      );\n    } else if (style.indexOf('TEXTINDENT-') === 0) {\n      output.textIndent = unitExportFn(\n        getStyleValue(style),\n        'text-indent',\n        'editor',\n      );\n    } else if (style.indexOf('FONTFAMILY-') === 0) {\n      output.fontFamily =\n        (\n          fontFamilies.find(\n            (item) => item.name.toUpperCase() === getStyleValue(style),\n          ) || {}\n        ).family || '';\n    }\n  });\n\n  return output;\n};\n","import React from 'react';\n\nexport default (props) => {\n  const { children, entityKey, contentState } = props;\n  const { href, target } = contentState.getEntity(entityKey).getData();\n\n  return (\n    <span className=\"bf-link-wrap\">\n      <a\n        onClick={(event) => viewLink(event, href)}\n        className=\"bf-link\"\n        href={href}\n        target={target}\n      >\n        {children}\n      </a>\n    </span>\n  );\n};\n\nconst viewLink = (event, link) => {\n  // 当按下Ctrl/command键时，点击打开链接文字中的url\n  // if (event.getModifierState('Control')\n  //     || event.getModifierState('Meta')) {\n  //   const tempLink = document.createElement('a')\n  //   tempLink.href = link\n  //   tempLink.target = event.currentTarget.target\n  //   tempLink.click()\n  // }\n\n  if (link.startsWith('https://') || link.startsWith('http://')) {\n    window.open(link, '_blank');\n  } else {\n    window.open(`http://${link}`);\n  }\n};\n","import { CompositeDecorator } from 'draft-js';\nimport CombineDecorators from 'draft-js-multidecorators';\nimport Immutable from 'immutable';\nimport { getExtensionDecorators } from 'helpers/extension';\nimport Link from './Link';\n\nconst KEY_SEPARATOR = '-';\n\nCombineDecorators.prototype.getDecorations = function (block, contentState) {\n  const decorations = Array(block.getText().length).fill(null);\n\n  this.decorators.forEach((decorator, i) => {\n    decorator.getDecorations(block, contentState).forEach((key, offset) => {\n      if (!key) {\n        return;\n      }\n      key = i + KEY_SEPARATOR + key;\n      decorations[offset] = key;\n    });\n  });\n\n  return Immutable.List(decorations);\n};\n\nconst builtinDecorators = [\n  {\n    type: 'entity',\n    decorator: {\n      key: 'LINK',\n      component: Link,\n    },\n  },\n];\n\nconst createStrategy = (type) => (block, callback, contentState) => {\n  block.findEntityRanges((character) => {\n    const entityKey = character.getEntity();\n    return (\n      entityKey !== null && contentState.getEntity(entityKey).getType() === type\n    );\n  }, callback);\n};\n\nexport default (editorId) => {\n  const extensionDecorators = getExtensionDecorators(editorId);\n\n  const entityDecorators = [\n    ...builtinDecorators,\n    ...extensionDecorators.filter((item) => item.type === 'entity'),\n  ];\n\n  const strategyDecorators = extensionDecorators.filter(\n    (item) => item.type === 'strategy',\n  );\n  const classDecorators = extensionDecorators.filter(\n    (item) => item.type === 'class',\n  );\n\n  return new CombineDecorators([\n    // combine decorator classes\n    ...classDecorators.map((item) => item.decorator),\n    // combine decorators created with strategy\n    new CompositeDecorator(strategyDecorators.map((item) => item.decorator)),\n    // combine decorators for entities\n    new CompositeDecorator(\n      entityDecorators.map((item) => ({\n        strategy: createStrategy(item.decorator.key),\n        component: item.decorator.component,\n      })),\n    ),\n  ]);\n};\n","import _getBlockRenderMap from './block/blockRenderMap';\nimport _getBlockRendererFn from './block/blockRendererFn';\nimport _getBlockStyleFn from './block/blockStyleFn';\nimport _getCustomStyleMap from './inline/inlineStyleMap';\nimport _getCustomStyleFn from './inline/inlineStyleFn';\nimport _getDecorators from './decorators';\n\nexport const getBlockRenderMap = _getBlockRenderMap;\nexport const getBlockRendererFn = _getBlockRendererFn;\nexport const getBlockStyleFn = _getBlockStyleFn;\nexport const getCustomStyleMap = _getCustomStyleMap;\nexport const getCustomStyleFn = _getCustomStyleFn;\nexport const getDecorators = _getDecorators;\n","import * as BaseUtils from 'utils/base';\n\nlet resizeEventHandlers = [];\nlet responsiveHelperInited = false;\nlet debounce = false;\n\nexport default {\n  resolve(eventHandler) {\n    let id = BaseUtils.UniqueIndex();\n    resizeEventHandlers.push({ id, eventHandler });\n    return id;\n  },\n\n  unresolve(id) {\n    resizeEventHandlers = resizeEventHandlers.filter((item) => item.id !== id);\n  },\n};\n\nif (!responsiveHelperInited && typeof window === 'object') {\n  window.addEventListener('resize', (event) => {\n    clearTimeout(debounce);\n    debounce = setTimeout(() => {\n      resizeEventHandlers.map((item) => {\n        typeof item.eventHandler === 'function' && item.eventHandler(event);\n      });\n      debounce = false;\n    }, 100);\n  });\n\n  responsiveHelperInited = true;\n}\n","import './style.scss';\nimport React from 'react';\nimport ResponsiveHelper from 'helpers/responsive';\n\nexport default class DropDown extends React.Component {\n  responsiveResolveId = null;\n  dropDownHandlerElement = null;\n  dropDownContentElement = null;\n  state = {\n    active: false,\n    offset: 0,\n  };\n\n  componentDidMount() {\n    if (document) {\n      document.body.addEventListener('click', this.registerClickEvent);\n      this.responsiveResolveId = ResponsiveHelper.resolve(\n        this.fixDropDownPosition,\n      );\n    }\n  }\n\n  componentWillReceiveProps(next) {\n    if (!this.props.disabled && next.disabled) {\n      this.hide();\n    }\n  }\n\n  componentDidUpdate(prevState) {\n    if (!prevState.active && this.state.active) {\n      this.fixDropDownPosition();\n    }\n  }\n\n  componentWillUnmount() {\n    if (document) {\n      document.body.removeEventListener('click', this.registerClickEvent);\n      ResponsiveHelper.unresolve(this.responsiveResolveId);\n    }\n  }\n\n  render() {\n    let { active, offset } = this.state;\n    let {\n      caption,\n      htmlCaption,\n      title,\n      disabled,\n      showArrow,\n      arrowActive,\n      className,\n      children,\n      theme,\n    } = this.props;\n\n    disabled && (active = false);\n    theme === 'light' && (className = ' light-theme ' + className);\n\n    return (\n      <div\n        className={\n          'bf-dropdown ' +\n          (active ? 'active ' : '') +\n          (disabled ? 'disabled ' : '') +\n          className\n        }\n      >\n        {htmlCaption ? (\n          <button\n            type=\"button\"\n            className=\"dropdown-handler\"\n            data-title={title}\n            onClick={this.toggle}\n            dangerouslySetInnerHTML={\n              htmlCaption ? { __html: htmlCaption } : null\n            }\n            ref={(instance) => (this.dropDownHandlerElement = instance)}\n          ></button>\n        ) : (\n          <button\n            type=\"button\"\n            className=\"dropdown-handler\"\n            data-title={title}\n            onClick={this.toggle}\n            ref={(instance) => (this.dropDownHandlerElement = instance)}\n          >\n            <span>{caption}</span>\n            {showArrow !== false ? <i className=\"bfi-drop-down\"></i> : null}\n          </button>\n        )}\n        <div\n          className=\"dropdown-content\"\n          style={{ marginLeft: offset }}\n          ref={(instance) => (this.dropDownContentElement = instance)}\n        >\n          <i\n            style={{ marginLeft: offset * -1 }}\n            className={'dropdown-arrow' + (arrowActive ? ' active' : '')}\n          ></i>\n          <div className=\"dropdown-content-inner\">{children}</div>\n        </div>\n      </div>\n    );\n  }\n\n  fixDropDownPosition = () => {\n    const viewRect = this.props.getContainerNode().getBoundingClientRect();\n    const handlerRect = this.dropDownHandlerElement.getBoundingClientRect();\n    const contentRect = this.dropDownContentElement.getBoundingClientRect();\n\n    let offset = 0;\n    let right =\n      handlerRect.right - handlerRect.width / 2 + contentRect.width / 2;\n    let left = handlerRect.left + handlerRect.width / 2 - contentRect.width / 2;\n\n    right = viewRect.right - right;\n    left = left - viewRect.left;\n\n    if (right < 10) {\n      offset = right - 10;\n    } else if (left < 10) {\n      offset = left * -1 + 10;\n    }\n\n    if (offset !== this.state.offset) {\n      this.setState({ offset });\n    }\n  };\n\n  registerClickEvent = (event) => {\n    const { autoHide } = this.props;\n    const { active } = this.state;\n\n    if (\n      this.dropDownContentElement.contains(event.target) ||\n      this.dropDownHandlerElement.contains(event.target)\n    ) {\n      return false;\n    }\n\n    autoHide && active && this.hide();\n  };\n\n  toggle = () => {\n    this.setState({ active: !this.state.active });\n  };\n\n  show = () => {\n    this.setState({ active: true });\n  };\n\n  hide = () => {\n    this.setState({ active: false });\n  };\n}\n","import React from 'react';\n\nexport default (props) => {\n  if (React.Fragment) {\n    return <React.Fragment>{props.children}</React.Fragment>;\n  } else {\n    return <div className=\"control-item-group\">{props.children}</div>;\n  }\n};\n","import './style.scss';\nimport React from 'react';\nimport DropDown from 'components/common/DropDown';\nimport ControlGroup from 'components/business/ControlGroup';\nimport * as ContentUtils from 'utils/content';\n\nexport default class LinkEditor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      text: '',\n      href: '',\n      target: props.defaultLinkTarget || '',\n      textSelected: false,\n    };\n  }\n\n  dropDownInstance = null;\n\n  componentWillReceiveProps(nextProps) {\n    const { href, target } = ContentUtils.getSelectionEntityData(\n      nextProps.editorState,\n      'LINK',\n    );\n    const textSelected =\n      !ContentUtils.isSelectionCollapsed(this.props.editorState) &&\n      ContentUtils.getSelectionBlockType(this.props.editorState) !== 'atomic';\n\n    let selectedText = '';\n\n    if (textSelected) {\n      selectedText = ContentUtils.getSelectionText(this.props.editorState);\n    }\n\n    this.setState({\n      textSelected: textSelected,\n      text: selectedText,\n      href: href || '',\n      target:\n        typeof target === 'undefined'\n          ? nextProps.defaultLinkTarget || ''\n          : target || '',\n    });\n  }\n\n  render() {\n    const { allowInsertLinkText } = this.props;\n    const { text, href, textSelected } = this.state;\n    const caption = <i className=\"bfi-link\"></i>;\n\n    return (\n      <ControlGroup>\n        <DropDown\n          key={0}\n          caption={caption}\n          title={this.props.language.controls.link}\n          autoHide={true}\n          getContainerNode={this.props.getContainerNode}\n          showArrow={false}\n          ref={(instance) => (this.dropDownInstance = instance)}\n          className={'control-item dropdown link-editor-dropdown'}\n        >\n          <div className=\"bf-link-editor\">\n            {allowInsertLinkText ? (\n              <div className=\"input-group\">\n                <input\n                  type=\"text\"\n                  value={text}\n                  spellCheck={false}\n                  disabled={textSelected}\n                  placeholder={\n                    this.props.language.linkEditor.textInputPlaceHolder\n                  }\n                  onKeyDown={this.handeKeyDown}\n                  onChange={this.handleTnputText}\n                />\n              </div>\n            ) : null}\n            <div className=\"input-group\">\n              <input\n                type=\"text\"\n                value={href}\n                spellCheck={false}\n                placeholder={\n                  this.props.language.linkEditor.linkInputPlaceHolder\n                }\n                onKeyDown={this.handeKeyDown}\n                onChange={this.handleInputLink}\n              />\n            </div>\n            <div className=\"buttons\">\n              <a\n                onClick={this.handleUnlink}\n                className=\"primary button-remove-link pull-left\"\n              >\n                <i className=\"bfi-close\"></i>\n                <span>{this.props.language.linkEditor.removeLink}</span>\n              </a>\n              <button\n                type=\"button\"\n                onClick={this.handleConfirm}\n                className=\"primary pull-right\"\n              >\n                {this.props.language.base.confirm}\n              </button>\n              <button\n                type=\"button\"\n                onClick={this.handleCancel}\n                className=\"default pull-right\"\n              >\n                {this.props.language.base.cancel}\n              </button>\n            </div>\n          </div>\n        </DropDown>\n        <button\n          key={1}\n          type=\"button\"\n          data-title={this.props.language.controls.unlink}\n          className=\"control-item button\"\n          onClick={this.handleUnlink}\n          disabled={!textSelected || !href}\n        >\n          <i className=\"bfi-link-off\"></i>\n        </button>\n      </ControlGroup>\n    );\n  }\n\n  handeKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleConfirm();\n      e.preventDefault();\n      return false;\n    }\n  };\n\n  handleTnputText = (e) => {\n    this.setState({\n      text: e.currentTarget.value,\n    });\n  };\n\n  handleInputLink = (e) => {\n    this.setState({\n      href: e.currentTarget.value,\n    });\n  };\n\n  setTarget = () => {\n    this.setState({\n      target: this.state.target === '_blank' ? '' : '_blank',\n    });\n  };\n\n  handleCancel = () => {\n    this.dropDownInstance.hide();\n  };\n\n  handleUnlink = () => {\n    this.dropDownInstance.hide();\n    this.props.editor.setValue(\n      ContentUtils.toggleSelectionLink(this.props.editorState, false),\n    );\n  };\n\n  handleConfirm = () => {\n    let { text, href, target, textSelected } = this.state;\n    const hookReturns = this.props.hooks('toggle-link', { href, target })({\n      href,\n      target,\n    });\n\n    this.dropDownInstance.hide();\n    this.props.editor.requestFocus();\n\n    if (hookReturns === false) {\n      return false;\n    }\n\n    if (hookReturns) {\n      typeof hookReturns.href === 'string' && (href = hookReturns.href);\n      typeof hookReturns.target === 'string' && (target = hookReturns.target);\n    }\n\n    if (textSelected) {\n      if (href) {\n        this.props.editor.setValue(\n          ContentUtils.toggleSelectionLink(\n            this.props.editorState,\n            href,\n            target,\n          ),\n        );\n      } else {\n        this.props.editor.setValue(\n          ContentUtils.toggleSelectionLink(this.props.editorState, false),\n        );\n      }\n    } else {\n      this.props.editor.setValue(\n        ContentUtils.insertText(this.props.editorState, text || href, null, {\n          type: 'LINK',\n          data: { href, target },\n        }),\n      );\n    }\n  };\n}\n","import React from 'react';\n\nexport const getHeadings = (lang) => [\n  {\n    key: 'header-one',\n    title: lang.controls.header + ' 1',\n    text: <h1>{lang.controls.header} 1</h1>,\n    type: 'block-type',\n    command: 'header-one',\n  },\n  {\n    key: 'header-two',\n    title: lang.controls.header + ' 2',\n    text: <h2>{lang.controls.header} 2</h2>,\n    type: 'block-type',\n    command: 'header-two',\n  },\n  {\n    key: 'header-three',\n    title: lang.controls.header + ' 3',\n    text: <h3>{lang.controls.header} 3</h3>,\n    type: 'block-type',\n    command: 'header-three',\n  },\n  {\n    key: 'header-four',\n    title: lang.controls.header + ' 4',\n    text: <h4>{lang.controls.header} 4</h4>,\n    type: 'block-type',\n    command: 'header-four',\n  },\n  {\n    key: 'header-five',\n    title: lang.controls.header + ' 5',\n    text: <h5>{lang.controls.header} 5</h5>,\n    type: 'block-type',\n    command: 'header-five',\n  },\n  {\n    key: 'header-six',\n    title: lang.controls.header + ' 6',\n    text: <h6>{lang.controls.header} 6</h6>,\n    type: 'block-type',\n    command: 'header-six',\n  },\n  {\n    key: 'unstyled',\n    title: lang.controls.normal,\n    text: lang.controls.normal,\n    type: 'block-type',\n    command: 'unstyled',\n  },\n];\n\nexport const blocks = {\n  'header-one': 'h1',\n  'header-two': 'h2',\n  'header-three': 'h3',\n  'header-four': 'h4',\n  'header-fiv': 'h5',\n  'header-six': 'h6',\n  unstyled: 'p',\n  blockquote: 'blockquote',\n};\n","import './style.scss';\nimport React from 'react';\nimport { getHeadings } from 'configs/maps';\nimport DropDown from 'components/common/DropDown';\n\nexport default (props) => {\n  let dropDownInstance = null;\n\n  const headings = getHeadings(props.language).filter(\n    (item) => props.headings.indexOf(item.key) !== -1,\n  );\n  const currentHeadingIndex = headings.findIndex(\n    (item) => item.command === props.current,\n  );\n  const caption = headings[currentHeadingIndex]\n    ? headings[currentHeadingIndex].title\n    : props.language.controls.normal;\n\n  return (\n    <DropDown\n      caption={caption}\n      autoHide={true}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.headings}\n      arrowActive={currentHeadingIndex === 0}\n      ref={(instance) => (dropDownInstance = instance)}\n      className={'control-item dropdown headings-dropdown'}\n    >\n      <ul className=\"menu\">\n        {headings.map((item, index) => {\n          let isActive = props.current === item.command;\n          return (\n            <li\n              key={index}\n              className={'menu-item' + (isActive ? ' active' : '')}\n              onClick={() => {\n                props.onChange(item.command, item.type),\n                  dropDownInstance.hide();\n              }}\n            >\n              {item.text}\n            </li>\n          );\n        })}\n      </ul>\n    </DropDown>\n  );\n};\n","import './style.scss';\nimport React from 'react';\n\nexport default (props) => (\n  <div className=\"bf-colors-wrap\">\n    <ul className=\"bf-colors\">\n      {props.presetColors.map((item, index) => {\n        let className =\n          props.color && item.toLowerCase() === props.color.toLowerCase()\n            ? 'color-item active'\n            : 'color-item';\n        return (\n          <li\n            key={index}\n            title={item}\n            className={className}\n            style={{ color: item }}\n            data-color={item.replace('#', '')}\n            onClick={(e) => {\n              props.onChange(e.currentTarget.dataset.color, true);\n            }}\n          ></li>\n        );\n      })}\n    </ul>\n  </div>\n);\n","import './style.scss';\nimport React from 'react';\nimport DropDown from 'components/common/DropDown';\nimport BuiltinColorPicker from 'components/common/ColorPicker';\nimport * as ContentUtils from 'utils/content';\n\nexport default class TextColor extends React.Component {\n  state = {\n    colorType: 'color',\n  };\n\n  render() {\n    let captionStyle = {};\n    let currentColor = null;\n    let { colorType } = this.state;\n\n    const selectionStyles = this.props.editorState\n      .getCurrentInlineStyle()\n      .toJS();\n\n    selectionStyles.forEach((style) => {\n      if (style.indexOf('COLOR-') === 0) {\n        captionStyle.color = '#' + style.split('-')[1];\n        colorType === 'color' && (currentColor = captionStyle.color);\n      }\n\n      if (style.indexOf('BGCOLOR-') === 0) {\n        captionStyle.backgroundColor = '#' + style.split('-')[1];\n        colorType === 'background-color' &&\n          (currentColor = captionStyle.backgroundColor);\n      }\n    });\n\n    const caption = (\n      <i style={captionStyle} className=\"bfi-text-color\">\n        <span className=\"path1\"></span>\n        <span className=\"path2\"></span>\n      </i>\n    );\n\n    const ColorPicker = this.props.colorPicker || BuiltinColorPicker;\n\n    return (\n      <DropDown\n        caption={caption}\n        title={this.props.language.controls.color}\n        showArrow={false}\n        autoHide={this.props.autoHide}\n        theme={this.props.theme}\n        getContainerNode={this.props.getContainerNode}\n        ref={(instance) => (this.dropDownInstance = instance)}\n        className={'control-item dropdown text-color-dropdown'}\n      >\n        <div className=\"bf-text-color-picker-wrap\">\n          <div\n            className=\"bf-color-switch-buttons\"\n            style={this.props.enableBackgroundColor ? {} : { display: 'none' }}\n          >\n            <button\n              type=\"button\"\n              data-type=\"color\"\n              className={colorType === 'color' ? 'active' : ''}\n              onClick={this.switchColorType}\n            >\n              {this.props.language.controls.textColor}\n            </button>\n            <button\n              type=\"button\"\n              data-type=\"background-color\"\n              className={colorType === 'background-color' ? 'active' : ''}\n              onClick={this.switchColorType}\n            >\n              {this.props.language.controls.backgroundColor}\n            </button>\n          </div>\n          <ColorPicker\n            width={200}\n            color={currentColor}\n            disableAlpha={true}\n            presetColors={this.props.colors}\n            onChange={this.toggleColor}\n          />\n        </div>\n      </DropDown>\n    );\n  }\n\n  switchColorType = ({ currentTarget }) => {\n    this.setState({\n      colorType: currentTarget.dataset.type,\n    });\n  };\n\n  toggleColor = (color, closePicker) => {\n    if (color) {\n      const hookReturns = this.props.hooks(\n        `toggle-text-${this.state.colorType}`,\n        color,\n      )(color);\n\n      if (hookReturns === false) {\n        return false;\n      }\n\n      if (typeof hookReturns === 'string') {\n        color = hookReturns;\n      }\n\n      if (this.state.colorType === 'color') {\n        this.props.editor.setValue(\n          ContentUtils.toggleSelectionColor(this.props.editorState, color),\n        );\n      } else {\n        this.props.editor.setValue(\n          ContentUtils.toggleSelectionBackgroundColor(\n            this.props.editorState,\n            color,\n          ),\n        );\n      }\n    }\n\n    if (closePicker) {\n      this.dropDownInstance.hide();\n      this.props.editor.requestFocus();\n    }\n  };\n}\n","import './style.scss';\nimport React from 'react';\nimport DropDown from 'components/common/DropDown';\nimport * as ContentUtils from 'utils/content';\n\nconst toggleFontSize = (event, props) => {\n  let fontSize = event.currentTarget.dataset.size;\n  const hookReturns = props.hooks('toggle-font-size', fontSize)(fontSize);\n\n  if (hookReturns === false) {\n    return false;\n  }\n\n  if (!isNaN(fontSize)) {\n    fontSize = hookReturns;\n  }\n\n  props.editor.setValue(\n    ContentUtils.toggleSelectionFontSize(props.editorState, fontSize),\n  );\n  props.editor.requestFocus();\n};\n\nexport default (props) => {\n  let caption = null;\n  let currentFontSize = null;\n  let dropDownInstance = null;\n\n  props.fontSizes.find((item) => {\n    if (\n      ContentUtils.selectionHasInlineStyle(\n        props.editorState,\n        'FONTSIZE-' + item,\n      )\n    ) {\n      caption = item;\n      currentFontSize = item;\n      return true;\n    }\n    return false;\n  });\n\n  return (\n    <DropDown\n      autoHide={true}\n      caption={caption || props.defaultCaption}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.fontSize}\n      ref={(instance) => (dropDownInstance = instance)}\n      className={'control-item dropdown bf-font-size-dropdown'}\n    >\n      <ul className=\"bf-font-sizes\">\n        {props.fontSizes.map((item, index) => {\n          return (\n            <li\n              key={index}\n              className={item === currentFontSize ? 'active' : null}\n              data-size={item}\n              onClick={(event) => {\n                toggleFontSize(event, props), dropDownInstance.hide();\n              }}\n            >\n              {item}\n            </li>\n          );\n        })}\n      </ul>\n    </DropDown>\n  );\n};\n","import './style.scss';\nimport React from 'react';\nimport DropDown from 'components/common/DropDown';\nimport * as ContentUtils from 'utils/content';\n\nconst toggleLineHeight = (event, props) => {\n  let lineHeight = event.currentTarget.dataset.size;\n  const hookReturns = props.hooks('toggle-line-height', lineHeight)(lineHeight);\n\n  if (hookReturns === false) {\n    return false;\n  }\n\n  if (!isNaN(hookReturns)) {\n    lineHeight = hookReturns;\n  }\n\n  props.editor.setValue(\n    ContentUtils.toggleSelectionLineHeight(props.editorState, lineHeight),\n  );\n  props.editor.requestFocus();\n};\n\nexport default (props) => {\n  let caption = null;\n  let currentLineHeight = null;\n  let dropDownInstance = null;\n\n  props.lineHeights.find((item) => {\n    if (\n      ContentUtils.selectionHasInlineStyle(\n        props.editorState,\n        'LINEHEIGHT-' + item,\n      )\n    ) {\n      caption = item;\n      currentLineHeight = item;\n      return true;\n    }\n    return false;\n  });\n\n  return (\n    <DropDown\n      autoHide={true}\n      caption={caption || props.defaultCaption}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.lineHeight}\n      ref={(instance) => (dropDownInstance = instance)}\n      className={'control-item dropdown bf-line-height-dropdown'}\n    >\n      <ul className=\"bf-line-heights\">\n        {props.lineHeights.map((item, index) => {\n          return (\n            <li\n              key={index}\n              className={item === currentLineHeight ? 'active' : null}\n              data-size={item}\n              onClick={(event) => {\n                toggleLineHeight(event, props), dropDownInstance.hide();\n              }}\n            >\n              {item}\n            </li>\n          );\n        })}\n      </ul>\n    </DropDown>\n  );\n};\n","import './style.scss';\nimport React from 'react';\nimport DropDown from 'components/common/DropDown';\nimport * as ContentUtils from 'utils/content';\n\nconst toggleFontFamily = (event, props) => {\n  let fontFamilyName = event.currentTarget.dataset.name;\n  const hookReturns = props.hooks('toggle-font-family', fontFamilyName)(\n    fontFamilyName,\n    props.fontFamilies,\n  );\n\n  if (hookReturns === false) {\n    return false;\n  }\n\n  if (typeof hookReturns === 'string') {\n    fontFamilyName = hookReturns;\n  }\n\n  props.editor.setValue(\n    ContentUtils.toggleSelectionFontFamily(props.editorState, fontFamilyName),\n  );\n  props.editor.requestFocus();\n};\n\nexport default (props) => {\n  let caption = null;\n  let currentIndex = null;\n  let dropDownInstance = null;\n\n  props.fontFamilies.find((item, index) => {\n    if (\n      ContentUtils.selectionHasInlineStyle(\n        props.editorState,\n        'FONTFAMILY-' + item.name,\n      )\n    ) {\n      caption = item.name;\n      currentIndex = index;\n      return true;\n    }\n    return false;\n  });\n\n  return (\n    <DropDown\n      caption={caption || props.defaultCaption}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.fontFamily}\n      autoHide={true}\n      arrowActive={currentIndex === 0}\n      ref={(instance) => (dropDownInstance = instance)}\n      className={'control-item dropdown font-family-dropdown'}\n    >\n      <ul className=\"menu\">\n        {props.fontFamilies.map((item, index) => {\n          return (\n            <li\n              key={index}\n              className={\n                'menu-item ' + (index === currentIndex ? 'active' : '')\n              }\n              data-name={item.name}\n              onClick={(event) => {\n                toggleFontFamily(event, props), dropDownInstance.hide();\n              }}\n            >\n              <span style={{ fontFamily: item.family }}>{item.name}</span>\n            </li>\n          );\n        })}\n      </ul>\n    </DropDown>\n  );\n};\n","import React from 'react';\nimport * as ContentUtils from 'utils/content';\nimport ControlGroup from 'components/business/ControlGroup';\n\nexport default class TextAlign extends React.Component {\n  state = {\n    currentAlignment: undefined,\n  };\n\n  componentWillReceiveProps(next) {\n    this.setState({\n      currentAlignment: ContentUtils.getSelectionBlockData(\n        next.editorState,\n        'textAlign',\n      ),\n    });\n  }\n\n  setAlignment = (event) => {\n    let { alignment } = event.currentTarget.dataset;\n    const hookReturns = this.props.hooks(\n      'toggle-text-alignment',\n      alignment,\n    )(alignment);\n\n    if (this.props.textAligns.indexOf(hookReturns) > -1) {\n      alignment = hookReturns;\n    }\n\n    this.props.editor.setValue(\n      ContentUtils.toggleSelectionAlignment(this.props.editorState, alignment),\n    );\n    this.props.editor.requestFocus();\n  };\n\n  render() {\n    const textAlignmentTitles = [\n      this.props.language.controls.alignLeft,\n      this.props.language.controls.alignCenter,\n      this.props.language.controls.alignRight,\n      this.props.language.controls.alignJustify,\n    ];\n\n    return (\n      <ControlGroup>\n        {this.props.textAligns.map((item, index) => (\n          <button\n            type=\"button\"\n            key={index}\n            data-title={textAlignmentTitles[index]}\n            data-alignment={item}\n            className={\n              'control-item button ' +\n              (item === this.state.currentAlignment ? 'active' : null)\n            }\n            onClick={this.setAlignment}\n          >\n            <i className={'bfi-align-' + item}></i>\n          </button>\n        ))}\n      </ControlGroup>\n    );\n  }\n}\n","import './style.scss';\nimport React from 'react';\nimport DropDown from 'components/common/DropDown';\nimport * as ContentUtils from 'utils/content';\n\nconst insertEmoji = (event, props) => {\n  let emoji = event.currentTarget.dataset.emoji;\n  const hookReturns = props.hooks('insert-emoji', emoji)(emoji);\n\n  if (hookReturns === false) {\n    return false;\n  }\n\n  if (typeof hookReturns === 'string') {\n    emoji = hookReturns;\n  }\n\n  props.editor.setValue(ContentUtils.insertText(props.editorState, emoji));\n  props.editor.requestFocus();\n};\n\nexport default (props) => {\n  return (\n    <DropDown\n      caption={props.defaultCaption}\n      autoHide={true}\n      showArrow={false}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.emoji}\n      className={'control-item dropdown bf-emoji-dropdown'}\n    >\n      <div className=\"bf-emojis-wrap\">\n        <ul className=\"bf-emojis\">\n          {props.emojis.map((item, index) => {\n            return (\n              <li\n                key={index}\n                data-emoji={item}\n                onClick={(event) => insertEmoji(event, props)}\n              >\n                {item}\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    </DropDown>\n  );\n};\n","import './style.scss';\nimport React from 'react';\nimport DropDown from 'components/common/DropDown';\nimport * as ContentUtils from 'utils/content';\n\nconst toggleLetterSpacing = (event, props) => {\n  let letterSpacing = event.currentTarget.dataset.size;\n  const hookReturns = props.hooks(\n    'toggle-letter-spacing',\n    letterSpacing,\n  )(letterSpacing);\n\n  if (hookReturns === false) {\n    return false;\n  }\n\n  if (!isNaN(hookReturns)) {\n    letterSpacing = hookReturns;\n  }\n\n  props.editor.setValue(\n    ContentUtils.toggleSelectionLetterSpacing(props.editorState, letterSpacing),\n  );\n  props.editor.requestFocus();\n};\n\nexport default (props) => {\n  let caption = null;\n  let currentLetterSpacing = null;\n  let dropDownInstance = null;\n\n  props.letterSpacings.find((item) => {\n    if (\n      ContentUtils.selectionHasInlineStyle(\n        props.editorState,\n        'LETTERSPACING-' + item,\n      )\n    ) {\n      caption = item;\n      currentLetterSpacing = item;\n      return true;\n    }\n    return false;\n  });\n\n  return (\n    <DropDown\n      autoHide={true}\n      caption={caption || props.defaultCaption}\n      getContainerNode={props.getContainerNode}\n      title={props.language.controls.letterSpacing}\n      ref={(instance) => (dropDownInstance = instance)}\n      className={'control-item dropdown bf-letter-spacing-dropdown'}\n    >\n      <ul className=\"bf-letter-spacings\">\n        {props.letterSpacings.map((item, index) => {\n          return (\n            <li\n              key={index}\n              className={item === currentLetterSpacing ? 'active' : null}\n              data-size={item}\n              onClick={(event) => {\n                toggleLetterSpacing(event, props), dropDownInstance.hide();\n              }}\n            >\n              {item}\n            </li>\n          );\n        })}\n      </ul>\n    </DropDown>\n  );\n};\n","import React from 'react';\nimport * as ContentUtils from 'utils/content';\nimport ControlGroup from 'components/business/ControlGroup';\n\nexport default class TextAlign extends React.Component {\n  state = {\n    currentIndent: 0,\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      currentIndent:\n        ContentUtils.getSelectionBlockData(\n          nextProps.editorState,\n          'textIndent',\n        ) || 0,\n    });\n  }\n\n  increaseIndent = () => {\n    this.props.editor.setValue(\n      ContentUtils.increaseSelectionIndent(this.props.editorState),\n    );\n    this.props.editor.requestFocus();\n  };\n\n  decreaseIndent = () => {\n    this.props.editor.setValue(\n      ContentUtils.decreaseSelectionIndent(this.props.editorState),\n    );\n    this.props.editor.requestFocus();\n  };\n\n  render() {\n    const { currentIndent } = this.state;\n    const { language } = this.props;\n\n    return (\n      <ControlGroup>\n        <button\n          key={0}\n          type=\"button\"\n          data-title={language.controls.increaseIndent}\n          disabled={currentIndent >= 6}\n          className={`control-item button button-indent-increase${\n            currentIndent > 0 && currentIndent < 6 ? ' active' : ''\n          }`}\n          onClick={this.increaseIndent}\n        >\n          <i className={'bfi-indent-increase'}></i>\n        </button>\n        <button\n          key={1}\n          type=\"button\"\n          data-title={language.controls.decreaseIndent}\n          disabled={currentIndent <= 0}\n          className=\"control-item button button-indent-decrease\"\n          onClick={this.decreaseIndent}\n        >\n          <i className={'bfi-indent-decrease'}></i>\n        </button>\n      </ControlGroup>\n    );\n  }\n}\n","import './style.scss';\nimport React from 'react';\nimport getEditorControls from 'configs/controls';\nimport LinkEditor from 'components/business/LinkEditor';\nimport HeadingPicker from 'components/business/Headings';\nimport TextColorPicker from 'components/business/TextColor';\nimport FontSizePicker from 'components/business/FontSize';\nimport LineHeightPicker from 'components/business/LineHeight';\nimport FontFamilyPicker from 'components/business/FontFamily';\nimport TextAlign from 'components/business/TextAlign';\nimport EmojiPicker from 'components/business/EmojiPicker';\nimport LetterSpacingPicker from 'components/business/LetterSpacing';\nimport TextIndent from 'components/business/TextIndent';\nimport DropDown from 'components/common/DropDown';\nimport * as ContentUtils from 'utils/content';\nimport { showModal } from 'components/common/Modal';\nimport { getExtensionControls } from 'helpers/extension';\n\nconst commandHookMap = {\n  'inline-style': 'toggle-inline-style',\n  'block-type': 'change-block-type',\n  'editor-method': 'exec-editor-command',\n};\n\nconst exclusiveInlineStyles = {\n  superscript: 'subscript',\n  subscript: 'superscript',\n};\n\nconst mergeControls = (\n  commonProps,\n  builtControls,\n  extensionControls,\n  extendControls,\n) => {\n  extensionControls = extensionControls.map((item) =>\n    typeof item === 'function' ? item(commonProps) : item,\n  );\n  extendControls = extendControls.map((item) =>\n    typeof item === 'function' ? item(commonProps) : item,\n  );\n\n  if (extensionControls.length === 0 && extendControls.length === 0) {\n    return builtControls;\n  }\n\n  return builtControls\n    .map((item) => {\n      return (\n        extendControls.find((subItem) => {\n          return subItem.replace === (item.key || item);\n        }) ||\n        extensionControls.find((subItem) => {\n          return subItem.replace === (item.key || item);\n        }) ||\n        item\n      );\n    })\n    .concat(extensionControls.length ? 'separator' : '')\n    .concat(\n      extensionControls.filter((item) => {\n        return !item.replace;\n      }),\n    )\n    .concat(\n      extendControls.filter((item) => {\n        return typeof item === 'string' || !item.replace;\n      }),\n    );\n};\n\nexport default class ControlBar extends React.Component {\n  allControls = [];\n  mediaLibiraryModal = null;\n  extendedModals = {};\n\n  componentDidUpdate() {\n    const { language } = this.props;\n\n    this.allControls.forEach((item) => {\n      if (item.type === 'modal') {\n        if (item.modal && item.modal.id && this.extendedModals[item.modal.id]) {\n          this.extendedModals[item.modal.id].update({\n            ...item.modal,\n            language,\n          });\n        }\n      }\n    });\n  }\n\n  getControlItemClassName(data) {\n    let className = 'control-item button';\n    let { type, command } = data;\n\n    if (\n      type === 'inline-style' &&\n      ContentUtils.selectionHasInlineStyle(this.props.editorState, command)\n    ) {\n      className += ' active';\n    } else if (\n      type === 'block-type' &&\n      ContentUtils.getSelectionBlockType(this.props.editorState) === command\n    ) {\n      className += ' active';\n    } else if (\n      type === 'entity' &&\n      ContentUtils.getSelectionEntityType(this.props.editorState) === command\n    ) {\n      className += ' active';\n    }\n\n    return className;\n  }\n\n  applyControl(command, type, data = {}) {\n    const hookReturns = this.props.hooks(\n      commandHookMap[type] || type,\n      command,\n    )(command);\n    let editorState = this.props.editorState;\n\n    if (hookReturns === false) {\n      return false;\n    }\n\n    if (typeof hookReturns === 'string') {\n      command = hookReturns;\n    }\n\n    if (type === 'inline-style') {\n      let exclusiveInlineStyle = exclusiveInlineStyles[command];\n      if (\n        exclusiveInlineStyle &&\n        ContentUtils.selectionHasInlineStyle(editorState, exclusiveInlineStyle)\n      ) {\n        editorState = ContentUtils.toggleSelectionInlineStyle(\n          editorState,\n          exclusiveInlineStyle,\n        );\n      }\n      this.props.editor.setValue(\n        ContentUtils.toggleSelectionInlineStyle(editorState, command),\n      );\n    } else if (type === 'block-type') {\n      this.props.editor.setValue(\n        ContentUtils.toggleSelectionBlockType(editorState, command),\n      );\n    } else if (type === 'entity') {\n      this.props.editor.setValue(\n        ContentUtils.toggleSelectionEntity(editorState, {\n          type: command,\n          mutability: data.mutability || 'MUTABLE',\n          data: data.data || {},\n        }),\n      );\n    } else if (type === 'editor-method') {\n      this.props.editor[command] && this.props.editor[command]();\n    }\n  }\n\n  openBraftFinder = () => {\n    if (!this.props.braftFinder || !this.props.braftFinder.ReactComponent) {\n      return false;\n    }\n\n    if (this.props.hooks('open-braft-finder')() === false) {\n      return false;\n    }\n\n    const mediaProps = this.props.media;\n    const MediaLibrary = this.props.braftFinder.ReactComponent;\n\n    this.mediaLibiraryModal = showModal({\n      title: this.props.language.controls.mediaLibirary,\n      language: this.props.language,\n      width: 640,\n      showFooter: false,\n      component: (\n        <MediaLibrary\n          accepts={mediaProps.accepts}\n          onCancel={this.closeBraftFinder}\n          onInsert={this.insertMedias}\n          onChange={mediaProps.onChange}\n          externals={mediaProps.externals}\n          onBeforeSelect={this.bindBraftFinderHook('select-medias')}\n          onBeforeDeselect={this.bindBraftFinderHook('deselect-medias')}\n          onBeforeRemove={this.bindBraftFinderHook('remove-medias')}\n          onBeforeInsert={this.bindBraftFinderHook('insert-medias')}\n          onFileSelect={this.bindBraftFinderHook('select-files')}\n        />\n      ),\n    });\n  };\n\n  bindBraftFinderHook = (hookName) => (...params) => {\n    return this.props.hooks(hookName, params[0])(...params);\n  };\n\n  insertMedias = (medias) => {\n    this.props.editor.setValue(\n      ContentUtils.insertMedias(this.props.editorState, medias),\n    );\n    this.props.editor.requestFocus();\n    this.props.media.onInsert && this.props.media.onInsert(medias);\n    this.closeBraftFinder();\n  };\n\n  closeBraftFinder = () => {\n    this.props.media.onCancel && this.props.media.onCancel();\n    this.mediaLibiraryModal && this.mediaLibiraryModal.close();\n  };\n\n  render() {\n    const {\n      editor,\n      editorId,\n      editorState,\n      className,\n      style,\n      controls,\n      media,\n      extendControls,\n      language,\n      hooks,\n      colors,\n      colorPicker,\n      colorPickerTheme,\n      colorPickerAutoHide,\n      headings,\n      fontSizes,\n      fontFamilies,\n      emojis,\n      getContainerNode,\n      lineHeights,\n      letterSpacings,\n      textAligns,\n      textBackgroundColor,\n      allowInsertLinkText,\n      defaultLinkTarget,\n    } = this.props;\n    const currentBlockType = ContentUtils.getSelectionBlockType(editorState);\n    const commonProps = {\n      editor,\n      editorId,\n      editorState,\n      language,\n      getContainerNode,\n      hooks,\n    };\n\n    const renderedControls = [];\n    const editorControls = getEditorControls(language, editor);\n    const extensionControls = getExtensionControls(editorId);\n    const allControls = mergeControls(\n      commonProps,\n      controls,\n      extensionControls,\n      extendControls,\n    );\n\n    this.allControls = allControls;\n\n    return (\n      <div\n        className={`bf-controlbar ${className || ''}`}\n        style={style}\n        onMouseDown={this.preventDefault}\n      >\n        {allControls.map((item, index) => {\n          let itemKey = typeof item === 'string' ? item : item.key;\n          if (typeof itemKey !== 'string') {\n            return null;\n          }\n          if (renderedControls.indexOf(itemKey) > -1) {\n            return null;\n          }\n          if (itemKey.toLowerCase() === 'separator') {\n            return <span key={index} className=\"separator-line\"></span>;\n          }\n          let controlItem = editorControls.find((subItem) => {\n            return subItem.key.toLowerCase() === itemKey.toLowerCase();\n          });\n          if (typeof item !== 'string') {\n            controlItem = { ...controlItem, ...item };\n          }\n          if (!controlItem) {\n            return null;\n          }\n          renderedControls.push(itemKey);\n          if (controlItem.type === 'headings') {\n            return (\n              <HeadingPicker\n                key={index}\n                headings={headings}\n                current={currentBlockType}\n                onChange={(command) => this.applyControl(command, 'block-type')}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'text-color') {\n            return (\n              <TextColorPicker\n                key={index}\n                colors={colors}\n                colorPicker={colorPicker}\n                theme={colorPickerTheme}\n                autoHide={colorPickerAutoHide}\n                enableBackgroundColor={textBackgroundColor}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'font-size') {\n            return (\n              <FontSizePicker\n                key={index}\n                fontSizes={fontSizes}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'line-height') {\n            return (\n              <LineHeightPicker\n                key={index}\n                lineHeights={lineHeights}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'letter-spacing') {\n            return (\n              <LetterSpacingPicker\n                key={index}\n                letterSpacings={letterSpacings}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'text-indent') {\n            return (\n              <TextIndent\n                key={index}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'font-family') {\n            return (\n              <FontFamilyPicker\n                key={index}\n                fontFamilies={fontFamilies}\n                defaultCaption={controlItem.title}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'emoji') {\n            return (\n              <EmojiPicker\n                key={index}\n                emojis={emojis}\n                defaultCaption={controlItem.text}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'link') {\n            return (\n              <LinkEditor\n                key={index}\n                defaultLinkTarget={defaultLinkTarget}\n                allowInsertLinkText={allowInsertLinkText}\n                {...commonProps}\n              />\n            );\n          } else if (controlItem.type === 'text-align') {\n            return (\n              <TextAlign key={index} textAligns={textAligns} {...commonProps} />\n            );\n          } else if (controlItem.type === 'media') {\n            if (!media.image && !media.video && !media.audio) {\n              return null;\n            }\n            return (\n              <button\n                type=\"button\"\n                key={index}\n                data-title={controlItem.title}\n                disabled={controlItem.disabled}\n                className=\"control-item media button\"\n                onClick={this.openBraftFinder}\n              >\n                {controlItem.text}\n              </button>\n            );\n          } else if (controlItem.type === 'dropdown') {\n            return (\n              <DropDown\n                key={index}\n                className={`control-item extend-control-item dropdown ${\n                  controlItem.className || ''\n                }`}\n                caption={controlItem.text}\n                htmlCaption={controlItem.html}\n                showArrow={controlItem.showArrow}\n                title={controlItem.title}\n                arrowActive={controlItem.arrowActive}\n                theme={controlItem.theme}\n                autoHide={controlItem.autoHide}\n                disabled={controlItem.disabled}\n                ref={controlItem.ref}\n                {...commonProps}\n              >\n                {controlItem.component}\n              </DropDown>\n            );\n          } else if (controlItem.type === 'modal') {\n            return (\n              <button\n                type=\"button\"\n                key={index}\n                data-title={controlItem.title}\n                disabled={controlItem.disabled}\n                className={`control-item extend-control-item button ${\n                  controlItem.className || ''\n                }`}\n                dangerouslySetInnerHTML={\n                  controlItem.html ? { __html: controlItem.html } : null\n                }\n                onClick={(event) => {\n                  if (controlItem.modal && controlItem.modal.id) {\n                    if (this.extendedModals[controlItem.modal.id]) {\n                      this.extendedModals[controlItem.modal.id].active = true;\n                      this.extendedModals[controlItem.modal.id].update({\n                        ...controlItem.modal,\n                        language,\n                      });\n                    } else {\n                      this.extendedModals[controlItem.modal.id] = showModal({\n                        ...controlItem.modal,\n                        language,\n                      });\n                      controlItem.modal.onCreate &&\n                        controlItem.modal.onCreate(\n                          this.extendedModals[controlItem.modal.id],\n                        );\n                    }\n                  }\n                  controlItem.onClick && controlItem.onClick(event);\n                }}\n              >\n                {!controlItem.html ? controlItem.text : null}\n              </button>\n            );\n          } else if (controlItem.type === 'component') {\n            return (\n              <div\n                key={index}\n                className={`component-wrapper ${controlItem.className || ''}`}\n              >\n                {controlItem.component}\n              </div>\n            );\n          } else if (controlItem.type === 'button') {\n            return (\n              <button\n                type=\"button\"\n                key={index}\n                data-title={controlItem.title}\n                disabled={controlItem.disabled}\n                className={`control-item button ${controlItem.className || ''}`}\n                dangerouslySetInnerHTML={\n                  controlItem.html ? { __html: controlItem.html } : null\n                }\n                onClick={(event) =>\n                  controlItem.onClick && controlItem.onClick(event)\n                }\n              >\n                {!controlItem.html ? controlItem.text : null}\n              </button>\n            );\n          } else if (controlItem) {\n            let disabled = false;\n\n            if (controlItem.command === 'undo') {\n              disabled = editorState.getUndoStack().size === 0;\n            } else if (controlItem.command === 'redo') {\n              disabled = editorState.getRedoStack().size === 0;\n            }\n\n            return (\n              <button\n                type=\"button\"\n                key={index}\n                disabled={disabled}\n                data-title={controlItem.title}\n                className={this.getControlItemClassName({\n                  type: controlItem.type,\n                  command: controlItem.command,\n                })}\n                onClick={() =>\n                  this.applyControl(\n                    controlItem.command,\n                    controlItem.type,\n                    controlItem.data,\n                  )\n                }\n              >\n                {controlItem.text}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n\n  preventDefault(event) {\n    const tagName = event.target.tagName.toLowerCase();\n\n    if (tagName === 'input' || tagName === 'label') {\n      // ...\n    } else {\n      event.preventDefault();\n    }\n  }\n}\n","import 'draft-js/dist/Draft.css';\nimport 'assets/scss/_base.scss';\nimport React from 'react';\nimport languages from 'languages';\nimport BraftFinder from 'braft-finder';\nimport * as ColorUtils from 'utils/color';\nimport * as ContentUtils from 'utils/content';\nimport { Editor, EditorState } from 'draft-js';\nimport { Map } from 'immutable';\nimport getKeyBindingFn from 'configs/keybindings';\nimport defaultProps from 'configs/props';\nimport {\n  keyCommandHandlers,\n  returnHandlers,\n  beforeInputHandlers,\n  dropHandlers,\n  droppedFilesHandlers,\n  copyHandlers,\n  pastedFilesHandlers,\n  pastedTextHandlers,\n  compositionStartHandler,\n} from 'configs/handlers';\nimport {\n  getBlockRendererFn,\n  getBlockRenderMap,\n  getBlockStyleFn,\n  getCustomStyleMap,\n  getCustomStyleFn,\n  getDecorators,\n} from 'renderers';\nimport {\n  compositeStyleImportFn,\n  compositeStyleExportFn,\n  compositeEntityImportFn,\n  compositeEntityExportFn,\n  compositeBlockImportFn,\n  compositeBlockExportFn,\n  getPropInterceptors,\n} from 'helpers/extension';\nimport ControlBar from 'components/business/ControlBar';\n\nconst buildHooks = (hooks) => (hookName, defaultReturns = {}) => {\n  return hooks[hookName] || (() => defaultReturns);\n};\n\nconst filterColors = (colors, colors2) => {\n  return colors\n    .filter((item) => {\n      return !colors2.find(\n        (color) => color.toLowerCase() === item.toLowerCase(),\n      );\n    })\n    .filter((item, index, array) => array.indexOf(item) === index);\n};\n\nconst isControlEnabled = (props, controlName) => {\n  return (\n    [...props.controls, ...props.extendControls].find(\n      (item) => item === controlName || item.key === controlName,\n    ) && props.excludeControls.indexOf(controlName) === -1\n  );\n};\n\nconst getConvertOptions = (props) => {\n  const editorId = props.editorId || props.id;\n  const convertOptions = {\n    ...defaultProps.converts,\n    ...props.converts,\n    fontFamilies: props.fontFamilies,\n  };\n\n  convertOptions.styleImportFn = compositeStyleImportFn(\n    convertOptions.styleImportFn,\n    editorId,\n  );\n  convertOptions.styleExportFn = compositeStyleExportFn(\n    convertOptions.styleExportFn,\n    editorId,\n  );\n  convertOptions.entityImportFn = compositeEntityImportFn(\n    convertOptions.entityImportFn,\n    editorId,\n  );\n  convertOptions.entityExportFn = compositeEntityExportFn(\n    convertOptions.entityExportFn,\n    editorId,\n  );\n  convertOptions.blockImportFn = compositeBlockImportFn(\n    convertOptions.blockImportFn,\n    editorId,\n  );\n  convertOptions.blockExportFn = compositeBlockExportFn(\n    convertOptions.blockExportFn,\n    editorId,\n  );\n\n  return convertOptions;\n};\n\nexport default class BraftEditor extends React.Component {\n  static defaultProps = defaultProps;\n\n  constructor(props) {\n    super(props);\n\n    this.editorProps = this.getEditorProps(props);\n    this.editorDecorators = getDecorators(\n      this.editorProps.editorId || this.editorProps.id,\n    );\n\n    this.isFocused = false;\n    this.isLiving = false;\n    this.braftFinder = null;\n    this.valueInitialized = !!(this.props.defaultValue || this.props.value);\n\n    const defaultEditorState =\n      (this.props.defaultValue || this.props.value) instanceof EditorState\n        ? this.props.defaultValue || this.props.value\n        : EditorState.createEmpty(this.editorDecorators);\n    defaultEditorState.setConvertOptions(getConvertOptions(this.editorProps));\n\n    let tempColors = [];\n\n    if (ContentUtils.isEditorState(defaultEditorState)) {\n      const colors = ColorUtils.detectColorsFromDraftState(\n        defaultEditorState.toRAW(true),\n      );\n      defaultEditorState.setConvertOptions(getConvertOptions(this.editorProps));\n\n      tempColors = filterColors(colors, this.editorProps.colors);\n    }\n\n    this.state = {\n      tempColors,\n      editorState: defaultEditorState,\n      isFullscreen: false,\n      draftProps: {},\n    };\n    this.containerNode = null;\n  }\n\n  getEditorProps(props) {\n    props = props || this.props;\n\n    const { value, defaultValue, onChange, ...restProps } = props; // eslint-disable-line no-unused-vars\n    const propInterceptors = getPropInterceptors(\n      restProps.editorId || restProps.id,\n    );\n\n    if (propInterceptors.length === 0) {\n      return restProps;\n    }\n\n    let porpsMap = Map(restProps);\n\n    propInterceptors.forEach((interceptor) => {\n      porpsMap = porpsMap.merge(Map(interceptor(porpsMap.toJS(), this) || {}));\n    });\n\n    return porpsMap.toJS();\n  }\n\n  componentWillMount() {\n    if (isControlEnabled(this.editorProps, 'media')) {\n      const { language, media } = this.editorProps;\n      const { uploadFn, validateFn, items } = {\n        ...defaultProps.media,\n        ...media,\n      };\n\n      this.braftFinder = new BraftFinder({\n        items: items,\n        language: language,\n        uploader: uploadFn,\n        validator: validateFn,\n      });\n\n      this.forceUpdate();\n    }\n  }\n\n  componentDidMount() {\n    this.isLiving = true;\n  }\n\n  componentDidUpdate(_, prevState) {\n    if (prevState.editorState !== this.state.editorState) {\n      this.state.editorState.setConvertOptions(\n        getConvertOptions(this.editorProps),\n      );\n    }\n  }\n\n  componentWillReceiveProps(props) {\n    this.editorProps = this.getEditorProps(props);\n\n    const { value: editorState } = props;\n    const { media, language } = this.editorProps;\n    const currentProps = this.getEditorProps();\n\n    if (\n      !isControlEnabled(currentProps, 'media') &&\n      isControlEnabled(this.editorProps, 'media') &&\n      !this.braftFinder\n    ) {\n      const { uploadFn, validateFn, items } = {\n        ...defaultProps.media,\n        ...media,\n      };\n\n      this.braftFinder = new BraftFinder({\n        items: items,\n        language: language,\n        uploader: uploadFn,\n        validator: validateFn,\n      });\n\n      this.forceUpdate();\n    }\n\n    if (media && media.items && this.braftFinder) {\n      this.braftFinder.setItems(media.items);\n    }\n\n    let nextEditorState;\n\n    if (\n      !this.valueInitialized &&\n      typeof this.props.defaultValue === 'undefined' &&\n      ContentUtils.isEditorState(props.defaultValue)\n    ) {\n      nextEditorState = props.defaultValue;\n    } else if (ContentUtils.isEditorState(editorState)) {\n      nextEditorState = editorState;\n    }\n\n    if (nextEditorState) {\n      if (nextEditorState && nextEditorState !== this.state.editorState) {\n        const tempColors = ColorUtils.detectColorsFromDraftState(\n          nextEditorState.toRAW(true),\n        );\n        nextEditorState.setConvertOptions(getConvertOptions(this.editorProps));\n\n        this.setState(\n          {\n            tempColors: filterColors(\n              [...this.state.tempColors, ...tempColors],\n              currentProps.colors,\n            ),\n            editorState: nextEditorState,\n          },\n          () => {\n            this.props.onChange && this.props.onChange(nextEditorState);\n          },\n        );\n      } else {\n        this.setState({\n          editorState: nextEditorState,\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.isLiving = false;\n    this.controlBarInstance && this.controlBarInstance.closeBraftFinder();\n  }\n\n  onChange = (editorState, callback) => {\n    if (!(editorState instanceof EditorState)) {\n      editorState = EditorState.set(editorState, {\n        decorator: this.editorDecorators,\n      });\n    }\n\n    if (!editorState.convertOptions) {\n      editorState.setConvertOptions(getConvertOptions(this.editorProps));\n    }\n\n    this.setState({ editorState }, () => {\n      this.props.onChange && this.props.onChange(editorState);\n      callback && callback(editorState);\n    });\n  };\n\n  getDraftInstance = () => {\n    return this.draftInstance;\n  };\n\n  getFinderInstance = () => {\n    return this.braftFinder;\n  };\n\n  getValue = () => {\n    return this.state.editorState;\n  };\n\n  setValue = (editorState, callback) => {\n    return this.onChange(editorState, callback);\n  };\n\n  forceRender = () => {\n    const selectionState = this.state.editorState.getSelection();\n\n    this.setValue(\n      EditorState.set(this.state.editorState, {\n        decorator: this.editorDecorators,\n      }),\n      () => {\n        this.setValue(\n          EditorState.forceSelection(this.state.editorState, selectionState),\n        );\n      },\n    );\n  };\n\n  onTab = (event) => {\n    if (keyCommandHandlers('tab', this.state.editorState, this) === 'handled') {\n      event.preventDefault();\n    }\n\n    this.editorProps.onTab && this.editorProps.onTab(event);\n  };\n\n  onFocus = () => {\n    this.isFocused = true;\n    this.editorProps.onFocus &&\n      this.editorProps.onFocus(this.state.editorState);\n  };\n\n  onBlur = () => {\n    this.isFocused = false;\n    this.editorProps.onBlur && this.editorProps.onBlur(this.state.editorState);\n  };\n\n  requestFocus = () => {\n    setTimeout(() => this.draftInstance.focus(), 0);\n  };\n\n  handleKeyCommand = (command, editorState) =>\n    keyCommandHandlers(command, editorState, this);\n\n  handleReturn = (event, editorState) =>\n    returnHandlers(event, editorState, this);\n\n  handleBeforeInput = (chars, editorState) =>\n    beforeInputHandlers(chars, editorState, this);\n\n  handleDrop = (selectionState, dataTransfer) =>\n    dropHandlers(selectionState, dataTransfer, this);\n\n  handleDroppedFiles = (selectionState, files) =>\n    droppedFilesHandlers(selectionState, files, this);\n\n  handlePastedFiles = (files) => pastedFilesHandlers(files, this);\n\n  handleCopyContent = (event) => copyHandlers(event, this);\n\n  handlePastedText = (text, html, editorState) =>\n    pastedTextHandlers(text, html, editorState, this);\n\n  handleCompositionStart = (event) => compositionStartHandler(event, this);\n\n  undo = () => {\n    this.setValue(ContentUtils.undo(this.state.editorState));\n  };\n\n  redo = () => {\n    this.setValue(ContentUtils.redo(this.state.editorState));\n  };\n\n  removeSelectionInlineStyles = () => {\n    this.setValue(\n      ContentUtils.removeSelectionInlineStyles(this.state.editorState),\n    );\n  };\n\n  insertHorizontalLine = () => {\n    this.setValue(ContentUtils.insertHorizontalLine(this.state.editorState));\n  };\n\n  clearEditorContent = () => {\n    this.setValue(ContentUtils.clear(this.state.editorState), (editorState) => {\n      this.setValue(ContentUtils.toggleSelectionIndent(editorState, 0));\n    });\n  };\n\n  toggleFullscreen = (fullscreen) => {\n    this.setState(\n      {\n        isFullscreen:\n          typeof fullscreen !== 'undefined'\n            ? fullscreen\n            : !this.state.isFullscreen,\n      },\n      () => {\n        this.editorProps.onFullscreen &&\n          this.editorProps.onFullscreen(this.state.isFullscreen);\n      },\n    );\n  };\n\n  lockOrUnlockEditor(editorLocked) {\n    this.setState({ editorLocked });\n  }\n\n  setEditorContainerNode = (containerNode) => {\n    this.containerNode = containerNode;\n  };\n\n  render() {\n    let {\n      id,\n      editorId,\n      controls,\n      excludeControls,\n      extendControls,\n      readOnly,\n      disabled,\n      media,\n      language,\n      colors,\n      colorPicker,\n      colorPickerTheme,\n      colorPickerAutoHide,\n      hooks,\n      fontSizes,\n      fontFamilies,\n      emojis,\n      placeholder,\n      fixPlaceholder,\n      headings,\n      imageControls,\n      imageResizable,\n      lineHeights,\n      letterSpacings,\n      textAligns,\n      textBackgroundColor,\n      allowInsertLinkText,\n      defaultLinkTarget,\n      extendAtomics,\n      className,\n      style,\n      controlBarClassName,\n      controlBarStyle,\n      contentClassName,\n      contentStyle,\n      stripPastedStyles,\n      componentBelowControlBar,\n    } = this.editorProps;\n\n    const { isFullscreen, editorState } = this.state;\n\n    editorId = editorId || id;\n    hooks = buildHooks(hooks);\n    controls = controls.filter((item) => excludeControls.indexOf(item) === -1);\n    language =\n      (typeof language === 'function'\n        ? language(languages, 'braft-editor')\n        : languages[language]) || languages[defaultProps.language];\n\n    const externalMedias =\n      media && media.externals\n        ? {\n            ...defaultProps.media.externals,\n            ...media.externals,\n          }\n        : defaultProps.media.externals;\n\n    const accepts =\n      media && media.accepts\n        ? {\n            ...defaultProps.media.accepts,\n            ...media.accepts,\n          }\n        : defaultProps.media.accepts;\n\n    media = { ...defaultProps.media, ...media, externalMedias, accepts };\n\n    if (!media.uploadFn) {\n      media.video = false;\n      media.audio = false;\n    }\n\n    const controlBarProps = {\n      editor: this,\n      editorState: editorState,\n      braftFinder: this.braftFinder,\n      ref: (instance) => (this.controlBarInstance = instance),\n      getContainerNode: () => this.containerNode,\n      className: controlBarClassName,\n      style: controlBarStyle,\n      colors: [...colors, ...this.state.tempColors],\n      colorPicker,\n      colorPickerTheme,\n      colorPickerAutoHide,\n      hooks,\n      editorId,\n      media,\n      controls,\n      language,\n      extendControls,\n      headings,\n      fontSizes,\n      fontFamilies,\n      emojis,\n      lineHeights,\n      letterSpacings,\n      textAligns,\n      textBackgroundColor,\n      allowInsertLinkText,\n      defaultLinkTarget,\n    };\n\n    const { unitExportFn } = editorState.convertOptions;\n\n    const commonProps = {\n      editor: this,\n      editorId,\n      hooks,\n      editorState: editorState,\n      containerNode: this.containerNode,\n      imageControls,\n      imageResizable,\n      language,\n      extendAtomics,\n    };\n\n    const blockRendererFn = getBlockRendererFn(\n      commonProps,\n      this.editorProps.blockRendererFn,\n    );\n    const blockRenderMap = getBlockRenderMap(\n      commonProps,\n      this.editorProps.blockRenderMap,\n    );\n    const blockStyleFn = getBlockStyleFn(this.editorProps.blockStyleFn);\n    const customStyleMap = getCustomStyleMap(\n      commonProps,\n      this.editorProps.customStyleMap,\n    );\n    const customStyleFn = getCustomStyleFn(commonProps, {\n      fontFamilies,\n      unitExportFn,\n      customStyleFn: this.editorProps.customStyleFn,\n    });\n\n    const keyBindingFn = getKeyBindingFn(this.editorProps.keyBindingFn);\n\n    const mixedProps = {};\n\n    if (\n      this.state.editorLocked ||\n      this.editorProps.disabled ||\n      this.editorProps.readOnly ||\n      this.editorProps.draftProps.readOnly\n    ) {\n      mixedProps.readOnly = true;\n    }\n\n    if (\n      placeholder &&\n      fixPlaceholder &&\n      editorState.isEmpty() &&\n      editorState.getCurrentContent().getFirstBlock().getType() !== 'unstyled'\n    ) {\n      placeholder = '';\n    }\n\n    const draftProps = {\n      ref: (instance) => {\n        this.draftInstance = instance;\n      },\n      editorState: editorState,\n      handleKeyCommand: this.handleKeyCommand,\n      handleReturn: this.handleReturn,\n      handleBeforeInput: this.handleBeforeInput,\n      handleDrop: this.handleDrop,\n      handleDroppedFiles: this.handleDroppedFiles,\n      handlePastedText: this.handlePastedText,\n      handlePastedFiles: this.handlePastedFiles,\n      onChange: this.onChange,\n      onTab: this.onTab,\n      onFocus: this.onFocus,\n      onBlur: this.onBlur,\n      blockRenderMap,\n      blockRendererFn,\n      blockStyleFn,\n      customStyleMap,\n      customStyleFn,\n      keyBindingFn,\n      placeholder,\n      stripPastedStyles,\n      ...this.editorProps.draftProps,\n      ...mixedProps,\n    };\n\n    return (\n      <div\n        style={style}\n        ref={this.setEditorContainerNode}\n        className={`bf-container ${className}${disabled ? ' disabled' : ''}${\n          readOnly ? ' read-only' : ''\n        }${isFullscreen ? ' fullscreen' : ''}`}\n      >\n        <ControlBar {...controlBarProps} />\n        {componentBelowControlBar}\n        <div\n          onCompositionStart={this.handleCompositionStart}\n          className={`bf-content ${contentClassName}`}\n          onCopy={this.handleCopyContent}\n          style={contentStyle}\n        >\n          <Editor {...draftProps} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport { EditorState };\n","import BraftEditor, { EditorState } from './editor';\nimport covert, {\n  convertRawToEditorState,\n  convertHTMLToEditorState,\n  convertEditorStateToRaw,\n  convertEditorStateToHTML,\n} from './covert';\nimport * as utils from './utils';\nimport {\n  createExtensibleEditor,\n  compositeStyleImportFn,\n  compositeStyleExportFn,\n  compositeEntityImportFn,\n  compositeEntityExportFn,\n  compositeBlockImportFn,\n  compositeBlockExportFn,\n} from 'helpers/extension';\nimport { getDecorators } from 'renderers';\n\nEditorState.prototype.setConvertOptions = function (options = {}) {\n  this.convertOptions = options;\n};\n\nEditorState.prototype.toHTML = function (options = {}) {\n  const convertOptions = this.convertOptions || {};\n  return convertEditorStateToHTML(this, { ...convertOptions, ...options });\n};\n\nEditorState.prototype.toRAW = function (noStringify) {\n  return noStringify\n    ? convertEditorStateToRaw(this)\n    : JSON.stringify(convertEditorStateToRaw(this));\n};\n\nEditorState.prototype.toText = function () {\n  return this.getCurrentContent().getPlainText();\n};\n\nEditorState.prototype.isEmpty = function () {\n  return !this.getCurrentContent().hasText();\n};\n\nBraftEditor.createEditorState = EditorState.createFrom = (\n  content,\n  options = {},\n) => {\n  options.unitExportFn =\n    options.unitExportFn || BraftEditor.defaultProps.converts.unitExportFn;\n  options.styleImportFn = compositeStyleImportFn(\n    options.styleImportFn,\n    options.editorId,\n  );\n  options.entityImportFn = compositeEntityImportFn(\n    options.entityImportFn,\n    options.editorId,\n  );\n  options.blockImportFn = compositeBlockImportFn(\n    options.blockImportFn,\n    options.editorId,\n  );\n\n  let editorState = null;\n\n  if (content instanceof EditorState) {\n    editorState = content;\n  } else if (\n    typeof content === 'object' &&\n    content &&\n    content.blocks &&\n    content.entityMap\n  ) {\n    editorState = convertRawToEditorState(\n      content,\n      getDecorators(options.editorId),\n    );\n  } else if (typeof content === 'string') {\n    try {\n      if (/^(-)?\\d+$/.test(content)) {\n        editorState = convertHTMLToEditorState(\n          content,\n          getDecorators(options.editorId),\n          options,\n          'create',\n        );\n      } else {\n        editorState = EditorState.createFrom(JSON.parse(content), options);\n      }\n    } catch (error) {\n      editorState = convertHTMLToEditorState(\n        content,\n        getDecorators(options.editorId),\n        options,\n        'create',\n      );\n    }\n  } else if (typeof content === 'number') {\n    editorState = convertHTMLToEditorState(\n      content.toLocaleString().replace(/,/g, ''),\n      getDecorators(options.editorId),\n      options,\n      'create',\n    );\n  } else {\n    editorState = EditorState.createEmpty(getDecorators(options.editorId));\n  }\n\n  options.styleExportFn = compositeStyleExportFn(\n    options.styleExportFn,\n    options.editorId,\n  );\n  options.entityExportFn = compositeEntityExportFn(\n    options.entityExportFn,\n    options.editorId,\n  );\n  options.blockExportFn = compositeBlockExportFn(\n    options.blockExportFn,\n    options.editorId,\n  );\n\n  editorState.setConvertOptions(options);\n\n  return editorState;\n};\n\nexport default createExtensibleEditor(BraftEditor);\nexport { EditorState, getDecorators };\n\nexport {\n  convertRawToEditorState,\n  convertHTMLToEditorState,\n  convertEditorStateToRaw,\n  convertEditorStateToHTML,\n};\n\nexport { utils, covert };\n\n// 2.1版本开发计划\n// [ ]优化选中多行文字是插入链接报错的问题\n// [ ]新增编辑器内图片删除hook\n\n// 2.2版本开发计划\n// [ ]表格功能\n// [ ]美化UI，包括图标和界面风格\n\n// 2.3版本开发计划\n// [ ]初级md快捷输入支持\n// [ ]图片裁切等简单的编辑功能\n// [ ]允许自定义快捷键\n","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin","// removed by extract-text-webpack-plugin"],"sourceRoot":""}